{"file_contents":{"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/payment-dialog.tsx":{"content":"import { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { insertPaymentSchema, type InsertPayment } from \"@shared/schema\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { format } from \"date-fns\";\n\ninterface PaymentDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  invoiceId: string;\n  maxAmount: number;\n}\n\nexport function PaymentDialog({ open, onOpenChange, invoiceId, maxAmount }: PaymentDialogProps) {\n  const { toast } = useToast();\n  const safeMaxAmount = maxAmount || 0;\n\n  const form = useForm<InsertPayment>({\n    resolver: zodResolver(insertPaymentSchema),\n    defaultValues: {\n      invoiceId,\n      paymentDate: format(new Date(), \"yyyy-MM-dd\"),\n      amount: safeMaxAmount,\n      method: \"BANK_TRANSFER\",\n      reference: \"\",\n      notes: \"\",\n    },\n  });\n\n  const mutation = useMutation({\n    mutationFn: async (data: InsertPayment) => {\n      return apiRequest(\"POST\", `/api/invoices/${invoiceId}/payments`, data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/invoices\"] });\n      toast({\n        title: \"Payment recorded\",\n        description: \"Successfully recorded payment\",\n      });\n      onOpenChange(false);\n      form.reset();\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: InsertPayment) => {\n    if (data.amount > safeMaxAmount) {\n      toast({\n        title: \"Invalid amount\",\n        description: `Payment amount cannot exceed balance due of ₹${safeMaxAmount}`,\n        variant: \"destructive\",\n      });\n      return;\n    }\n    mutation.mutate(data);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Record Payment</DialogTitle>\n          <DialogDescription>\n            Record a payment for this invoice (Max: ₹{safeMaxAmount.toFixed(2)})\n          </DialogDescription>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"amount\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Amount *</FormLabel>\n                  <FormControl>\n                    <Input\n                      type=\"number\"\n                      step=\"0.01\"\n                      placeholder=\"0.00\"\n                      {...field}\n                      onChange={(e) => field.onChange(parseFloat(e.target.value) || 0)}\n                      data-testid=\"input-payment-amount\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"paymentDate\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Payment Date *</FormLabel>\n                  <FormControl>\n                    <Input type=\"date\" {...field} data-testid=\"input-payment-date\" />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"method\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Payment Method *</FormLabel>\n                  <Select onValueChange={field.onChange} defaultValue={field.value}>\n                    <FormControl>\n                      <SelectTrigger data-testid=\"select-payment-method\">\n                        <SelectValue placeholder=\"Select method\" />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      <SelectItem value=\"BANK_TRANSFER\">Bank Transfer</SelectItem>\n                      <SelectItem value=\"UPI\">UPI</SelectItem>\n                      <SelectItem value=\"CASH\">Cash</SelectItem>\n                      <SelectItem value=\"CARD\">Card</SelectItem>\n                      <SelectItem value=\"OTHER\">Other</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"reference\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Reference / Transaction ID</FormLabel>\n                  <FormControl>\n                    <Input\n                      placeholder=\"e.g., TXN123456\"\n                      {...field}\n                      data-testid=\"input-payment-reference\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"notes\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Notes</FormLabel>\n                  <FormControl>\n                    <Textarea\n                      placeholder=\"Additional payment notes...\"\n                      className=\"min-h-20\"\n                      {...field}\n                      data-testid=\"input-payment-notes\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"flex justify-end gap-2 pt-4\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => onOpenChange(false)}\n                data-testid=\"button-cancel-payment\"\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\" disabled={mutation.isPending} data-testid=\"button-save-payment\">\n                {mutation.isPending ? \"Recording...\" : \"Record Payment\"}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":6869},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"replit.md":{"content":"# Agency Control Center\n\n## Overview\n\nAgency Control Center is an internal web application for digital marketing agencies to manage clients, projects, invoices, and payments. The application follows a spreadsheet-like design philosophy inspired by Google Sheets, Airtable, and Linear, prioritizing data density and efficient workflows over visual flair.\n\n**Current Status:** Phase 3 complete. The system now includes a comprehensive service catalog with integration into invoice creation. Users can define reusable service templates (SEO, PPC, Social Media, etc.) with default pricing and descriptions, then quickly add them to invoices via a convenient popover selector. Previous phases include vendor management, expense tracking, team member management, salary payments, and financial dashboard with profit metrics.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n\n**Technology Stack:**\n- React with TypeScript and Vite for build tooling\n- Wouter for client-side routing (lightweight alternative to React Router)\n- TanStack Query (React Query) for server state management and caching\n- React Hook Form with Zod validation for form handling\n\n**UI Component System:**\n- shadcn/ui component library built on Radix UI primitives\n- Tailwind CSS with custom design tokens for consistent styling\n- Custom spacing system using Tailwind units (2, 4, 6, 8)\n- Typography hierarchy with Inter font family and JetBrains Mono for numbers\n- Status badge system with color-coded states for clients, projects, and invoices\n\n**Layout Pattern:**\n- Fixed top navigation bar (height: 16)\n- Fixed left sidebar navigation (width: 64)\n- Responsive design with mobile-first considerations using custom hooks\n- SidebarProvider context for managing sidebar state across the application\n\n**State Management:**\n- Authentication state managed via React Context (AuthProvider)\n- Server state cached and synchronized via TanStack Query\n- Local storage for JWT token persistence\n- Form state isolated to individual components using React Hook Form\n\n### Backend Architecture\n\n**Technology Stack:**\n- Node.js with Express.js for REST API server\n- TypeScript with ES modules for type safety\n- JWT-based authentication with bcrypt password hashing\n- Nanoid for generating unique identifiers\n\n**API Design:**\n- RESTful JSON endpoints organized by resource type\n- Middleware-based authentication using Bearer tokens\n- Request/response logging with duration tracking\n- Error handling with appropriate HTTP status codes\n\n**Authentication Flow:**\n- Simple email/password login (no public signup)\n- JWT tokens issued on successful authentication\n- Token validation middleware for protected routes\n- 401/403 responses trigger automatic logout and redirect to login\n\n**Data Storage:**\n- PostgreSQL database via Drizzle ORM and Neon serverless\n- Storage implementation in DatabaseStorage class with IStorage interface\n- Schema definitions shared between client and server via `@shared/schema`\n- Automatic database seeding on first run with sample data\n\n**Server-Side Rendering:**\n- Vite integration for development with HMR\n- Custom middleware for serving React application\n- Production build serves static assets from dist/public\n\n### Data Models and Business Logic\n\n**Core Entities:**\n- **Users:** Admin/Manager/Staff roles with hashed passwords\n- **Clients:** Contact information, status tracking (Active/Inactive/Archived), and relationship metrics\n- **Projects:** Linked to clients, with status workflow (Active/On Hold/Completed/Cancelled)\n- **Invoices:** Line items, tax calculations, automatic numbering, and status management\n- **Payments:** Linked to invoices with automatic status updates\n- **Vendors:** Supplier management with contact details and status tracking\n- **Expense Categories:** Predefined categories for expense organization (e.g., Software, Marketing, Travel)\n- **Expenses:** Business expenses linked to vendors and categories with status tracking (Pending/Approved/Paid)\n- **Team Members:** Employee records with role, salary, and status information\n- **Salary Payments:** Monthly salary payment records linked to team members\n\n**Business Rules:**\n- Invoice status automatically transitions: DRAFT → SENT → PAID/OVERDUE\n- Payment recording automatically updates invoice status to PAID\n- Invoice numbering follows sequential pattern (INV-001, INV-002, etc.)\n- Client statistics include total invoiced, paid, and outstanding amounts\n- Financial dashboard calculates:\n  - Total Income: Sum of all payment amounts collected\n  - Total Expenses: Sum of all business expenses plus all salary payments\n  - Net Profit: Total Income minus Total Expenses\n  - Profit Margin: (Net Profit / Total Income) × 100%\n\n**Validation:**\n- Zod schemas for runtime validation on both client and server\n- Shared schema definitions ensure consistency across stack\n- Form-level validation with user-friendly error messages\n\n### External Dependencies\n\n**Database:**\n- PostgreSQL database hosted on Neon via `@neondatabase/serverless`\n- Drizzle ORM for type-safe database queries and migrations\n- Migration system configured via `drizzle.config.ts`\n- Automatic database seeding with sample data on first run\n- Schema definitions in `shared/schema.ts` synced with database\n\n**UI Component Libraries:**\n- Radix UI primitives for accessible, unstyled components\n- shadcn/ui components built on top of Radix UI\n- Lucide React for consistent iconography\n- date-fns for date formatting and manipulation\n\n**Development Tools:**\n- Vite for fast development builds and HMR\n- Replit-specific plugins for runtime error overlay and dev banner\n- TypeScript compiler with strict mode enabled\n- Path aliases configured for clean imports (@/, @shared/, @assets/)\n\n**Production Deployment:**\n- esbuild for server bundling\n- Vite for optimized client bundle\n- Environment variables for configuration (DATABASE_URL, SESSION_SECRET)\n- Separation of development and production modes","size_bytes":6003},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"Inter\", \"system-ui\", \"sans-serif\"],\n        serif: [\"Georgia\", \"serif\"],\n        mono: [\"JetBrains Mono\", \"SF Mono\", \"Menlo\", \"monospace\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4096},"server/seed.ts":{"content":"import bcrypt from \"bcrypt\";\nimport { storage } from \"./storage\";\n\nexport async function seedDatabase() {\n  try {\n    // Check if admin user already exists\n    const existingAdmin = await storage.getUserByEmail(\"admin@agency.local\");\n    if (existingAdmin) {\n      console.log(\"Database already seeded\");\n      return;\n    }\n\n    console.log(\"Seeding database...\");\n\n    // Create admin user\n    const hashedPassword = await bcrypt.hash(\"admin123\", 10);\n    const admin = await storage.createUser({\n      name: \"Admin User\",\n      email: \"admin@agency.local\",\n      passwordHash: hashedPassword,\n      role: \"ADMIN\",\n    });\n    console.log(\"Created admin user:\", admin.email);\n\n    // Create sample clients\n    const client1 = await storage.createClient({\n      name: \"TechStart Solutions\",\n      contactName: \"Rajesh Kumar\",\n      email: \"rajesh@techstart.com\",\n      phone: \"+91 98765 43210\",\n      companyWebsite: \"https://techstart.com\",\n      address: \"123 MG Road, Bangalore, Karnataka 560001\",\n      status: \"ACTIVE\",\n      notes: \"Key client - Monthly SEO retainer\",\n      portalUrl: \"\",\n    });\n\n    const client2 = await storage.createClient({\n      name: \"Fashion Hub India\",\n      contactName: \"Priya Sharma\",\n      email: \"priya@fashionhub.in\",\n      phone: \"+91 98765 43211\",\n      companyWebsite: \"https://fashionhub.in\",\n      address: \"45 Commercial Street, Mumbai, Maharashtra 400001\",\n      status: \"ACTIVE\",\n      notes: \"E-commerce client - Digital marketing campaign\",\n      portalUrl: \"\",\n    });\n\n    const client3 = await storage.createClient({\n      name: \"Green Energy Co\",\n      contactName: \"Amit Patel\",\n      email: \"amit@greenenergy.co.in\",\n      phone: \"+91 98765 43212\",\n      companyWebsite: \"https://greenenergy.co.in\",\n      address: \"78 Park Avenue, Delhi, 110001\",\n      status: \"ACTIVE\",\n      notes: \"Solar panel company - Website redesign project\",\n      portalUrl: \"\",\n    });\n\n    const client4 = await storage.createClient({\n      name: \"FoodDelight Express\",\n      contactName: \"Sarah Johnson\",\n      email: \"sarah@fooddelight.com\",\n      phone: \"+91 98765 43213\",\n      companyWebsite: \"https://fooddelight.com\",\n      address: \"90 Brigade Road, Bangalore, Karnataka 560025\",\n      status: \"INACTIVE\",\n      notes: \"Paused campaign - seasonal business\",\n      portalUrl: \"\",\n    });\n\n    const client5 = await storage.createClient({\n      name: \"HealthPlus Clinics\",\n      contactName: \"Dr. Vikram Singh\",\n      email: \"vikram@healthplus.in\",\n      phone: \"+91 98765 43214\",\n      companyWebsite: \"https://healthplus.in\",\n      address: \"12 Medical Complex, Chennai, Tamil Nadu 600001\",\n      status: \"ACTIVE\",\n      notes: \"Healthcare client - Local SEO focus\",\n      portalUrl: \"\",\n    });\n\n    console.log(\"Created 5 sample clients\");\n\n    // Create sample projects\n    const project1 = await storage.createProject({\n      clientId: client1.id,\n      name: \"Monthly SEO Optimization\",\n      scope: \"Local SEO\",\n      startDate: new Date(\"2024-01-01\"),\n      endDate: null,\n      status: \"ACTIVE\",\n      notes: \"Ongoing monthly SEO services including keyword optimization and content creation\",\n    });\n\n    const project2 = await storage.createProject({\n      clientId: client2.id,\n      name: \"Meta Ads Campaign Q1\",\n      scope: \"Digital Marketing\",\n      startDate: new Date(\"2024-01-15\"),\n      endDate: new Date(\"2024-03-31\"),\n      status: \"ACTIVE\",\n      notes: \"Quarterly Facebook and Instagram advertising campaign\",\n    });\n\n    const project3 = await storage.createProject({\n      clientId: client3.id,\n      name: \"Corporate Website Redesign\",\n      scope: \"Website Design\",\n      startDate: new Date(\"2024-02-01\"),\n      endDate: new Date(\"2024-04-30\"),\n      status: \"ACTIVE\",\n      notes: \"Complete website overhaul with modern design and responsive layout\",\n    });\n\n    const project4 = await storage.createProject({\n      clientId: client5.id,\n      name: \"Local SEO Package\",\n      scope: \"Local SEO\",\n      startDate: new Date(\"2024-03-01\"),\n      endDate: null,\n      status: \"ACTIVE\",\n      notes: \"Google My Business optimization and local directory listings\",\n    });\n\n    console.log(\"Created 4 sample projects\");\n\n    // Create sample invoices\n    const invoice1 = await storage.createInvoice({\n      clientId: client1.id,\n      projectId: project1.id,\n      invoiceNumber: \"INV-0001\",\n      issueDate: new Date(\"2024-01-01\"),\n      dueDate: new Date(\"2024-01-31\"),\n      currency: \"INR\",\n      subtotal: 42372.88,\n      taxAmount: 7627.12,\n      totalAmount: 50000,\n      status: \"PAID\",\n      notes: \"January 2024 SEO Services\",\n      lineItems: [\n        {\n          description: \"Monthly SEO Package - January 2024\",\n          quantity: 1,\n          unitPrice: 42372.88,\n          lineTotal: 42372.88,\n        },\n      ],\n    });\n\n    // Add payment to invoice 1\n    await storage.createPayment({\n      invoiceId: invoice1.id,\n      paymentDate: new Date(\"2024-01-28\"),\n      amount: 50000,\n      method: \"BANK_TRANSFER\",\n      reference: \"TXN123456789\",\n      notes: \"Payment received via NEFT\",\n    });\n\n    const invoice2 = await storage.createInvoice({\n      clientId: client2.id,\n      projectId: project2.id,\n      invoiceNumber: \"INV-0002\",\n      issueDate: new Date(\"2024-01-15\"),\n      dueDate: new Date(\"2024-02-15\"),\n      currency: \"INR\",\n      subtotal: 84745.76,\n      taxAmount: 15254.24,\n      totalAmount: 100000,\n      status: \"PARTIALLY_PAID\",\n      notes: \"Meta Ads Campaign - Q1 2024\",\n      lineItems: [\n        {\n          description: \"Facebook Ads Management - January\",\n          quantity: 1,\n          unitPrice: 33898.31,\n          lineTotal: 33898.31,\n        },\n        {\n          description: \"Instagram Ads Management - January\",\n          quantity: 1,\n          unitPrice: 33898.31,\n          lineTotal: 33898.31,\n        },\n        {\n          description: \"Creative Design Services\",\n          quantity: 1,\n          unitPrice: 16949.14,\n          lineTotal: 16949.14,\n        },\n      ],\n    });\n\n    await storage.createPayment({\n      invoiceId: invoice2.id,\n      paymentDate: new Date(\"2024-02-10\"),\n      amount: 50000,\n      method: \"UPI\",\n      reference: \"UPI-987654321\",\n      notes: \"Partial payment received\",\n    });\n\n    const invoice3 = await storage.createInvoice({\n      clientId: client3.id,\n      projectId: project3.id,\n      invoiceNumber: \"INV-0003\",\n      issueDate: new Date(\"2024-02-01\"),\n      dueDate: new Date(\"2024-02-20\"),\n      currency: \"INR\",\n      subtotal: 127118.64,\n      taxAmount: 22881.36,\n      totalAmount: 150000,\n      status: \"SENT\",\n      notes: \"Website Redesign - Phase 1 Advance\",\n      lineItems: [\n        {\n          description: \"Website Redesign - Phase 1 (50% Advance)\",\n          quantity: 1,\n          unitPrice: 127118.64,\n          lineTotal: 127118.64,\n        },\n      ],\n    });\n\n    const invoice4 = await storage.createInvoice({\n      clientId: client5.id,\n      projectId: project4.id,\n      invoiceNumber: \"INV-0004\",\n      issueDate: new Date(\"2024-03-01\"),\n      dueDate: new Date(\"2024-03-10\"),\n      currency: \"INR\",\n      subtotal: 25423.73,\n      taxAmount: 4576.27,\n      totalAmount: 30000,\n      status: \"OVERDUE\",\n      notes: \"Local SEO Services - March 2024\",\n      lineItems: [\n        {\n          description: \"Google My Business Optimization\",\n          quantity: 1,\n          unitPrice: 12711.86,\n          lineTotal: 12711.86,\n        },\n        {\n          description: \"Local Directory Listings (20 directories)\",\n          quantity: 20,\n          unitPrice: 635.59,\n          lineTotal: 12711.86,\n        },\n      ],\n    });\n\n    const invoice5 = await storage.createInvoice({\n      clientId: client1.id,\n      projectId: project1.id,\n      invoiceNumber: \"INV-0005\",\n      issueDate: new Date(\"2024-02-01\"),\n      dueDate: new Date(Date.now() + 15 * 24 * 60 * 60 * 1000), // 15 days from now\n      currency: \"INR\",\n      subtotal: 42372.88,\n      taxAmount: 7627.12,\n      totalAmount: 50000,\n      status: \"SENT\",\n      notes: \"February 2024 SEO Services\",\n      lineItems: [\n        {\n          description: \"Monthly SEO Package - February 2024\",\n          quantity: 1,\n          unitPrice: 42372.88,\n          lineTotal: 42372.88,\n        },\n      ],\n    });\n\n    const invoice6 = await storage.createInvoice({\n      clientId: client2.id,\n      projectId: project2.id,\n      invoiceNumber: \"INV-0006\",\n      issueDate: new Date(),\n      dueDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000), // 7 days from now\n      currency: \"INR\",\n      subtotal: 84745.76,\n      taxAmount: 15254.24,\n      totalAmount: 100000,\n      status: \"DRAFT\",\n      notes: \"Meta Ads Campaign - February 2024\",\n      lineItems: [\n        {\n          description: \"Facebook Ads Management - February\",\n          quantity: 1,\n          unitPrice: 42372.88,\n          lineTotal: 42372.88,\n        },\n        {\n          description: \"Instagram Ads Management - February\",\n          quantity: 1,\n          unitPrice: 42372.88,\n          lineTotal: 42372.88,\n        },\n      ],\n    });\n\n    console.log(\"Created 6 sample invoices with various statuses\");\n\n    // ==== PHASE 2: Expense Categories ====\n    const catSoftware = await storage.createExpenseCategory({\n      name: \"Software & Tools\",\n      code: \"SOFT\",\n    });\n\n    const catAdvertising = await storage.createExpenseCategory({\n      name: \"Advertising\",\n      code: \"ADV\",\n    });\n\n    const catOffice = await storage.createExpenseCategory({\n      name: \"Office & Admin\",\n      code: \"OFFICE\",\n    });\n\n    const catSalaries = await storage.createExpenseCategory({\n      name: \"Salaries\",\n      code: \"SAL\",\n    });\n\n    console.log(\"Created 4 expense categories\");\n\n    // ==== Services ====\n    await storage.createService({\n      name: \"SEO Optimization\",\n      description: \"Comprehensive search engine optimization including keyword research, on-page optimization, and monthly reporting\",\n      category: \"SEO\",\n      defaultPrice: 25000,\n      currency: \"INR\",\n      unit: \"Month\",\n      status: \"ACTIVE\",\n    });\n\n    await storage.createService({\n      name: \"Social Media Management\",\n      description: \"Complete social media management across Facebook, Instagram, LinkedIn including content creation and community management\",\n      category: \"SOCIAL_MEDIA\",\n      defaultPrice: 20000,\n      currency: \"INR\",\n      unit: \"Month\",\n      status: \"ACTIVE\",\n    });\n\n    await storage.createService({\n      name: \"Content Writing\",\n      description: \"Professional blog posts, articles, and website content optimized for SEO\",\n      category: \"CONTENT\",\n      defaultPrice: 3000,\n      currency: \"INR\",\n      unit: \"Article\",\n      status: \"ACTIVE\",\n    });\n\n    await storage.createService({\n      name: \"Google Ads Campaign Management\",\n      description: \"Complete Google Ads campaign setup, management, and optimization\",\n      category: \"ADVERTISING\",\n      defaultPrice: 15000,\n      currency: \"INR\",\n      unit: \"Month\",\n      status: \"ACTIVE\",\n    });\n\n    await storage.createService({\n      name: \"Social Media Ad Campaign\",\n      description: \"Facebook and Instagram advertising campaign creation and management\",\n      category: \"ADVERTISING\",\n      defaultPrice: 12000,\n      currency: \"INR\",\n      unit: \"Month\",\n      status: \"ACTIVE\",\n    });\n\n    await storage.createService({\n      name: \"Website Design & Development\",\n      description: \"Custom responsive website design and development\",\n      category: \"DEVELOPMENT\",\n      defaultPrice: 80000,\n      currency: \"INR\",\n      unit: \"Project\",\n      status: \"ACTIVE\",\n    });\n\n    await storage.createService({\n      name: \"Graphic Design - Social Media\",\n      description: \"Custom graphic designs for social media posts and stories\",\n      category: \"DESIGN\",\n      defaultPrice: 1500,\n      currency: \"INR\",\n      unit: \"Design\",\n      status: \"ACTIVE\",\n    });\n\n    await storage.createService({\n      name: \"Marketing Consultation\",\n      description: \"Strategic digital marketing consultation and planning session\",\n      category: \"CONSULTING\",\n      defaultPrice: 5000,\n      currency: \"INR\",\n      unit: \"Hour\",\n      status: \"ACTIVE\",\n    });\n\n    console.log(\"Created 8 sample services\");\n\n    // ==== PHASE 2: Vendors ====\n    const vendorMeta = await storage.createVendor({\n      name: \"Meta Ads\",\n      contactName: \"Support Team\",\n      email: \"support@meta.com\",\n      phone: \"+1-650-543-4800\",\n      website: \"https://business.facebook.com\",\n      address: \"1 Meta Way, Menlo Park, CA 94025\",\n      category: \"MEDIA_BUY\",\n      status: \"ACTIVE\",\n      notes: \"Facebook and Instagram advertising platform\",\n    });\n\n    const vendorGoogle = await storage.createVendor({\n      name: \"Google Ads\",\n      contactName: \"Support Team\",\n      email: \"support@google.com\",\n      phone: \"+1-866-246-6453\",\n      website: \"https://ads.google.com\",\n      address: \"1600 Amphitheatre Parkway, Mountain View, CA 94043\",\n      category: \"MEDIA_BUY\",\n      status: \"ACTIVE\",\n      notes: \"Google advertising platform\",\n    });\n\n    const vendorFreelancer = await storage.createVendor({\n      name: \"Freelance Designer - Arjun Patel\",\n      contactName: \"Arjun Patel\",\n      email: \"arjun.design@gmail.com\",\n      phone: \"+91 98765 99999\",\n      website: \"\",\n      address: \"Pune, Maharashtra\",\n      category: \"FREELANCER\",\n      status: \"ACTIVE\",\n      notes: \"Graphic designer for social media content\",\n    });\n\n    console.log(\"Created 3 vendors\");\n\n    // ==== PHASE 2: Team Members ====\n    const teamMember1 = await storage.createTeamMember({\n      name: \"Sneha Reddy\",\n      email: \"sneha@agency.local\",\n      roleTitle: \"SEO Specialist\",\n      status: \"ACTIVE\",\n      baseSalary: 45000,\n      joinedDate: new Date(\"2023-06-01\"),\n      exitDate: null,\n      notes: \"Senior SEO specialist, handles all client SEO campaigns\",\n    });\n\n    const teamMember2 = await storage.createTeamMember({\n      name: \"Rahul Verma\",\n      email: \"rahul@agency.local\",\n      roleTitle: \"Media Buyer\",\n      status: \"ACTIVE\",\n      baseSalary: 50000,\n      joinedDate: new Date(\"2023-08-15\"),\n      exitDate: null,\n      notes: \"Manages all Meta and Google Ads campaigns\",\n    });\n\n    const teamMember3 = await storage.createTeamMember({\n      name: \"Kavita Menon\",\n      email: \"kavita@agency.local\",\n      roleTitle: \"Content Writer\",\n      status: \"ACTIVE\",\n      baseSalary: 35000,\n      joinedDate: new Date(\"2024-01-10\"),\n      exitDate: null,\n      notes: \"Content creation for SEO and social media\",\n    });\n\n    console.log(\"Created 3 team members\");\n\n    // ==== PHASE 2: Expenses ====\n    await storage.createExpense({\n      vendorId: vendorMeta.id,\n      categoryId: catAdvertising.id,\n      description: \"Meta Ads spend for Fashion Hub India campaign - January 2024\",\n      amount: 75000,\n      currency: \"INR\",\n      expenseDate: new Date(\"2024-01-25\"),\n      dueDate: null,\n      paidDate: new Date(\"2024-01-26\"),\n      status: \"PAID\",\n      paymentMethod: \"CARD\",\n      reference: \"META-JAN-2024\",\n      notes: \"Facebook and Instagram ads for client Fashion Hub India\",\n    });\n\n    await storage.createExpense({\n      vendorId: vendorGoogle.id,\n      categoryId: catAdvertising.id,\n      description: \"Google Ads spend for TechStart Solutions - January 2024\",\n      amount: 50000,\n      currency: \"INR\",\n      expenseDate: new Date(\"2024-01-28\"),\n      dueDate: null,\n      paidDate: new Date(\"2024-01-30\"),\n      status: \"PAID\",\n      paymentMethod: \"CARD\",\n      reference: \"GADS-JAN-2024\",\n      notes: \"Search and Display ads for client TechStart\",\n    });\n\n    await storage.createExpense({\n      vendorId: vendorFreelancer.id,\n      categoryId: catAdvertising.id,\n      description: \"Social media graphics design - 10 posts\",\n      amount: 15000,\n      currency: \"INR\",\n      expenseDate: new Date(\"2024-02-05\"),\n      dueDate: new Date(\"2024-02-15\"),\n      paidDate: new Date(\"2024-02-10\"),\n      status: \"PAID\",\n      paymentMethod: \"UPI\",\n      reference: \"UPI-ARJUN-001\",\n      notes: \"Instagram and Facebook post designs for February campaigns\",\n    });\n\n    await storage.createExpense({\n      vendorId: null,\n      categoryId: catOffice.id,\n      description: \"Office supplies and stationery\",\n      amount: 8000,\n      currency: \"INR\",\n      expenseDate: new Date(\"2024-02-01\"),\n      dueDate: null,\n      paidDate: new Date(\"2024-02-02\"),\n      status: \"PAID\",\n      paymentMethod: \"CASH\",\n      reference: \"\",\n      notes: \"Monthly office supplies purchase\",\n    });\n\n    await storage.createExpense({\n      vendorId: vendorMeta.id,\n      categoryId: catAdvertising.id,\n      description: \"Meta Ads spend for Fashion Hub India campaign - February 2024\",\n      amount: 80000,\n      currency: \"INR\",\n      expenseDate: new Date(\"2024-02-25\"),\n      dueDate: new Date(\"2024-03-05\"),\n      paidDate: null,\n      status: \"DUE\",\n      paymentMethod: null,\n      reference: \"\",\n      notes: \"Pending payment for February ads\",\n    });\n\n    console.log(\"Created 5 sample expenses\");\n\n    // ==== PHASE 2: Salary Payments ====\n    await storage.createSalaryPayment({\n      teamMemberId: teamMember1.id,\n      month: \"2024-01\",\n      paymentDate: new Date(\"2024-02-01\"),\n      amount: 45000,\n      currency: \"INR\",\n      status: \"PAID\",\n      paymentMethod: \"BANK_TRANSFER\",\n      reference: \"SAL-JAN-2024-SNEHA\",\n      notes: \"January 2024 salary\",\n    });\n\n    await storage.createSalaryPayment({\n      teamMemberId: teamMember2.id,\n      month: \"2024-01\",\n      paymentDate: new Date(\"2024-02-01\"),\n      amount: 50000,\n      currency: \"INR\",\n      status: \"PAID\",\n      paymentMethod: \"BANK_TRANSFER\",\n      reference: \"SAL-JAN-2024-RAHUL\",\n      notes: \"January 2024 salary\",\n    });\n\n    await storage.createSalaryPayment({\n      teamMemberId: teamMember3.id,\n      month: \"2024-01\",\n      paymentDate: new Date(\"2024-02-01\"),\n      amount: 35000,\n      currency: \"INR\",\n      status: \"PAID\",\n      paymentMethod: \"BANK_TRANSFER\",\n      reference: \"SAL-JAN-2024-KAVITA\",\n      notes: \"January 2024 salary\",\n    });\n\n    await storage.createSalaryPayment({\n      teamMemberId: teamMember1.id,\n      month: \"2024-02\",\n      paymentDate: new Date(\"2024-03-01\"),\n      amount: 45000,\n      currency: \"INR\",\n      status: \"PAID\",\n      paymentMethod: \"BANK_TRANSFER\",\n      reference: \"SAL-FEB-2024-SNEHA\",\n      notes: \"February 2024 salary\",\n    });\n\n    await storage.createSalaryPayment({\n      teamMemberId: teamMember2.id,\n      month: \"2024-02\",\n      paymentDate: new Date(\"2024-03-01\"),\n      amount: 50000,\n      currency: \"INR\",\n      status: \"PAID\",\n      paymentMethod: \"BANK_TRANSFER\",\n      reference: \"SAL-FEB-2024-RAHUL\",\n      notes: \"February 2024 salary\",\n    });\n\n    await storage.createSalaryPayment({\n      teamMemberId: teamMember3.id,\n      month: \"2024-02\",\n      paymentDate: null,\n      amount: 35000,\n      currency: \"INR\",\n      status: \"PENDING\",\n      paymentMethod: null,\n      reference: \"\",\n      notes: \"February 2024 salary - pending\",\n    });\n\n    console.log(\"Created 6 salary payment records\");\n\n    console.log(\"\\n✅ Database seeded successfully with Phase 1 & Phase 2 data!\");\n    console.log(\"\\nLogin credentials:\");\n    console.log(\"Email: admin@agency.local\");\n    console.log(\"Password: admin123\");\n  } catch (error) {\n    console.error(\"Error seeding database:\", error);\n    throw error;\n  }\n}\n","size_bytes":19379},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/lib/auth.tsx":{"content":"import { createContext, useContext, useState, useEffect, type ReactNode } from \"react\";\nimport { useLocation } from \"wouter\";\n\ninterface AuthContextType {\n  user: { id: string; name: string; email: string; role: string; token: string } | null;\n  login: (email: string, password: string) => Promise<void>;\n  logout: () => void;\n  isAuthenticated: boolean;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<AuthContextType[\"user\"]>(null);\n  const [, setLocation] = useLocation();\n\n  useEffect(() => {\n    const storedUser = localStorage.getItem(\"user\");\n    if (storedUser) {\n      setUser(JSON.parse(storedUser));\n    }\n  }, []);\n\n  const login = async (email: string, password: string) => {\n    const response = await fetch(\"/api/auth/login\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ email, password }),\n    });\n\n    if (!response.ok) {\n      const error = await response.text();\n      throw new Error(error || \"Login failed\");\n    }\n\n    const userData = await response.json();\n    setUser(userData);\n    localStorage.setItem(\"user\", JSON.stringify(userData));\n  };\n\n  const logout = () => {\n    setUser(null);\n    localStorage.removeItem(\"user\");\n    setLocation(\"/login\");\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, login, logout, isAuthenticated: !!user }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error(\"useAuth must be used within AuthProvider\");\n  }\n  return context;\n}\n\n","size_bytes":1710},"client/src/pages/dashboard.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { DollarSign, TrendingUp, AlertCircle, Users, TrendingDown, Wallet } from \"lucide-react\";\nimport { StatusBadge } from \"@/components/status-badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport type { DashboardSummary, InvoiceWithRelations, FinancialSummary } from \"@shared/schema\";\nimport { formatDate, formatCurrency } from \"@/lib/utils\";\n\nexport default function DashboardPage() {\n  const { data: summary, isLoading: summaryLoading } = useQuery<DashboardSummary>({\n    queryKey: [\"/api/dashboard/summary\"],\n  });\n\n  const { data: upcomingInvoices, isLoading: invoicesLoading } = useQuery<InvoiceWithRelations[]>({\n    queryKey: [\"/api/invoices/upcoming\"],\n  });\n\n  const { data: financialSummary, isLoading: financialLoading } = useQuery<FinancialSummary>({\n    queryKey: [\"/api/dashboard/financial\"],\n  });\n\n\n  const MetricCard = ({\n    title,\n    value,\n    icon: Icon,\n    loading,\n  }: {\n    title: string;\n    value: string;\n    icon: any;\n    loading: boolean;\n  }) => (\n    <Card>\n      <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2 gap-2\">\n        <CardTitle className=\"text-sm font-medium text-muted-foreground\">{title}</CardTitle>\n        <Icon className=\"h-4 w-4 text-muted-foreground\" />\n      </CardHeader>\n      <CardContent>\n        {loading ? (\n          <Skeleton className=\"h-8 w-32\" />\n        ) : (\n          <div className=\"text-2xl font-semibold font-mono\" data-testid={`metric-${title.toLowerCase().replace(/\\s+/g, \"-\")}`}>{value}</div>\n        )}\n      </CardContent>\n    </Card>\n  );\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div>\n        <h1 className=\"text-2xl font-semibold text-foreground\">Dashboard</h1>\n        <p className=\"text-sm text-muted-foreground mt-1\">\n          Overview of your agency's financial performance\n        </p>\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <MetricCard\n          title=\"Total Invoiced\"\n          value={formatCurrency(summary?.totalInvoiced || 0)}\n          icon={DollarSign}\n          loading={summaryLoading}\n        />\n        <MetricCard\n          title=\"Total Paid\"\n          value={formatCurrency(summary?.totalPaid || 0)}\n          icon={TrendingUp}\n          loading={summaryLoading}\n        />\n        <MetricCard\n          title=\"Outstanding\"\n          value={formatCurrency(summary?.totalOutstanding || 0)}\n          icon={AlertCircle}\n          loading={summaryLoading}\n        />\n        <MetricCard\n          title=\"Active Clients\"\n          value={summary?.countActiveClients?.toString() || \"0\"}\n          icon={Users}\n          loading={summaryLoading}\n        />\n      </div>\n\n      {/* This Month Stats */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-sm font-medium\">This Month Invoiced</CardTitle>\n          </CardHeader>\n          <CardContent>\n            {summaryLoading ? (\n              <Skeleton className=\"h-7 w-28\" />\n            ) : (\n              <div className=\"text-xl font-semibold font-mono\" data-testid=\"metric-this-month-invoiced\">\n                {formatCurrency(summary?.thisMonthInvoiced || 0)}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-sm font-medium\">This Month Collected</CardTitle>\n          </CardHeader>\n          <CardContent>\n            {summaryLoading ? (\n              <Skeleton className=\"h-7 w-28\" />\n            ) : (\n              <div className=\"text-xl font-semibold font-mono\" data-testid=\"metric-this-month-collected\">\n                {formatCurrency(summary?.thisMonthCollected || 0)}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-sm font-medium\">Overdue Invoices</CardTitle>\n          </CardHeader>\n          <CardContent>\n            {summaryLoading ? (\n              <Skeleton className=\"h-7 w-16\" />\n            ) : (\n              <div className=\"text-xl font-semibold\" data-testid=\"metric-overdue-count\">\n                {summary?.countOverdueInvoices || 0}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Financial Overview */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-lg font-medium\">Financial Overview (All Time)</CardTitle>\n        </CardHeader>\n        <CardContent>\n          {financialLoading ? (\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n              {[1, 2, 3, 4].map((i) => (\n                <Skeleton key={i} className=\"h-24 w-full\" />\n              ))}\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n              <div className=\"border rounded-lg p-4\">\n                <div className=\"flex items-center gap-2 text-muted-foreground text-sm mb-2\">\n                  <TrendingUp className=\"h-4 w-4\" />\n                  <span>Total Income</span>\n                </div>\n                <div className=\"text-2xl font-semibold font-mono text-green-600\" data-testid=\"metric-total-income\">\n                  {formatCurrency(financialSummary?.totalIncome || 0)}\n                </div>\n                <p className=\"text-xs text-muted-foreground mt-1\">From invoices</p>\n              </div>\n              <div className=\"border rounded-lg p-4\">\n                <div className=\"flex items-center gap-2 text-muted-foreground text-sm mb-2\">\n                  <TrendingDown className=\"h-4 w-4\" />\n                  <span>Total Expenses</span>\n                </div>\n                <div className=\"text-2xl font-semibold font-mono text-red-600\" data-testid=\"metric-total-expenses\">\n                  {formatCurrency(financialSummary?.totalExpenses || 0)}\n                </div>\n                <p className=\"text-xs text-muted-foreground mt-1\">All business costs</p>\n              </div>\n              <div className=\"border rounded-lg p-4\">\n                <div className=\"flex items-center gap-2 text-muted-foreground text-sm mb-2\">\n                  <Wallet className=\"h-4 w-4\" />\n                  <span>Net Profit/Loss</span>\n                </div>\n                <div\n                  className={`text-2xl font-semibold font-mono ${\n                    (financialSummary?.netProfit || 0) >= 0 ? \"text-green-600\" : \"text-red-600\"\n                  }`}\n                  data-testid=\"metric-net-profit\"\n                >\n                  {formatCurrency(financialSummary?.netProfit || 0)}\n                </div>\n                <p className=\"text-xs text-muted-foreground mt-1\">Income - Expenses</p>\n              </div>\n              <div className=\"border rounded-lg p-4\">\n                <div className=\"flex items-center gap-2 text-muted-foreground text-sm mb-2\">\n                  <DollarSign className=\"h-4 w-4\" />\n                  <span>Profit Margin</span>\n                </div>\n                <div className=\"text-2xl font-semibold\" data-testid=\"metric-profit-margin\">\n                  {financialSummary?.totalIncome && financialSummary.totalIncome > 0\n                    ? `${((financialSummary.netProfit / financialSummary.totalIncome) * 100).toFixed(1)}%`\n                    : \"0%\"}\n                </div>\n                <p className=\"text-xs text-muted-foreground mt-1\">Net margin</p>\n              </div>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Upcoming Invoices */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-lg font-medium\">Upcoming Invoice Due Dates</CardTitle>\n        </CardHeader>\n        <CardContent>\n          {invoicesLoading ? (\n            <div className=\"space-y-3\">\n              {[1, 2, 3].map((i) => (\n                <Skeleton key={i} className=\"h-12 w-full\" />\n              ))}\n            </div>\n          ) : !upcomingInvoices || upcomingInvoices.length === 0 ? (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              <AlertCircle className=\"h-12 w-12 mx-auto mb-3 opacity-50\" />\n              <p>No upcoming invoices</p>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Invoice #</TableHead>\n                    <TableHead>Client</TableHead>\n                    <TableHead>Project</TableHead>\n                    <TableHead className=\"text-right\">Amount</TableHead>\n                    <TableHead className=\"text-right\">Balance Due</TableHead>\n                    <TableHead>Due Date</TableHead>\n                    <TableHead>Status</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {upcomingInvoices.map((invoice) => (\n                    <TableRow key={invoice.id} data-testid={`row-invoice-${invoice.id}`}>\n                      <TableCell className=\"font-mono text-sm\" data-testid={`text-invoice-number-${invoice.id}`}>\n                        {invoice.invoiceNumber}\n                      </TableCell>\n                      <TableCell data-testid={`text-client-${invoice.id}`}>{invoice.clientName}</TableCell>\n                      <TableCell data-testid={`text-project-${invoice.id}`}>{invoice.projectName || \"—\"}</TableCell>\n                      <TableCell className=\"text-right font-mono\" data-testid={`text-amount-${invoice.id}`}>\n                        {formatCurrency(invoice.totalAmount)}\n                      </TableCell>\n                      <TableCell className=\"text-right font-mono\" data-testid={`text-balance-${invoice.id}`}>\n                        {formatCurrency(invoice.balanceDue)}\n                      </TableCell>\n                      <TableCell data-testid={`text-due-date-${invoice.id}`}>\n                        {formatDate(invoice.dueDate)}\n                      </TableCell>\n                      <TableCell>\n                        <StatusBadge status={invoice.status} type=\"invoice\" />\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":10628},"client/src/lib/queryClient.ts":{"content":"import { QueryClient } from \"@tanstack/react-query\";\n\nfunction getAuthToken(): string | null {\n  const storedUser = localStorage.getItem(\"user\");\n  if (storedUser) {\n    const user = JSON.parse(storedUser);\n    return user.token;\n  }\n  return null;\n}\n\nasync function handleRequest(url: string, options: RequestInit = {}) {\n  const token = getAuthToken();\n  const headers: Record<string, string> = {\n    \"Content-Type\": \"application/json\",\n    ...(token ? { Authorization: `Bearer ${token}` } : {}),\n    ...(options.headers as Record<string, string>),\n  };\n\n  const response = await fetch(url, {\n    ...options,\n    headers,\n  });\n\n  if (!response.ok) {\n    if (response.status === 401 || response.status === 403) {\n      localStorage.removeItem(\"user\");\n      window.location.href = \"/login\";\n      throw new Error(\"Authentication failed\");\n    }\n\n    const error = await response.text();\n    throw new Error(error || `Request failed: ${response.status}`);\n  }\n\n  const contentType = response.headers.get(\"content-type\");\n  if (contentType && contentType.includes(\"application/json\")) {\n    return response.json();\n  }\n\n  return response.text();\n}\n\nexport async function apiRequest(method: string, url: string, data?: any) {\n  const options: RequestInit = {\n    method,\n  };\n\n  if (data && (method === \"POST\" || method === \"PUT\" || method === \"PATCH\")) {\n    options.body = JSON.stringify(data);\n  }\n\n  return handleRequest(url, options);\n}\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: async ({ queryKey }) => {\n        const url = queryKey[0] as string;\n        const params = queryKey[1] as Record<string, any> | undefined;\n\n        let fullUrl = url;\n        if (params) {\n          const searchParams = new URLSearchParams();\n          Object.entries(params).forEach(([key, value]) => {\n            if (value !== undefined && value !== null && value !== \"\") {\n              searchParams.append(key, String(value));\n            }\n          });\n          const queryString = searchParams.toString();\n          if (queryString) {\n            fullUrl = `${url}?${queryString}`;\n          }\n        }\n\n        return handleRequest(fullUrl);\n      },\n      refetchOnWindowFocus: false,\n      retry: false,\n      staleTime: 1000 * 60,\n    },\n  },\n});\n","size_bytes":2299},"client/src/components/expense-dialog.tsx":{"content":"import { useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { insertExpenseSchema, type InsertExpense, type Expense, type Vendor, type ExpenseCategory } from \"@shared/schema\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\n\ninterface ExpenseDialogProps {\n  expense?: Expense | null;\n  open: boolean;\n  onClose: () => void;\n}\n\nexport function ExpenseDialog({ expense, open, onClose }: ExpenseDialogProps) {\n  const { toast } = useToast();\n\n  const { data: vendors = [] } = useQuery<Vendor[]>({\n    queryKey: [\"/api/vendors\"],\n  });\n\n  const { data: categories = [] } = useQuery<ExpenseCategory[]>({\n    queryKey: [\"/api/expense-categories\"],\n  });\n\n  const form = useForm<InsertExpense>({\n    resolver: zodResolver(insertExpenseSchema),\n    defaultValues: {\n      vendorId: null,\n      categoryId: null,\n      description: \"\",\n      amount: 0,\n      currency: \"INR\",\n      expenseDate: new Date().toISOString().split(\"T\")[0],\n      dueDate: null,\n      paidDate: null,\n      status: \"DUE\",\n      paymentMethod: null,\n      reference: \"\",\n      notes: \"\",\n    },\n  });\n\n  useEffect(() => {\n    if (expense) {\n      form.reset({\n        vendorId: expense.vendorId,\n        categoryId: expense.categoryId,\n        description: expense.description,\n        amount: Number(expense.amount),\n        currency: expense.currency,\n        expenseDate: expense.expenseDate ? new Date(expense.expenseDate).toISOString().split(\"T\")[0] : \"\",\n        dueDate: expense.dueDate ? new Date(expense.dueDate).toISOString().split(\"T\")[0] : null,\n        paidDate: expense.paidDate ? new Date(expense.paidDate).toISOString().split(\"T\")[0] : null,\n        status: expense.status,\n        paymentMethod: expense.paymentMethod,\n        reference: expense.reference || \"\",\n        notes: expense.notes || \"\",\n      });\n    } else {\n      form.reset({\n        vendorId: null,\n        categoryId: null,\n        description: \"\",\n        amount: 0,\n        currency: \"INR\",\n        expenseDate: new Date().toISOString().split(\"T\")[0],\n        dueDate: null,\n        paidDate: null,\n        status: \"DUE\",\n        paymentMethod: null,\n        reference: \"\",\n        notes: \"\",\n      });\n    }\n  }, [expense, form]);\n\n  const createMutation = useMutation({\n    mutationFn: async (data: InsertExpense) => {\n      return apiRequest(\"/api/expenses\", \"POST\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/expenses\"] });\n      toast({ title: \"Expense created successfully\" });\n      onClose();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async (data: InsertExpense) => {\n      return apiRequest(`/api/expenses/${expense?.id}`, \"PUT\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/expenses\"] });\n      toast({ title: \"Expense updated successfully\" });\n      onClose();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const onSubmit = (data: InsertExpense) => {\n    if (expense) {\n      updateMutation.mutate(data);\n    } else {\n      createMutation.mutate(data);\n    }\n  };\n\n  const isPending = createMutation.isPending || updateMutation.isPending;\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle data-testid=\"dialog-title\">\n            {expense ? \"Edit Expense\" : \"Add New Expense\"}\n          </DialogTitle>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"description\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Description</FormLabel>\n                  <FormControl>\n                    <Input {...field} data-testid=\"input-description\" />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"vendorId\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Vendor (Optional)</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value || \"\"}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-vendor\">\n                          <SelectValue placeholder=\"Select vendor\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"none\">No Vendor</SelectItem>\n                        {vendors.map((vendor) => (\n                          <SelectItem key={vendor.id} value={vendor.id}>\n                            {vendor.name}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"categoryId\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Category (Optional)</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value || \"\"}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-category\">\n                          <SelectValue placeholder=\"Select category\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"none\">No Category</SelectItem>\n                        {categories.map((category) => (\n                          <SelectItem key={category.id} value={category.id}>\n                            {category.name}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"amount\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Amount</FormLabel>\n                    <FormControl>\n                      <Input\n                        {...field}\n                        type=\"number\"\n                        step=\"0.01\"\n                        onChange={(e) => field.onChange(parseFloat(e.target.value))}\n                        data-testid=\"input-amount\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"currency\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Currency</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-currency\">\n                          <SelectValue placeholder=\"Select currency\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"INR\">INR</SelectItem>\n                        <SelectItem value=\"USD\">USD</SelectItem>\n                        <SelectItem value=\"EUR\">EUR</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"expenseDate\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Expense Date</FormLabel>\n                    <FormControl>\n                      <Input {...field} type=\"date\" data-testid=\"input-expense-date\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"dueDate\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Due Date (Optional)</FormLabel>\n                    <FormControl>\n                      <Input\n                        {...field}\n                        value={field.value || \"\"}\n                        type=\"date\"\n                        data-testid=\"input-due-date\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"status\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Status</FormLabel>\n                  <Select onValueChange={field.onChange} value={field.value}>\n                    <FormControl>\n                      <SelectTrigger data-testid=\"select-status\">\n                        <SelectValue placeholder=\"Select status\" />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      <SelectItem value=\"DUE\">Due</SelectItem>\n                      <SelectItem value=\"PAID\">Paid</SelectItem>\n                      <SelectItem value=\"OVERDUE\">Overdue</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"notes\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Notes</FormLabel>\n                  <FormControl>\n                    <Textarea {...field} rows={3} data-testid=\"input-notes\" />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <DialogFooter>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={onClose}\n                disabled={isPending}\n                data-testid=\"button-cancel\"\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\" disabled={isPending} data-testid=\"button-submit\">\n                {isPending ? \"Saving...\" : expense ? \"Update Expense\" : \"Create Expense\"}\n              </Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":12017},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/pages/login.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useAuth } from \"@/lib/auth\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Archive } from \"lucide-react\";\n\nexport default function LoginPage() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const { login } = useAuth();\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      await login(email, password);\n      setLocation(\"/\");\n      toast({\n        title: \"Welcome back!\",\n        description: \"Successfully logged in to Agency Control Center\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Login failed\",\n        description: error instanceof Error ? error.message : \"Invalid credentials\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-background p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"space-y-4 text-center\">\n          <div className=\"flex justify-center\">\n            <div className=\"h-12 w-12 rounded-lg bg-primary flex items-center justify-center\">\n              <Archive className=\"h-7 w-7 text-primary-foreground\" />\n            </div>\n          </div>\n          <div>\n            <CardTitle className=\"text-2xl font-semibold\">Agency Control Center</CardTitle>\n            <CardDescription className=\"mt-2\">\n              Sign in to access your dashboard\n            </CardDescription>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email\">Email</Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                placeholder=\"admin@agency.local\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                required\n                data-testid=\"input-email\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">Password</Label>\n              <Input\n                id=\"password\"\n                type=\"password\"\n                placeholder=\"Enter your password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                required\n                data-testid=\"input-password\"\n              />\n            </div>\n            <Button\n              type=\"submit\"\n              className=\"w-full\"\n              disabled={isLoading}\n              data-testid=\"button-login\"\n            >\n              {isLoading ? \"Signing in...\" : \"Sign In\"}\n            </Button>\n          </form>\n          <div className=\"mt-6 text-center\">\n            <p className=\"text-xs text-muted-foreground\">\n              Default: admin@agency.local / admin123\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":3426},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/team-member-dialog.tsx":{"content":"import { useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { insertTeamMemberSchema, type InsertTeamMember, type TeamMember } from \"@shared/schema\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\n\ninterface TeamMemberDialogProps {\n  member?: TeamMember | null;\n  open: boolean;\n  onClose: () => void;\n}\n\nexport function TeamMemberDialog({ member, open, onClose }: TeamMemberDialogProps) {\n  const { toast } = useToast();\n\n  const form = useForm<InsertTeamMember>({\n    resolver: zodResolver(insertTeamMemberSchema),\n    defaultValues: {\n      name: \"\",\n      email: \"\",\n      roleTitle: \"\",\n      status: \"ACTIVE\",\n      baseSalary: 0,\n      joinedDate: new Date().toISOString().split(\"T\")[0],\n      exitDate: null,\n      notes: \"\",\n    },\n  });\n\n  useEffect(() => {\n    if (member) {\n      form.reset({\n        name: member.name,\n        email: member.email,\n        roleTitle: member.roleTitle,\n        status: member.status,\n        baseSalary: Number(member.baseSalary),\n        joinedDate: member.joinedDate ? new Date(member.joinedDate).toISOString().split(\"T\")[0] : \"\",\n        exitDate: member.exitDate ? new Date(member.exitDate).toISOString().split(\"T\")[0] : null,\n        notes: member.notes || \"\",\n      });\n    } else {\n      form.reset({\n        name: \"\",\n        email: \"\",\n        roleTitle: \"\",\n        status: \"ACTIVE\",\n        baseSalary: 0,\n        joinedDate: new Date().toISOString().split(\"T\")[0],\n        exitDate: null,\n        notes: \"\",\n      });\n    }\n  }, [member, form]);\n\n  const createMutation = useMutation({\n    mutationFn: async (data: InsertTeamMember) => {\n      return apiRequest(\"/api/team-members\", \"POST\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/team-members\"] });\n      toast({ title: \"Team member created successfully\" });\n      onClose();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async (data: InsertTeamMember) => {\n      return apiRequest(`/api/team-members/${member?.id}`, \"PUT\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/team-members\"] });\n      toast({ title: \"Team member updated successfully\" });\n      onClose();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const onSubmit = (data: InsertTeamMember) => {\n    if (member) {\n      updateMutation.mutate(data);\n    } else {\n      createMutation.mutate(data);\n    }\n  };\n\n  const isPending = createMutation.isPending || updateMutation.isPending;\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle data-testid=\"dialog-title\">\n            {member ? \"Edit Team Member\" : \"Add Team Member\"}\n          </DialogTitle>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"name\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Full Name</FormLabel>\n                    <FormControl>\n                      <Input {...field} data-testid=\"input-name\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"email\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Email</FormLabel>\n                    <FormControl>\n                      <Input {...field} type=\"email\" data-testid=\"input-email\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"roleTitle\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Role/Title</FormLabel>\n                    <FormControl>\n                      <Input {...field} data-testid=\"input-role\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"baseSalary\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Base Salary (Monthly)</FormLabel>\n                    <FormControl>\n                      <Input\n                        {...field}\n                        type=\"number\"\n                        step=\"0.01\"\n                        onChange={(e) => field.onChange(parseFloat(e.target.value))}\n                        data-testid=\"input-salary\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"joinedDate\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Joined Date</FormLabel>\n                    <FormControl>\n                      <Input {...field} type=\"date\" data-testid=\"input-joined-date\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"exitDate\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Exit Date (Optional)</FormLabel>\n                    <FormControl>\n                      <Input\n                        {...field}\n                        value={field.value || \"\"}\n                        type=\"date\"\n                        data-testid=\"input-exit-date\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"status\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Status</FormLabel>\n                  <Select onValueChange={field.onChange} value={field.value}>\n                    <FormControl>\n                      <SelectTrigger data-testid=\"select-status\">\n                        <SelectValue placeholder=\"Select status\" />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      <SelectItem value=\"ACTIVE\">Active</SelectItem>\n                      <SelectItem value=\"INACTIVE\">Inactive</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"notes\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Notes</FormLabel>\n                  <FormControl>\n                    <Textarea {...field} rows={3} data-testid=\"input-notes\" />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <DialogFooter>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={onClose}\n                disabled={isPending}\n                data-testid=\"button-cancel\"\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\" disabled={isPending} data-testid=\"button-submit\">\n                {isPending ? \"Saving...\" : member ? \"Update Member\" : \"Add Member\"}\n              </Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":9111},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"README.md":{"content":"# Agency Control Center\n\nA production-ready internal web application for digital marketing agencies to manage clients, projects, invoices, and payments.\n\n## Features\n\n### Phase 1 (Current Implementation)\n\n- **User Authentication**: Simple email/password login with JWT tokens\n- **Dashboard**: Financial overview with metrics and upcoming invoice tracking\n- **Client Management**: Full CRUD operations for client data with status tracking\n- **Project Management**: Create and track projects linked to clients\n- **Invoice System**: Complete invoicing with line items, tax calculations, and automatic invoice numbering\n- **Payment Tracking**: Record payments and automatically update invoice status\n- **Status Workflows**: Automatic status management (DRAFT → SENT → PAID/OVERDUE)\n\n### Future Phases\n\n- Vendors & Expenses Management\n- Salary Payments\n- Client Portal Integration\n- Team & Learning Hub\n- Client Offboarding/Archiving\n\n## Tech Stack\n\n- **Frontend**: React + TypeScript + Vite\n- **Backend**: Node.js + Express\n- **Styling**: Tailwind CSS + shadcn/ui components\n- **State**: TanStack Query (React Query)\n- **Auth**: JWT with bcrypt password hashing\n- **Storage**: In-memory storage (easily replaceable with database)\n\n## Getting Started\n\n### Prerequisites\n\n- Node.js 20+ installed\n\n### Installation\n\nThe project is pre-configured and ready to run on Replit. Simply click the \"Run\" button or execute:\n\n```bash\nnpm run dev\n```\n\nThe application will start on `http://localhost:5000`\n\n### Default Login Credentials\n\n```\nEmail: admin@agency.local\nPassword: admin123\n```\n\n## Database Seeding\n\nThe application automatically seeds the database with sample data on startup, including:\n\n- 1 admin user\n- 5 sample clients (various statuses)\n- 4 sample projects\n- 6 sample invoices (demonstrating all statuses: DRAFT, SENT, PAID, OVERDUE, PARTIALLY_PAID)\n- Sample payments\n\n## Project Structure\n\n```\n├── client/                 # Frontend React application\n│   ├── src/\n│   │   ├── components/     # Reusable UI components\n│   │   ├── lib/           # Utilities and configurations\n│   │   ├── pages/         # Page components\n│   │   └── App.tsx        # Main app component\n├── server/                 # Backend Express server\n│   ├── index.ts           # Server entry point\n│   ├── routes.ts          # API route definitions\n│   ├── storage.ts         # Data storage interface\n│   └── seed.ts            # Database seeding logic\n├── shared/                # Shared types and schemas\n│   └── schema.ts          # Zod schemas and TypeScript types\n└── design_guidelines.md   # UI/UX design guidelines\n```\n\n## API Routes\n\n### Authentication\n- `POST /api/auth/login` - User login\n\n### Clients\n- `GET /api/clients` - List all clients (with filtering)\n- `GET /api/clients/:id` - Get client details\n- `POST /api/clients` - Create new client\n- `PUT /api/clients/:id` - Update client\n- `PUT /api/clients/:id/status` - Update client status\n\n### Projects\n- `GET /api/projects` - List all projects (filterable by client)\n- `GET /api/projects/:id` - Get project details\n- `POST /api/projects` - Create new project\n- `PUT /api/projects/:id` - Update project\n\n### Invoices\n- `GET /api/invoices` - List all invoices (with filtering)\n- `GET /api/invoices/upcoming` - Get upcoming invoices\n- `GET /api/invoices/:id` - Get invoice details\n- `POST /api/invoices` - Create new invoice\n- `PUT /api/invoices/:id` - Update invoice\n- `POST /api/invoices/:id/status` - Update invoice status\n\n### Payments\n- `GET /api/invoices/:id/payments` - Get payments for invoice\n- `POST /api/invoices/:id/payments` - Record new payment\n\n### Dashboard\n- `GET /api/dashboard/summary` - Get dashboard metrics\n\n## Invoice Status Logic\n\nThe system automatically manages invoice statuses based on payments and due dates:\n\n- **DRAFT**: Invoice created but not yet sent\n- **SENT**: Invoice sent to client, awaiting payment\n- **PARTIALLY_PAID**: Some payment received but balance remaining\n- **PAID**: Fully paid (balanceDue = 0)\n- **OVERDUE**: Past due date with outstanding balance\n\n## Development\n\n### Running the Application\n\n```bash\nnpm run dev\n```\n\nThis starts both the frontend (Vite) and backend (Express) on port 5000.\n\n### Environment Variables\n\n- `SESSION_SECRET`: Secret key for JWT signing (auto-generated in development)\n- `PORT`: Server port (default: 5000)\n\n## Design Principles\n\nThe application follows a clean, spreadsheet-like design aesthetic inspired by tools like Google Sheets and Linear. Key principles:\n\n- **Data Density**: Efficient use of space with clear information hierarchy\n- **Consistent Spacing**: Unified spacing scale (4, 6, 8 units)\n- **Status Visualization**: Color-coded badges for quick status recognition\n- **Responsive Tables**: Sticky headers, sortable columns, and clear data presentation\n- **Minimal Animations**: Functional animations only (modals, dropdowns, toasts)\n\n## License\n\nProprietary - Internal Use Only\n","size_bytes":5024},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/pages/clients.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Link } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { StatusBadge } from \"@/components/status-badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Plus, Search } from \"lucide-react\";\nimport { ClientDialog } from \"@/components/client-dialog\";\nimport type { ClientWithStats } from \"@shared/schema\";\n\nimport { formatCurrency } from \"@/lib/utils\";\n\nexport default function ClientsPage() {\n  const [search, setSearch] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n\n  const { data: clients, isLoading } = useQuery<ClientWithStats[]>({\n    queryKey: [\"/api/clients\", { status: statusFilter === \"all\" ? undefined : statusFilter, search }],\n  });\n\n  const filteredClients = clients || [];\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-semibold text-foreground\">Clients</h1>\n          <p className=\"text-sm text-muted-foreground mt-1\">\n            Manage your agency's client relationships\n          </p>\n        </div>\n        <Button onClick={() => setIsDialogOpen(true)} data-testid=\"button-new-client\">\n          <Plus className=\"h-4 w-4 mr-2\" />\n          New Client\n        </Button>\n      </div>\n\n      {/* Filters */}\n      <div className=\"flex flex-col sm:flex-row gap-4\">\n        <div className=\"relative flex-1\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n          <Input\n            placeholder=\"Search by name or email...\"\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n            className=\"pl-9\"\n            data-testid=\"input-search-clients\"\n          />\n        </div>\n        <Select value={statusFilter} onValueChange={setStatusFilter}>\n          <SelectTrigger className=\"w-full sm:w-48\" data-testid=\"select-status-filter\">\n            <SelectValue placeholder=\"Filter by status\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">All Status</SelectItem>\n            <SelectItem value=\"ACTIVE\">Active</SelectItem>\n            <SelectItem value=\"INACTIVE\">Inactive</SelectItem>\n            <SelectItem value=\"ARCHIVED\">Archived</SelectItem>\n          </SelectContent>\n        </Select>\n      </div>\n\n      {/* Table */}\n      <div className=\"border rounded-md\">\n        {isLoading ? (\n          <div className=\"p-4 space-y-3\">\n            {[1, 2, 3, 4, 5].map((i) => (\n              <Skeleton key={i} className=\"h-12 w-full\" />\n            ))}\n          </div>\n        ) : filteredClients.length === 0 ? (\n          <div className=\"text-center py-12 text-muted-foreground\">\n            <p>No clients found</p>\n            <Button\n              variant=\"link\"\n              onClick={() => setIsDialogOpen(true)}\n              className=\"mt-2\"\n              data-testid=\"button-add-first-client\"\n            >\n              Add your first client\n            </Button>\n          </div>\n        ) : (\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Client Name</TableHead>\n                <TableHead>Contact Person</TableHead>\n                <TableHead>Email</TableHead>\n                <TableHead>Phone</TableHead>\n                <TableHead className=\"text-right\">Total Invoiced</TableHead>\n                <TableHead className=\"text-right\">Outstanding</TableHead>\n                <TableHead>Status</TableHead>\n                <TableHead className=\"text-right\">Actions</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {filteredClients.map((client) => (\n                <TableRow key={client.id} data-testid={`row-client-${client.id}`}>\n                  <TableCell className=\"font-medium\" data-testid={`text-name-${client.id}`}>\n                    {client.name}\n                  </TableCell>\n                  <TableCell data-testid={`text-contact-${client.id}`}>{client.contactName}</TableCell>\n                  <TableCell data-testid={`text-email-${client.id}`}>{client.email}</TableCell>\n                  <TableCell data-testid={`text-phone-${client.id}`}>{client.phone}</TableCell>\n                  <TableCell className=\"text-right font-mono\" data-testid={`text-invoiced-${client.id}`}>\n                    {formatCurrency(client.totalInvoiced)}\n                  </TableCell>\n                  <TableCell className=\"text-right font-mono\" data-testid={`text-outstanding-${client.id}`}>\n                    {formatCurrency(client.outstandingAmount)}\n                  </TableCell>\n                  <TableCell>\n                    <StatusBadge status={client.status} type=\"client\" />\n                  </TableCell>\n                  <TableCell className=\"text-right\">\n                    <Link href={`/clients/${client.id}`}>\n                      <Button variant=\"ghost\" size=\"sm\" data-testid={`button-view-${client.id}`}>\n                        View\n                      </Button>\n                    </Link>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        )}\n      </div>\n\n      <ClientDialog open={isDialogOpen} onOpenChange={setIsDialogOpen} />\n    </div>\n  );\n}\n","size_bytes":5732},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/pages/vendors.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Plus, Search, Filter } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { VendorDialog } from \"@/components/vendor-dialog\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport type { Vendor } from \"@shared/schema\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\n\nexport default function VendorsPage() {\n  const [showDialog, setShowDialog] = useState(false);\n  const [editingVendor, setEditingVendor] = useState<Vendor | null>(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState(\"\");\n  const [categoryFilter, setCategoryFilter] = useState(\"\");\n\n  const { data: vendors = [], isLoading } = useQuery<Vendor[]>({\n    queryKey: [\"/api/vendors\", { status: statusFilter, search: searchQuery, category: categoryFilter }],\n  });\n\n  const updateStatusMutation = useMutation({\n    mutationFn: async ({ id, status }: { id: string; status: string }) => {\n      return apiRequest(`/api/vendors/${id}/status`, \"PUT\", { status });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/vendors\"] });\n    },\n  });\n\n  const handleEdit = (vendor: Vendor) => {\n    setEditingVendor(vendor);\n    setShowDialog(true);\n  };\n\n  const handleCloseDialog = () => {\n    setShowDialog(false);\n    setEditingVendor(null);\n  };\n\n  const getStatusBadgeVariant = (status: string) => {\n    switch (status) {\n      case \"ACTIVE\":\n        return \"default\";\n      case \"INACTIVE\":\n        return \"secondary\";\n      default:\n        return \"outline\";\n    }\n  };\n\n  const getCategoryLabel = (category: string) => {\n    const labels: Record<string, string> = {\n      SOFTWARE: \"Software\",\n      MEDIA_BUY: \"Media Buy\",\n      FREELANCER: \"Freelancer\",\n      AGENCY: \"Agency\",\n      SUPPLIER: \"Supplier\",\n      OTHER: \"Other\",\n    };\n    return labels[category] || category;\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-muted-foreground\">Loading vendors...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-semibold\" data-testid=\"page-title\">Vendors</h1>\n          <p className=\"text-sm text-muted-foreground mt-1\">\n            Manage your vendors and suppliers\n          </p>\n        </div>\n        <Button onClick={() => setShowDialog(true)} data-testid=\"button-add-vendor\">\n          <Plus className=\"h-4 w-4 mr-2\" />\n          Add Vendor\n        </Button>\n      </div>\n\n      <div className=\"flex gap-4 items-center\">\n        <div className=\"relative flex-1 max-w-sm\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n          <Input\n            placeholder=\"Search vendors...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"pl-9\"\n            data-testid=\"input-search\"\n          />\n        </div>\n\n        <Select value={statusFilter} onValueChange={setStatusFilter}>\n          <SelectTrigger className=\"w-[180px]\" data-testid=\"select-status-filter\">\n            <div className=\"flex items-center gap-2\">\n              <Filter className=\"h-4 w-4\" />\n              <SelectValue placeholder=\"All Status\" />\n            </div>\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">All Status</SelectItem>\n            <SelectItem value=\"ACTIVE\">Active</SelectItem>\n            <SelectItem value=\"INACTIVE\">Inactive</SelectItem>\n          </SelectContent>\n        </Select>\n\n        <Select value={categoryFilter} onValueChange={setCategoryFilter}>\n          <SelectTrigger className=\"w-[180px]\" data-testid=\"select-category-filter\">\n            <SelectValue placeholder=\"All Categories\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">All Categories</SelectItem>\n            <SelectItem value=\"SOFTWARE\">Software</SelectItem>\n            <SelectItem value=\"MEDIA_BUY\">Media Buy</SelectItem>\n            <SelectItem value=\"FREELANCER\">Freelancer</SelectItem>\n            <SelectItem value=\"AGENCY\">Agency</SelectItem>\n            <SelectItem value=\"SUPPLIER\">Supplier</SelectItem>\n            <SelectItem value=\"OTHER\">Other</SelectItem>\n          </SelectContent>\n        </Select>\n      </div>\n\n      <div className=\"border rounded-lg overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className=\"bg-muted/50 sticky top-0 z-10\">\n              <tr>\n                <th className=\"text-left px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                  Name\n                </th>\n                <th className=\"text-left px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                  Contact\n                </th>\n                <th className=\"text-left px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                  Category\n                </th>\n                <th className=\"text-left px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                  Status\n                </th>\n                <th className=\"text-right px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                  Actions\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {vendors.length === 0 ? (\n                <tr>\n                  <td colSpan={5} className=\"px-4 py-12 text-center text-muted-foreground\">\n                    No vendors found. Click \"Add Vendor\" to create one.\n                  </td>\n                </tr>\n              ) : (\n                vendors.map((vendor) => (\n                  <tr\n                    key={vendor.id}\n                    className=\"border-b hover-elevate active-elevate-2 cursor-pointer\"\n                    onClick={() => handleEdit(vendor)}\n                    data-testid={`vendor-row-${vendor.id}`}\n                  >\n                    <td className=\"px-4 py-3\">\n                      <div>\n                        <div className=\"font-medium text-sm\" data-testid={`vendor-name-${vendor.id}`}>\n                          {vendor.name}\n                        </div>\n                        {vendor.website && (\n                          <div className=\"text-xs text-muted-foreground\">{vendor.website}</div>\n                        )}\n                      </div>\n                    </td>\n                    <td className=\"px-4 py-3\">\n                      <div className=\"text-sm\">\n                        <div data-testid={`vendor-contact-${vendor.id}`}>{vendor.contactName}</div>\n                        <div className=\"text-xs text-muted-foreground\">{vendor.email}</div>\n                      </div>\n                    </td>\n                    <td className=\"px-4 py-3\">\n                      <span className=\"text-sm\" data-testid={`vendor-category-${vendor.id}`}>\n                        {getCategoryLabel(vendor.category)}\n                      </span>\n                    </td>\n                    <td className=\"px-4 py-3\">\n                      <Badge\n                        variant={getStatusBadgeVariant(vendor.status)}\n                        data-testid={`vendor-status-${vendor.id}`}\n                      >\n                        {vendor.status}\n                      </Badge>\n                    </td>\n                    <td className=\"px-4 py-3 text-right\">\n                      <div className=\"flex justify-end gap-2\" onClick={(e) => e.stopPropagation()}>\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          onClick={() => handleEdit(vendor)}\n                          data-testid={`button-edit-${vendor.id}`}\n                        >\n                          Edit\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          variant={vendor.status === \"ACTIVE\" ? \"secondary\" : \"default\"}\n                          onClick={() =>\n                            updateStatusMutation.mutate({\n                              id: vendor.id,\n                              status: vendor.status === \"ACTIVE\" ? \"INACTIVE\" : \"ACTIVE\",\n                            })\n                          }\n                          data-testid={`button-toggle-status-${vendor.id}`}\n                        >\n                          {vendor.status === \"ACTIVE\" ? \"Deactivate\" : \"Activate\"}\n                        </Button>\n                      </div>\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {showDialog && (\n        <VendorDialog\n          vendor={editingVendor}\n          open={showDialog}\n          onClose={handleCloseDialog}\n        />\n      )}\n    </div>\n  );\n}\n","size_bytes":9247},"client/src/components/app-sidebar.tsx":{"content":"import {\n  LayoutDashboard,\n  Users,\n  FileText,\n  Briefcase,\n  CreditCard,\n  DollarSign,\n  Settings,\n  BookOpen,\n  Globe,\n  Archive,\n} from \"lucide-react\";\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarHeader,\n  SidebarFooter,\n} from \"@/components/ui/sidebar\";\nimport { Link, useLocation } from \"wouter\";\nimport { useAuth } from \"@/lib/auth\";\nimport { Button } from \"@/components/ui/button\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\n\nconst activeItems = [\n  { title: \"Dashboard\", url: \"/\", icon: LayoutDashboard, testId: \"link-dashboard\" },\n  { title: \"Clients\", url: \"/clients\", icon: Users, testId: \"link-clients\" },\n  { title: \"Invoices\", url: \"/invoices\", icon: FileText, testId: \"link-invoices\" },\n  { title: \"Vendors\", url: \"/vendors\", icon: Briefcase, testId: \"link-vendors\" },\n  { title: \"Expenses\", url: \"/expenses\", icon: CreditCard, testId: \"link-expenses\" },\n  { title: \"Team & Salaries\", url: \"/team-salaries\", icon: DollarSign, testId: \"link-team-salaries\" },\n  { title: \"Settings\", url: \"/settings\", icon: Settings, testId: \"link-settings\" },\n];\n\nconst placeholderItems = [\n  { title: \"Learning Hub\", url: \"#\", icon: BookOpen, testId: \"link-learning-disabled\" },\n  { title: \"Client Portal\", url: \"#\", icon: Globe, testId: \"link-portal-disabled\" },\n];\n\nexport function AppSidebar() {\n  const [location] = useLocation();\n  const { user, logout } = useAuth();\n\n  const getInitials = (name: string) => {\n    return name\n      .split(\" \")\n      .map((n) => n[0])\n      .join(\"\")\n      .toUpperCase()\n      .slice(0, 2);\n  };\n\n  return (\n    <Sidebar>\n      <SidebarHeader className=\"border-b border-sidebar-border p-4\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"h-8 w-8 rounded-md bg-primary flex items-center justify-center\">\n            <Archive className=\"h-5 w-5 text-primary-foreground\" />\n          </div>\n          <div className=\"flex flex-col\">\n            <span className=\"text-sm font-semibold text-sidebar-foreground\">Agency Control</span>\n            <span className=\"text-xs text-muted-foreground\">Center</span>\n          </div>\n        </div>\n      </SidebarHeader>\n\n      <SidebarContent>\n        <SidebarGroup>\n          <SidebarGroupLabel className=\"text-xs uppercase tracking-wide px-2\">\n            Active\n          </SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {activeItems.map((item) => (\n                <SidebarMenuItem key={item.title}>\n                  <SidebarMenuButton asChild isActive={location === item.url}>\n                    <Link href={item.url} data-testid={item.testId}>\n                      <item.icon className=\"h-4 w-4\" />\n                      <span>{item.title}</span>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n\n        <SidebarGroup>\n          <SidebarGroupLabel className=\"text-xs uppercase tracking-wide px-2\">\n            Coming Soon\n          </SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {placeholderItems.map((item) => (\n                <SidebarMenuItem key={item.title}>\n                  <SidebarMenuButton disabled data-testid={item.testId}>\n                    <item.icon className=\"h-4 w-4\" />\n                    <span>{item.title}</span>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n\n      <SidebarFooter className=\"border-t border-sidebar-border p-4\">\n        <div className=\"flex items-center gap-3\">\n          <Avatar className=\"h-8 w-8\">\n            <AvatarFallback className=\"bg-primary text-primary-foreground text-xs\">\n              {user ? getInitials(user.name) : \"U\"}\n            </AvatarFallback>\n          </Avatar>\n          <div className=\"flex-1 min-w-0\">\n            <p className=\"text-sm font-medium text-sidebar-foreground truncate\">\n              {user?.name || \"User\"}\n            </p>\n            <p className=\"text-xs text-muted-foreground truncate\">{user?.email || \"\"}</p>\n          </div>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={logout}\n            className=\"h-8 px-2\"\n            data-testid=\"button-logout\"\n          >\n            Logout\n          </Button>\n        </div>\n      </SidebarFooter>\n    </Sidebar>\n  );\n}\n","size_bytes":4649},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });\n","size_bytes":483},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"shared/schema.ts":{"content":"import { z } from \"zod\";\nimport { pgTable, varchar, text, timestamp, decimal, pgEnum } from \"drizzle-orm/pg-core\";\nimport { relations } from \"drizzle-orm\";\nimport { createInsertSchema } from \"drizzle-zod\";\n\n// ============================================\n// USER\n// ============================================\nexport const userRoles = [\"ADMIN\", \"MANAGER\", \"STAFF\"] as const;\n\nexport interface User {\n  id: string;\n  name: string;\n  email: string;\n  passwordHash: string;\n  role: typeof userRoles[number];\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport const insertUserSchema = z.object({\n  name: z.string().min(1),\n  email: z.string().email(),\n  password: z.string().min(6),\n  role: z.enum(userRoles),\n});\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\n\n// ============================================\n// CLIENT\n// ============================================\nexport const clientStatuses = [\"ACTIVE\", \"INACTIVE\", \"ARCHIVED\"] as const;\n\nexport interface Client {\n  id: string;\n  name: string;\n  contactName: string;\n  email: string;\n  phone: string;\n  companyWebsite: string;\n  address: string;\n  status: typeof clientStatuses[number];\n  notes: string;\n  portalUrl: string;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport const insertClientSchema = z.object({\n  name: z.string().min(1, \"Client name is required\"),\n  contactName: z.string().min(1, \"Contact name is required\"),\n  email: z.string().email(\"Valid email is required\"),\n  phone: z.string().min(1, \"Phone is required\"),\n  companyWebsite: z.string().optional().default(\"\"),\n  address: z.string().optional().default(\"\"),\n  status: z.enum(clientStatuses).default(\"ACTIVE\"),\n  notes: z.string().optional().default(\"\"),\n  portalUrl: z.string().optional().default(\"\"),\n});\n\nexport type InsertClient = z.infer<typeof insertClientSchema>;\n\n// ============================================\n// PROJECT\n// ============================================\nexport const projectStatuses = [\"ACTIVE\", \"ON_HOLD\", \"COMPLETED\", \"CANCELLED\"] as const;\n\nexport interface Project {\n  id: string;\n  clientId: string;\n  name: string;\n  scope: string;\n  startDate: Date;\n  endDate: Date | null;\n  status: typeof projectStatuses[number];\n  notes: string;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport const insertProjectSchema = z.object({\n  clientId: z.string().min(1, \"Client is required\"),\n  name: z.string().min(1, \"Project name is required\"),\n  scope: z.string().min(1, \"Scope is required\"),\n  startDate: z.string().or(z.date()),\n  endDate: z.string().or(z.date()).optional().nullable(),\n  status: z.enum(projectStatuses).default(\"ACTIVE\"),\n  notes: z.string().optional().default(\"\"),\n});\n\nexport type InsertProject = z.infer<typeof insertProjectSchema>;\n\n// ============================================\n// INVOICE\n// ============================================\nexport const invoiceStatuses = [\"DRAFT\", \"SENT\", \"PARTIALLY_PAID\", \"PAID\", \"OVERDUE\"] as const;\n\nexport interface Invoice {\n  id: string;\n  clientId: string;\n  projectId: string | null;\n  invoiceNumber: string;\n  issueDate: Date;\n  dueDate: Date;\n  currency: string;\n  subtotal: number;\n  taxAmount: number;\n  totalAmount: number;\n  amountPaid: number;\n  balanceDue: number;\n  status: typeof invoiceStatuses[number];\n  notes: string;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport const insertInvoiceSchema = z.object({\n  clientId: z.string().min(1, \"Client is required\"),\n  projectId: z.string().optional().nullable(),\n  invoiceNumber: z.string().optional(),\n  issueDate: z.string().or(z.date()),\n  dueDate: z.string().or(z.date()),\n  currency: z.string().default(\"INR\"),\n  subtotal: z.number().min(0),\n  taxAmount: z.number().min(0),\n  totalAmount: z.number().min(0),\n  status: z.enum(invoiceStatuses).default(\"DRAFT\"),\n  notes: z.string().optional().default(\"\"),\n});\n\nexport type InsertInvoice = z.infer<typeof insertInvoiceSchema>;\n\n// ============================================\n// INVOICE LINE ITEM\n// ============================================\nexport interface InvoiceLineItem {\n  id: string;\n  invoiceId: string;\n  description: string;\n  quantity: number;\n  unitPrice: number;\n  lineTotal: number;\n}\n\nexport const insertInvoiceLineItemSchema = z.object({\n  invoiceId: z.string().optional(),\n  description: z.string().min(1, \"Description is required\"),\n  quantity: z.number().min(0.01, \"Quantity must be greater than 0\"),\n  unitPrice: z.number().min(0, \"Unit price must be non-negative\"),\n  lineTotal: z.number().min(0),\n});\n\nexport type InsertInvoiceLineItem = z.infer<typeof insertInvoiceLineItemSchema>;\n\n// ============================================\n// PAYMENT\n// ============================================\nexport const paymentMethods = [\"BANK_TRANSFER\", \"UPI\", \"CASH\", \"CARD\", \"OTHER\"] as const;\n\nexport interface Payment {\n  id: string;\n  invoiceId: string;\n  paymentDate: Date;\n  amount: number;\n  method: typeof paymentMethods[number];\n  reference: string;\n  notes: string;\n  createdAt: Date;\n}\n\nexport const insertPaymentSchema = z.object({\n  invoiceId: z.string().min(1),\n  paymentDate: z.string().or(z.date()),\n  amount: z.number().min(0.01, \"Amount must be greater than 0\"),\n  method: z.enum(paymentMethods),\n  reference: z.string().optional().default(\"\"),\n  notes: z.string().optional().default(\"\"),\n});\n\nexport type InsertPayment = z.infer<typeof insertPaymentSchema>;\n\n// ============================================\n// SERVICE\n// ============================================\nexport const serviceStatuses = [\"ACTIVE\", \"INACTIVE\"] as const;\nexport const serviceCategories = [\"SEO\", \"SOCIAL_MEDIA\", \"CONTENT\", \"ADVERTISING\", \"DESIGN\", \"DEVELOPMENT\", \"CONSULTING\", \"OTHER\"] as const;\n\nexport interface Service {\n  id: string;\n  name: string;\n  description: string;\n  category: typeof serviceCategories[number];\n  defaultPrice: number;\n  currency: string;\n  unit: string;\n  status: typeof serviceStatuses[number];\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport const insertServiceSchema = z.object({\n  name: z.string().min(1, \"Service name is required\"),\n  description: z.string().optional().default(\"\"),\n  category: z.enum(serviceCategories).default(\"OTHER\"),\n  defaultPrice: z.number().min(0, \"Price must be 0 or greater\"),\n  currency: z.string().default(\"INR\"),\n  unit: z.string().default(\"Hour\"),\n  status: z.enum(serviceStatuses).default(\"ACTIVE\"),\n});\n\nexport type InsertService = z.infer<typeof insertServiceSchema>;\n\n// ============================================\n// DASHBOARD SUMMARY\n// ============================================\nexport interface DashboardSummary {\n  totalInvoiced: number;\n  totalPaid: number;\n  totalOutstanding: number;\n  thisMonthInvoiced: number;\n  thisMonthCollected: number;\n  countActiveClients: number;\n  countOverdueInvoices: number;\n}\n\n// ============================================\n// EXTENDED TYPES FOR API RESPONSES\n// ============================================\nexport interface ClientWithStats extends Client {\n  totalInvoiced?: number;\n  outstandingAmount?: number;\n  projectCount?: number;\n}\n\nexport interface InvoiceWithRelations extends Invoice {\n  clientName?: string;\n  projectName?: string;\n  projectScope?: string;\n  lineItems?: InvoiceLineItem[];\n  payments?: Payment[];\n}\n\n// ============================================\n// VENDOR\n// ============================================\nexport const vendorCategories = [\"SOFTWARE\", \"FREELANCER\", \"MEDIA_BUY\", \"OTHER\"] as const;\nexport const vendorStatuses = [\"ACTIVE\", \"INACTIVE\"] as const;\n\nexport interface Vendor {\n  id: string;\n  name: string;\n  contactName: string;\n  email: string;\n  phone: string;\n  website: string;\n  address: string;\n  category: typeof vendorCategories[number];\n  status: typeof vendorStatuses[number];\n  notes: string;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport const insertVendorSchema = z.object({\n  name: z.string().min(1, \"Vendor name is required\"),\n  contactName: z.string().min(1, \"Contact name is required\"),\n  email: z.string().email(\"Valid email is required\"),\n  phone: z.string().min(1, \"Phone is required\"),\n  website: z.string().optional().default(\"\"),\n  address: z.string().optional().default(\"\"),\n  category: z.enum(vendorCategories).default(\"OTHER\"),\n  status: z.enum(vendorStatuses).default(\"ACTIVE\"),\n  notes: z.string().optional().default(\"\"),\n});\n\nexport type InsertVendor = z.infer<typeof insertVendorSchema>;\n\n// ============================================\n// EXPENSE CATEGORY\n// ============================================\nexport interface ExpenseCategory {\n  id: string;\n  name: string;\n  code: string;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport const insertExpenseCategorySchema = z.object({\n  name: z.string().min(1, \"Category name is required\"),\n  code: z.string().min(1, \"Category code is required\").max(10),\n});\n\nexport type InsertExpenseCategory = z.infer<typeof insertExpenseCategorySchema>;\n\n// ============================================\n// EXPENSE\n// ============================================\nexport const expenseStatuses = [\"PLANNED\", \"DUE\", \"PAID\", \"CANCELLED\"] as const;\n\nexport interface Expense {\n  id: string;\n  vendorId: string | null;\n  categoryId: string;\n  description: string;\n  amount: number;\n  currency: string;\n  expenseDate: Date;\n  dueDate: Date | null;\n  paidDate: Date | null;\n  status: typeof expenseStatuses[number];\n  paymentMethod: typeof paymentMethods[number] | null;\n  reference: string;\n  notes: string;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport const insertExpenseSchema = z.object({\n  vendorId: z.string().optional().nullable(),\n  categoryId: z.string().min(1, \"Category is required\"),\n  description: z.string().min(1, \"Description is required\"),\n  amount: z.number().min(0.01, \"Amount must be greater than 0\"),\n  currency: z.string().default(\"INR\"),\n  expenseDate: z.string().or(z.date()),\n  dueDate: z.string().or(z.date()).optional().nullable(),\n  paidDate: z.string().or(z.date()).optional().nullable(),\n  status: z.enum(expenseStatuses).default(\"PLANNED\"),\n  paymentMethod: z.enum(paymentMethods).optional().nullable(),\n  reference: z.string().optional().default(\"\"),\n  notes: z.string().optional().default(\"\"),\n});\n\nexport type InsertExpense = z.infer<typeof insertExpenseSchema>;\n\n// ============================================\n// TEAM MEMBER\n// ============================================\nexport const teamMemberStatuses = [\"ACTIVE\", \"INACTIVE\"] as const;\n\nexport interface TeamMember {\n  id: string;\n  name: string;\n  email: string;\n  roleTitle: string;\n  status: typeof teamMemberStatuses[number];\n  baseSalary: number;\n  joinedDate: Date;\n  exitDate: Date | null;\n  notes: string;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport const insertTeamMemberSchema = z.object({\n  name: z.string().min(1, \"Name is required\"),\n  email: z.string().email(\"Valid email is required\"),\n  roleTitle: z.string().min(1, \"Role title is required\"),\n  status: z.enum(teamMemberStatuses).default(\"ACTIVE\"),\n  baseSalary: z.number().min(0, \"Base salary must be non-negative\"),\n  joinedDate: z.string().or(z.date()),\n  exitDate: z.string().or(z.date()).optional().nullable(),\n  notes: z.string().optional().default(\"\"),\n});\n\nexport type InsertTeamMember = z.infer<typeof insertTeamMemberSchema>;\n\n// ============================================\n// SALARY PAYMENT\n// ============================================\nexport const salaryStatuses = [\"PAID\", \"PENDING\"] as const;\n\nexport interface SalaryPayment {\n  id: string;\n  teamMemberId: string;\n  month: string;\n  paymentDate: Date | null;\n  amount: number;\n  currency: string;\n  status: typeof salaryStatuses[number];\n  paymentMethod: typeof paymentMethods[number] | null;\n  reference: string;\n  notes: string;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport const insertSalaryPaymentSchema = z.object({\n  teamMemberId: z.string().min(1, \"Team member is required\"),\n  month: z.string().regex(/^\\d{4}-\\d{2}$/, \"Month must be in YYYY-MM format\"),\n  paymentDate: z.string().or(z.date()).optional().nullable(),\n  amount: z.number().min(0.01, \"Amount must be greater than 0\"),\n  currency: z.string().default(\"INR\"),\n  status: z.enum(salaryStatuses).default(\"PENDING\"),\n  paymentMethod: z.enum(paymentMethods).optional().nullable(),\n  reference: z.string().optional().default(\"\"),\n  notes: z.string().optional().default(\"\"),\n});\n\nexport type InsertSalaryPayment = z.infer<typeof insertSalaryPaymentSchema>;\n\n// ============================================\n// FINANCIAL DASHBOARD\n// ============================================\nexport interface FinancialSummary {\n  totalIncome: number;  // Total payments collected\n  totalExpenses: number;  // Total expenses + salaries combined\n  netProfit: number;  // Income - Expenses\n  totalInvoiced: number;  // For reference\n  totalSalaries: number;  // For reference\n  breakdownByCategory: Array<{\n    categoryName: string;\n    totalAmount: number;\n  }>;\n  topVendors: Array<{\n    vendorId: string;\n    vendorName: string;\n    totalAmount: number;\n  }>;\n}\n\n// ============================================\n// EXTENDED TYPES FOR NEW ENTITIES\n// ============================================\nexport interface VendorWithStats extends Vendor {\n  totalSpend?: number;\n}\n\nexport interface ExpenseWithRelations extends Expense {\n  vendorName?: string;\n  categoryName?: string;\n}\n\n// ============================================\n// DRIZZLE TABLE DEFINITIONS\n// ============================================\n\n// Enums\nexport const userRoleEnum = pgEnum(\"user_role\", userRoles);\nexport const clientStatusEnum = pgEnum(\"client_status\", clientStatuses);\nexport const projectStatusEnum = pgEnum(\"project_status\", projectStatuses);\nexport const invoiceStatusEnum = pgEnum(\"invoice_status\", invoiceStatuses);\nexport const paymentMethodEnum = pgEnum(\"payment_method\", paymentMethods);\nexport const serviceStatusEnum = pgEnum(\"service_status\", serviceStatuses);\nexport const serviceCategoryEnum = pgEnum(\"service_category\", serviceCategories);\nexport const vendorCategoryEnum = pgEnum(\"vendor_category\", vendorCategories);\nexport const vendorStatusEnum = pgEnum(\"vendor_status\", vendorStatuses);\nexport const expenseStatusEnum = pgEnum(\"expense_status\", expenseStatuses);\nexport const teamMemberStatusEnum = pgEnum(\"team_member_status\", teamMemberStatuses);\nexport const salaryStatusEnum = pgEnum(\"salary_status\", salaryStatuses);\n\n// Users table\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\", { length: 21 }).primaryKey(),\n  name: varchar(\"name\", { length: 255 }).notNull(),\n  email: varchar(\"email\", { length: 255 }).notNull().unique(),\n  passwordHash: text(\"password_hash\").notNull(),\n  role: userRoleEnum(\"role\").notNull().default(\"STAFF\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\n// Clients table\nexport const clients = pgTable(\"clients\", {\n  id: varchar(\"id\", { length: 21 }).primaryKey(),\n  name: varchar(\"name\", { length: 255 }).notNull(),\n  contactName: varchar(\"contact_name\", { length: 255 }).notNull(),\n  email: varchar(\"email\", { length: 255 }).notNull(),\n  phone: varchar(\"phone\", { length: 50 }).notNull(),\n  companyWebsite: text(\"company_website\").notNull().default(\"\"),\n  address: text(\"address\").notNull().default(\"\"),\n  status: clientStatusEnum(\"status\").notNull().default(\"ACTIVE\"),\n  notes: text(\"notes\").notNull().default(\"\"),\n  portalUrl: text(\"portal_url\").notNull().default(\"\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\n// Projects table\nexport const projects = pgTable(\"projects\", {\n  id: varchar(\"id\", { length: 21 }).primaryKey(),\n  clientId: varchar(\"client_id\", { length: 21 }).notNull().references(() => clients.id),\n  name: varchar(\"name\", { length: 255 }).notNull(),\n  scope: text(\"scope\").notNull(),\n  startDate: timestamp(\"start_date\").notNull(),\n  endDate: timestamp(\"end_date\"),\n  status: projectStatusEnum(\"status\").notNull().default(\"ACTIVE\"),\n  notes: text(\"notes\").notNull().default(\"\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\n// Invoices table\nexport const invoices = pgTable(\"invoices\", {\n  id: varchar(\"id\", { length: 21 }).primaryKey(),\n  clientId: varchar(\"client_id\", { length: 21 }).notNull().references(() => clients.id),\n  projectId: varchar(\"project_id\", { length: 21 }).references(() => projects.id),\n  invoiceNumber: varchar(\"invoice_number\", { length: 50 }).notNull().unique(),\n  issueDate: timestamp(\"issue_date\").notNull(),\n  dueDate: timestamp(\"due_date\").notNull(),\n  currency: varchar(\"currency\", { length: 10 }).notNull().default(\"INR\"),\n  subtotal: decimal(\"subtotal\", { precision: 12, scale: 2 }).notNull().default(\"0\"),\n  taxAmount: decimal(\"tax_amount\", { precision: 12, scale: 2 }).notNull().default(\"0\"),\n  totalAmount: decimal(\"total_amount\", { precision: 12, scale: 2 }).notNull().default(\"0\"),\n  amountPaid: decimal(\"amount_paid\", { precision: 12, scale: 2 }).notNull().default(\"0\"),\n  balanceDue: decimal(\"balance_due\", { precision: 12, scale: 2 }).notNull().default(\"0\"),\n  status: invoiceStatusEnum(\"status\").notNull().default(\"DRAFT\"),\n  notes: text(\"notes\").notNull().default(\"\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\n// Invoice Line Items table\nexport const invoiceLineItems = pgTable(\"invoice_line_items\", {\n  id: varchar(\"id\", { length: 21 }).primaryKey(),\n  invoiceId: varchar(\"invoice_id\", { length: 21 }).notNull().references(() => invoices.id, { onDelete: \"cascade\" }),\n  description: text(\"description\").notNull(),\n  quantity: decimal(\"quantity\", { precision: 10, scale: 2 }).notNull().default(\"1\"),\n  unitPrice: decimal(\"unit_price\", { precision: 12, scale: 2 }).notNull().default(\"0\"),\n  lineTotal: decimal(\"line_total\", { precision: 12, scale: 2 }).notNull().default(\"0\"),\n});\n\n// Payments table\nexport const payments = pgTable(\"payments\", {\n  id: varchar(\"id\", { length: 21 }).primaryKey(),\n  invoiceId: varchar(\"invoice_id\", { length: 21 }).notNull().references(() => invoices.id, { onDelete: \"cascade\" }),\n  paymentDate: timestamp(\"payment_date\").notNull(),\n  amount: decimal(\"amount\", { precision: 12, scale: 2 }).notNull(),\n  method: paymentMethodEnum(\"method\").notNull(),\n  reference: text(\"reference\").notNull().default(\"\"),\n  notes: text(\"notes\").notNull().default(\"\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Services table\nexport const services = pgTable(\"services\", {\n  id: varchar(\"id\", { length: 21 }).primaryKey(),\n  name: varchar(\"name\", { length: 255 }).notNull(),\n  description: text(\"description\").notNull().default(\"\"),\n  category: serviceCategoryEnum(\"category\").notNull().default(\"OTHER\"),\n  defaultPrice: decimal(\"default_price\", { precision: 12, scale: 2 }).notNull().default(\"0\"),\n  currency: varchar(\"currency\", { length: 10 }).notNull().default(\"INR\"),\n  unit: varchar(\"unit\", { length: 50 }).notNull().default(\"Hour\"),\n  status: serviceStatusEnum(\"status\").notNull().default(\"ACTIVE\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\n// Vendors table\nexport const vendors = pgTable(\"vendors\", {\n  id: varchar(\"id\", { length: 21 }).primaryKey(),\n  name: varchar(\"name\", { length: 255 }).notNull(),\n  contactName: varchar(\"contact_name\", { length: 255 }).notNull(),\n  email: varchar(\"email\", { length: 255 }).notNull(),\n  phone: varchar(\"phone\", { length: 50 }).notNull(),\n  website: text(\"website\").notNull().default(\"\"),\n  address: text(\"address\").notNull().default(\"\"),\n  category: vendorCategoryEnum(\"category\").notNull().default(\"OTHER\"),\n  status: vendorStatusEnum(\"status\").notNull().default(\"ACTIVE\"),\n  notes: text(\"notes\").notNull().default(\"\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\n// Expense Categories table\nexport const expenseCategories = pgTable(\"expense_categories\", {\n  id: varchar(\"id\", { length: 21 }).primaryKey(),\n  name: varchar(\"name\", { length: 100 }).notNull(),\n  code: varchar(\"code\", { length: 10 }).notNull().unique(),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\n// Expenses table\nexport const expenses = pgTable(\"expenses\", {\n  id: varchar(\"id\", { length: 21 }).primaryKey(),\n  vendorId: varchar(\"vendor_id\", { length: 21 }).references(() => vendors.id),\n  categoryId: varchar(\"category_id\", { length: 21 }).notNull().references(() => expenseCategories.id),\n  description: text(\"description\").notNull(),\n  amount: decimal(\"amount\", { precision: 12, scale: 2 }).notNull(),\n  currency: varchar(\"currency\", { length: 10 }).notNull().default(\"INR\"),\n  expenseDate: timestamp(\"expense_date\").notNull(),\n  dueDate: timestamp(\"due_date\"),\n  paidDate: timestamp(\"paid_date\"),\n  status: expenseStatusEnum(\"status\").notNull().default(\"PLANNED\"),\n  paymentMethod: paymentMethodEnum(\"payment_method\"),\n  reference: text(\"reference\").notNull().default(\"\"),\n  notes: text(\"notes\").notNull().default(\"\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\n// Team Members table\nexport const teamMembers = pgTable(\"team_members\", {\n  id: varchar(\"id\", { length: 21 }).primaryKey(),\n  name: varchar(\"name\", { length: 255 }).notNull(),\n  email: varchar(\"email\", { length: 255 }).notNull().unique(),\n  roleTitle: varchar(\"role_title\", { length: 255 }).notNull(),\n  status: teamMemberStatusEnum(\"status\").notNull().default(\"ACTIVE\"),\n  baseSalary: decimal(\"base_salary\", { precision: 12, scale: 2 }).notNull().default(\"0\"),\n  joinedDate: timestamp(\"joined_date\").notNull(),\n  exitDate: timestamp(\"exit_date\"),\n  notes: text(\"notes\").notNull().default(\"\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\n// Salary Payments table\nexport const salaryPayments = pgTable(\"salary_payments\", {\n  id: varchar(\"id\", { length: 21 }).primaryKey(),\n  teamMemberId: varchar(\"team_member_id\", { length: 21 }).notNull().references(() => teamMembers.id),\n  month: varchar(\"month\", { length: 7 }).notNull(),\n  paymentDate: timestamp(\"payment_date\"),\n  amount: decimal(\"amount\", { precision: 12, scale: 2 }).notNull(),\n  currency: varchar(\"currency\", { length: 10 }).notNull().default(\"INR\"),\n  status: salaryStatusEnum(\"status\").notNull().default(\"PENDING\"),\n  paymentMethod: paymentMethodEnum(\"payment_method\"),\n  reference: text(\"reference\").notNull().default(\"\"),\n  notes: text(\"notes\").notNull().default(\"\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\n// ============================================\n// DRIZZLE RELATIONS\n// ============================================\n\nexport const clientsRelations = relations(clients, ({ many }) => ({\n  projects: many(projects),\n  invoices: many(invoices),\n}));\n\nexport const projectsRelations = relations(projects, ({ one, many }) => ({\n  client: one(clients, {\n    fields: [projects.clientId],\n    references: [clients.id],\n  }),\n  invoices: many(invoices),\n}));\n\nexport const invoicesRelations = relations(invoices, ({ one, many }) => ({\n  client: one(clients, {\n    fields: [invoices.clientId],\n    references: [clients.id],\n  }),\n  project: one(projects, {\n    fields: [invoices.projectId],\n    references: [projects.id],\n  }),\n  lineItems: many(invoiceLineItems),\n  payments: many(payments),\n}));\n\nexport const invoiceLineItemsRelations = relations(invoiceLineItems, ({ one }) => ({\n  invoice: one(invoices, {\n    fields: [invoiceLineItems.invoiceId],\n    references: [invoices.id],\n  }),\n}));\n\nexport const paymentsRelations = relations(payments, ({ one }) => ({\n  invoice: one(invoices, {\n    fields: [payments.invoiceId],\n    references: [invoices.id],\n  }),\n}));\n\nexport const vendorsRelations = relations(vendors, ({ many }) => ({\n  expenses: many(expenses),\n}));\n\nexport const expenseCategoriesRelations = relations(expenseCategories, ({ many }) => ({\n  expenses: many(expenses),\n}));\n\nexport const expensesRelations = relations(expenses, ({ one }) => ({\n  vendor: one(vendors, {\n    fields: [expenses.vendorId],\n    references: [vendors.id],\n  }),\n  category: one(expenseCategories, {\n    fields: [expenses.categoryId],\n    references: [expenseCategories.id],\n  }),\n}));\n\nexport const teamMembersRelations = relations(teamMembers, ({ many }) => ({\n  salaryPayments: many(salaryPayments),\n}));\n\nexport const salaryPaymentsRelations = relations(salaryPayments, ({ one }) => ({\n  teamMember: one(teamMembers, {\n    fields: [salaryPayments.teamMemberId],\n    references: [teamMembers.id],\n  }),\n}));\n","size_bytes":24742},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/vendor-dialog.tsx":{"content":"import { useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { insertVendorSchema, type InsertVendor, type Vendor } from \"@shared/schema\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\n\ninterface VendorDialogProps {\n  vendor?: Vendor | null;\n  open: boolean;\n  onClose: () => void;\n}\n\nexport function VendorDialog({ vendor, open, onClose }: VendorDialogProps) {\n  const { toast } = useToast();\n\n  const form = useForm<InsertVendor>({\n    resolver: zodResolver(insertVendorSchema),\n    defaultValues: {\n      name: \"\",\n      contactName: \"\",\n      email: \"\",\n      phone: \"\",\n      website: \"\",\n      address: \"\",\n      category: \"OTHER\",\n      status: \"ACTIVE\",\n      notes: \"\",\n    },\n  });\n\n  useEffect(() => {\n    if (vendor) {\n      form.reset({\n        name: vendor.name,\n        contactName: vendor.contactName,\n        email: vendor.email,\n        phone: vendor.phone || \"\",\n        website: vendor.website || \"\",\n        address: vendor.address || \"\",\n        category: vendor.category,\n        status: vendor.status,\n        notes: vendor.notes || \"\",\n      });\n    } else {\n      form.reset({\n        name: \"\",\n        contactName: \"\",\n        email: \"\",\n        phone: \"\",\n        website: \"\",\n        address: \"\",\n        category: \"OTHER\",\n        status: \"ACTIVE\",\n        notes: \"\",\n      });\n    }\n  }, [vendor, form]);\n\n  const createMutation = useMutation({\n    mutationFn: async (data: InsertVendor) => {\n      return apiRequest(\"/api/vendors\", \"POST\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/vendors\"] });\n      toast({ title: \"Vendor created successfully\" });\n      onClose();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async (data: InsertVendor) => {\n      return apiRequest(`/api/vendors/${vendor?.id}`, \"PUT\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/vendors\"] });\n      toast({ title: \"Vendor updated successfully\" });\n      onClose();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const onSubmit = (data: InsertVendor) => {\n    if (vendor) {\n      updateMutation.mutate(data);\n    } else {\n      createMutation.mutate(data);\n    }\n  };\n\n  const isPending = createMutation.isPending || updateMutation.isPending;\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle data-testid=\"dialog-title\">\n            {vendor ? \"Edit Vendor\" : \"Add New Vendor\"}\n          </DialogTitle>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"name\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Vendor Name</FormLabel>\n                    <FormControl>\n                      <Input {...field} data-testid=\"input-name\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"category\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Category</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-category\">\n                          <SelectValue placeholder=\"Select category\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"SOFTWARE\">Software</SelectItem>\n                        <SelectItem value=\"MEDIA_BUY\">Media Buy</SelectItem>\n                        <SelectItem value=\"FREELANCER\">Freelancer</SelectItem>\n                        <SelectItem value=\"AGENCY\">Agency</SelectItem>\n                        <SelectItem value=\"SUPPLIER\">Supplier</SelectItem>\n                        <SelectItem value=\"OTHER\">Other</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"contactName\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Contact Name</FormLabel>\n                    <FormControl>\n                      <Input {...field} data-testid=\"input-contact-name\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"email\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Email</FormLabel>\n                    <FormControl>\n                      <Input {...field} type=\"email\" data-testid=\"input-email\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"phone\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Phone</FormLabel>\n                    <FormControl>\n                      <Input {...field} data-testid=\"input-phone\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"website\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Website</FormLabel>\n                    <FormControl>\n                      <Input {...field} data-testid=\"input-website\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"address\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Address</FormLabel>\n                  <FormControl>\n                    <Textarea {...field} rows={2} data-testid=\"input-address\" />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"status\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Status</FormLabel>\n                  <Select onValueChange={field.onChange} value={field.value}>\n                    <FormControl>\n                      <SelectTrigger data-testid=\"select-status\">\n                        <SelectValue placeholder=\"Select status\" />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      <SelectItem value=\"ACTIVE\">Active</SelectItem>\n                      <SelectItem value=\"INACTIVE\">Inactive</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"notes\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Notes</FormLabel>\n                  <FormControl>\n                    <Textarea {...field} rows={3} data-testid=\"input-notes\" />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <DialogFooter>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={onClose}\n                disabled={isPending}\n                data-testid=\"button-cancel\"\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\" disabled={isPending} data-testid=\"button-submit\">\n                {isPending ? \"Saving...\" : vendor ? \"Update Vendor\" : \"Create Vendor\"}\n              </Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":9663},"client/src/components/mark-expense-paid-dialog.tsx":{"content":"import { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { z } from \"zod\";\nimport type { Expense } from \"@shared/schema\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { formatCurrency } from \"@/lib/utils\";\n\nconst markPaidSchema = z.object({\n  paymentDate: z.string().min(1, \"Payment date is required\"),\n  paymentMethod: z.string().min(1, \"Payment method is required\"),\n  reference: z.string(),\n});\n\ntype MarkPaidForm = z.infer<typeof markPaidSchema>;\n\ninterface MarkExpensePaidDialogProps {\n  expense: Expense;\n  open: boolean;\n  onClose: () => void;\n}\n\nexport function MarkExpensePaidDialog({ expense, open, onClose }: MarkExpensePaidDialogProps) {\n  const { toast } = useToast();\n\n  const form = useForm<MarkPaidForm>({\n    resolver: zodResolver(markPaidSchema),\n    defaultValues: {\n      paymentDate: new Date().toISOString().split(\"T\")[0],\n      paymentMethod: \"BANK_TRANSFER\",\n      reference: \"\",\n    },\n  });\n\n  const markPaidMutation = useMutation({\n    mutationFn: async (data: MarkPaidForm) => {\n      return apiRequest(`/api/expenses/${expense.id}/mark-paid`, \"POST\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/expenses\"] });\n      toast({ title: \"Expense marked as paid\" });\n      onClose();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const onSubmit = (data: MarkPaidForm) => {\n    markPaidMutation.mutate(data);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle data-testid=\"dialog-title\">Mark Expense as Paid</DialogTitle>\n        </DialogHeader>\n\n        <div className=\"mb-4 p-4 bg-muted rounded-lg\">\n          <div className=\"text-sm text-muted-foreground\">Amount to pay</div>\n          <div className=\"text-2xl font-semibold mt-1\" data-testid=\"expense-amount\">\n            {formatCurrency(Number(expense.amount), expense.currency)}\n          </div>\n          <div className=\"text-sm text-muted-foreground mt-2\">{expense.description}</div>\n        </div>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"paymentDate\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Payment Date</FormLabel>\n                  <FormControl>\n                    <Input {...field} type=\"date\" data-testid=\"input-payment-date\" />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"paymentMethod\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Payment Method</FormLabel>\n                  <Select onValueChange={field.onChange} value={field.value}>\n                    <FormControl>\n                      <SelectTrigger data-testid=\"select-payment-method\">\n                        <SelectValue placeholder=\"Select method\" />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      <SelectItem value=\"BANK_TRANSFER\">Bank Transfer</SelectItem>\n                      <SelectItem value=\"UPI\">UPI</SelectItem>\n                      <SelectItem value=\"CASH\">Cash</SelectItem>\n                      <SelectItem value=\"CARD\">Card</SelectItem>\n                      <SelectItem value=\"OTHER\">Other</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"reference\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Reference (Optional)</FormLabel>\n                  <FormControl>\n                    <Input {...field} placeholder=\"Transaction ID or reference\" data-testid=\"input-reference\" />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <DialogFooter>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={onClose}\n                disabled={markPaidMutation.isPending}\n                data-testid=\"button-cancel\"\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\" disabled={markPaidMutation.isPending} data-testid=\"button-submit\">\n                {markPaidMutation.isPending ? \"Marking...\" : \"Mark as Paid\"}\n              </Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":5547},"client/src/pages/team-salaries.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Plus, Users, DollarSign } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { TeamMemberDialog } from \"@/components/team-member-dialog\";\nimport { SalaryPaymentDialog } from \"@/components/salary-payment-dialog\";\nimport { MarkSalaryPaidDialog } from \"@/components/mark-salary-paid-dialog\";\nimport { formatCurrency, formatDate } from \"@/lib/utils\";\nimport type { TeamMember, SalaryPayment } from \"@shared/schema\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\n\nexport default function TeamSalariesPage() {\n  const [showTeamDialog, setShowTeamDialog] = useState(false);\n  const [showSalaryDialog, setShowSalaryDialog] = useState(false);\n  const [editingMember, setEditingMember] = useState<TeamMember | null>(null);\n  const [editingSalary, setEditingSalary] = useState<SalaryPayment | null>(null);\n  const [markingPaidSalary, setMarkingPaidSalary] = useState<SalaryPayment | null>(null);\n  const [statusFilter, setStatusFilter] = useState(\"\");\n  const [salaryStatusFilter, setSalaryStatusFilter] = useState(\"\");\n\n  const { data: teamMembers = [], isLoading: loadingTeam } = useQuery<TeamMember[]>({\n    queryKey: [\"/api/team-members\", { status: statusFilter }],\n  });\n\n  const { data: salaries = [], isLoading: loadingSalaries } = useQuery<SalaryPayment[]>({\n    queryKey: [\"/api/salaries\", { status: salaryStatusFilter }],\n  });\n\n  const handleEditMember = (member: TeamMember) => {\n    setEditingMember(member);\n    setShowTeamDialog(true);\n  };\n\n  const handleCloseTeamDialog = () => {\n    setShowTeamDialog(false);\n    setEditingMember(null);\n  };\n\n  const handleEditSalary = (salary: SalaryPayment) => {\n    setEditingSalary(salary);\n    setShowSalaryDialog(true);\n  };\n\n  const handleCloseSalaryDialog = () => {\n    setShowSalaryDialog(false);\n    setEditingSalary(null);\n  };\n\n  const handleMarkPaid = (salary: SalaryPayment) => {\n    setMarkingPaidSalary(salary);\n  };\n\n  const getStatusBadgeVariant = (status: string) => {\n    switch (status) {\n      case \"ACTIVE\":\n        return \"default\";\n      case \"INACTIVE\":\n        return \"secondary\";\n      default:\n        return \"outline\";\n    }\n  };\n\n  const getSalaryStatusBadgeVariant = (status: string) => {\n    switch (status) {\n      case \"PAID\":\n        return \"default\";\n      case \"PENDING\":\n        return \"secondary\";\n      default:\n        return \"outline\";\n    }\n  };\n\n  const getTeamMemberName = (memberId: string) => {\n    const member = teamMembers.find((m) => m.id === memberId);\n    return member?.name || \"Unknown\";\n  };\n\n  const totalSalaryPaid = salaries\n    .filter((s) => s.status === \"PAID\")\n    .reduce((sum, s) => sum + Number(s.amount), 0);\n\n  const totalSalaryPending = salaries\n    .filter((s) => s.status === \"PENDING\")\n    .reduce((sum, s) => sum + Number(s.amount), 0);\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-semibold\" data-testid=\"page-title\">Team & Salaries</h1>\n          <p className=\"text-sm text-muted-foreground mt-1\">\n            Manage team members and salary payments\n          </p>\n        </div>\n      </div>\n\n      <Tabs defaultValue=\"team\" className=\"w-full\">\n        <TabsList>\n          <TabsTrigger value=\"team\" data-testid=\"tab-team\">\n            <Users className=\"h-4 w-4 mr-2\" />\n            Team Members\n          </TabsTrigger>\n          <TabsTrigger value=\"salaries\" data-testid=\"tab-salaries\">\n            <DollarSign className=\"h-4 w-4 mr-2\" />\n            Salary Payments\n          </TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"team\" className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex gap-4 items-center\">\n              <Select value={statusFilter} onValueChange={setStatusFilter}>\n                <SelectTrigger className=\"w-[180px]\" data-testid=\"select-status-filter\">\n                  <SelectValue placeholder=\"All Status\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Status</SelectItem>\n                  <SelectItem value=\"ACTIVE\">Active</SelectItem>\n                  <SelectItem value=\"INACTIVE\">Inactive</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            <Button onClick={() => setShowTeamDialog(true)} data-testid=\"button-add-member\">\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Add Team Member\n            </Button>\n          </div>\n\n          {loadingTeam ? (\n            <div className=\"flex items-center justify-center py-12\">\n              <div className=\"text-muted-foreground\">Loading team members...</div>\n            </div>\n          ) : (\n            <div className=\"border rounded-lg overflow-hidden\">\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead className=\"bg-muted/50 sticky top-0 z-10\">\n                    <tr>\n                      <th className=\"text-left px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                        Name\n                      </th>\n                      <th className=\"text-left px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                        Role\n                      </th>\n                      <th className=\"text-left px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                        Email\n                      </th>\n                      <th className=\"text-right px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                        Base Salary\n                      </th>\n                      <th className=\"text-left px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                        Joined Date\n                      </th>\n                      <th className=\"text-left px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                        Status\n                      </th>\n                      <th className=\"text-right px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                        Actions\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {teamMembers.length === 0 ? (\n                      <tr>\n                        <td colSpan={7} className=\"px-4 py-12 text-center text-muted-foreground\">\n                          No team members found. Click \"Add Team Member\" to create one.\n                        </td>\n                      </tr>\n                    ) : (\n                      teamMembers.map((member) => (\n                        <tr\n                          key={member.id}\n                          className=\"border-b hover-elevate active-elevate-2 cursor-pointer\"\n                          onClick={() => handleEditMember(member)}\n                          data-testid={`member-row-${member.id}`}\n                        >\n                          <td className=\"px-4 py-3\">\n                            <div className=\"font-medium text-sm\" data-testid={`member-name-${member.id}`}>\n                              {member.name}\n                            </div>\n                          </td>\n                          <td className=\"px-4 py-3\">\n                            <div className=\"text-sm\" data-testid={`member-role-${member.id}`}>\n                              {member.roleTitle}\n                            </div>\n                          </td>\n                          <td className=\"px-4 py-3\">\n                            <div className=\"text-sm\" data-testid={`member-email-${member.id}`}>\n                              {member.email}\n                            </div>\n                          </td>\n                          <td className=\"px-4 py-3 text-right\">\n                            <div className=\"text-sm font-medium tabular-nums\" data-testid={`member-salary-${member.id}`}>\n                              {formatCurrency(Number(member.baseSalary))}\n                            </div>\n                          </td>\n                          <td className=\"px-4 py-3\">\n                            <div className=\"text-sm\" data-testid={`member-joined-${member.id}`}>\n                              {formatDate(member.joinedDate)}\n                            </div>\n                          </td>\n                          <td className=\"px-4 py-3\">\n                            <Badge\n                              variant={getStatusBadgeVariant(member.status)}\n                              data-testid={`member-status-${member.id}`}\n                            >\n                              {member.status}\n                            </Badge>\n                          </td>\n                          <td className=\"px-4 py-3 text-right\">\n                            <div className=\"flex justify-end gap-2\" onClick={(e) => e.stopPropagation()}>\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                onClick={() => handleEditMember(member)}\n                                data-testid={`button-edit-${member.id}`}\n                              >\n                                Edit\n                              </Button>\n                            </div>\n                          </td>\n                        </tr>\n                      ))\n                    )}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          )}\n        </TabsContent>\n\n        <TabsContent value=\"salaries\" className=\"space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"border rounded-lg p-4\">\n              <div className=\"text-sm text-muted-foreground\">Total Paid</div>\n              <div className=\"text-2xl font-semibold mt-1 text-green-600\" data-testid=\"total-paid\">\n                {formatCurrency(totalSalaryPaid)}\n              </div>\n            </div>\n            <div className=\"border rounded-lg p-4\">\n              <div className=\"text-sm text-muted-foreground\">Pending</div>\n              <div className=\"text-2xl font-semibold mt-1 text-orange-600\" data-testid=\"total-pending\">\n                {formatCurrency(totalSalaryPending)}\n              </div>\n            </div>\n          </div>\n\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex gap-4 items-center\">\n              <Select value={salaryStatusFilter} onValueChange={setSalaryStatusFilter}>\n                <SelectTrigger className=\"w-[180px]\" data-testid=\"select-salary-status-filter\">\n                  <SelectValue placeholder=\"All Status\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Status</SelectItem>\n                  <SelectItem value=\"PAID\">Paid</SelectItem>\n                  <SelectItem value=\"PENDING\">Pending</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            <Button onClick={() => setShowSalaryDialog(true)} data-testid=\"button-add-salary\">\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Record Salary Payment\n            </Button>\n          </div>\n\n          {loadingSalaries ? (\n            <div className=\"flex items-center justify-center py-12\">\n              <div className=\"text-muted-foreground\">Loading salaries...</div>\n            </div>\n          ) : (\n            <div className=\"border rounded-lg overflow-hidden\">\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead className=\"bg-muted/50 sticky top-0 z-10\">\n                    <tr>\n                      <th className=\"text-left px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                        Team Member\n                      </th>\n                      <th className=\"text-left px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                        Month\n                      </th>\n                      <th className=\"text-right px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                        Amount\n                      </th>\n                      <th className=\"text-left px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                        Payment Date\n                      </th>\n                      <th className=\"text-left px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                        Status\n                      </th>\n                      <th className=\"text-right px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                        Actions\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {salaries.length === 0 ? (\n                      <tr>\n                        <td colSpan={6} className=\"px-4 py-12 text-center text-muted-foreground\">\n                          No salary records found. Click \"Record Salary Payment\" to create one.\n                        </td>\n                      </tr>\n                    ) : (\n                      salaries.map((salary) => (\n                        <tr\n                          key={salary.id}\n                          className=\"border-b hover-elevate active-elevate-2 cursor-pointer\"\n                          onClick={() => handleEditSalary(salary)}\n                          data-testid={`salary-row-${salary.id}`}\n                        >\n                          <td className=\"px-4 py-3\">\n                            <div className=\"text-sm\" data-testid={`salary-member-${salary.id}`}>\n                              {getTeamMemberName(salary.teamMemberId)}\n                            </div>\n                          </td>\n                          <td className=\"px-4 py-3\">\n                            <div className=\"text-sm\" data-testid={`salary-month-${salary.id}`}>\n                              {salary.month}\n                            </div>\n                          </td>\n                          <td className=\"px-4 py-3 text-right\">\n                            <div className=\"text-sm font-medium tabular-nums\" data-testid={`salary-amount-${salary.id}`}>\n                              {formatCurrency(Number(salary.amount), salary.currency)}\n                            </div>\n                          </td>\n                          <td className=\"px-4 py-3\">\n                            <div className=\"text-sm\" data-testid={`salary-date-${salary.id}`}>\n                              {salary.paymentDate ? formatDate(salary.paymentDate) : \"—\"}\n                            </div>\n                          </td>\n                          <td className=\"px-4 py-3\">\n                            <Badge\n                              variant={getSalaryStatusBadgeVariant(salary.status)}\n                              data-testid={`salary-status-${salary.id}`}\n                            >\n                              {salary.status}\n                            </Badge>\n                          </td>\n                          <td className=\"px-4 py-3 text-right\">\n                            <div className=\"flex justify-end gap-2\" onClick={(e) => e.stopPropagation()}>\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                onClick={() => handleEditSalary(salary)}\n                                data-testid={`button-edit-${salary.id}`}\n                              >\n                                Edit\n                              </Button>\n                              {salary.status !== \"PAID\" && (\n                                <Button\n                                  size=\"sm\"\n                                  onClick={() => handleMarkPaid(salary)}\n                                  data-testid={`button-mark-paid-${salary.id}`}\n                                >\n                                  Mark Paid\n                                </Button>\n                              )}\n                            </div>\n                          </td>\n                        </tr>\n                      ))\n                    )}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          )}\n        </TabsContent>\n      </Tabs>\n\n      {showTeamDialog && (\n        <TeamMemberDialog\n          member={editingMember}\n          open={showTeamDialog}\n          onClose={handleCloseTeamDialog}\n        />\n      )}\n\n      {showSalaryDialog && (\n        <SalaryPaymentDialog\n          salary={editingSalary}\n          open={showSalaryDialog}\n          onClose={handleCloseSalaryDialog}\n        />\n      )}\n\n      {markingPaidSalary && (\n        <MarkSalaryPaidDialog\n          salary={markingPaidSalary}\n          open={!!markingPaidSalary}\n          onClose={() => setMarkingPaidSalary(null)}\n        />\n      )}\n    </div>\n  );\n}\n","size_bytes":17240},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { SidebarProvider, SidebarTrigger } from \"@/components/ui/sidebar\";\nimport { AuthProvider } from \"@/lib/auth\";\nimport { ProtectedRoute } from \"@/components/protected-route\";\nimport { AppSidebar } from \"@/components/app-sidebar\";\nimport NotFound from \"@/pages/not-found\";\nimport LoginPage from \"@/pages/login\";\nimport DashboardPage from \"@/pages/dashboard\";\nimport ClientsPage from \"@/pages/clients\";\nimport ClientDetailPage from \"@/pages/client-detail\";\nimport InvoicesPage from \"@/pages/invoices\";\nimport InvoiceCreatePage from \"@/pages/invoice-create\";\nimport InvoiceDetailPage from \"@/pages/invoice-detail\";\nimport VendorsPage from \"@/pages/vendors\";\nimport ExpensesPage from \"@/pages/expenses\";\nimport TeamSalariesPage from \"@/pages/team-salaries\";\nimport SettingsPage from \"@/pages/settings\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/login\" component={LoginPage} />\n      <Route path=\"/\">\n        {() => (\n          <ProtectedRoute>\n            <DashboardPage />\n          </ProtectedRoute>\n        )}\n      </Route>\n      <Route path=\"/clients\">\n        {() => (\n          <ProtectedRoute>\n            <ClientsPage />\n          </ProtectedRoute>\n        )}\n      </Route>\n      <Route path=\"/clients/:id\">\n        {() => (\n          <ProtectedRoute>\n            <ClientDetailPage />\n          </ProtectedRoute>\n        )}\n      </Route>\n      <Route path=\"/invoices\">\n        {() => (\n          <ProtectedRoute>\n            <InvoicesPage />\n          </ProtectedRoute>\n        )}\n      </Route>\n      <Route path=\"/invoices/new\">\n        {() => (\n          <ProtectedRoute>\n            <InvoiceCreatePage />\n          </ProtectedRoute>\n        )}\n      </Route>\n      <Route path=\"/invoices/:id\">\n        {() => (\n          <ProtectedRoute>\n            <InvoiceDetailPage />\n          </ProtectedRoute>\n        )}\n      </Route>\n      <Route path=\"/vendors\">\n        {() => (\n          <ProtectedRoute>\n            <VendorsPage />\n          </ProtectedRoute>\n        )}\n      </Route>\n      <Route path=\"/expenses\">\n        {() => (\n          <ProtectedRoute>\n            <ExpensesPage />\n          </ProtectedRoute>\n        )}\n      </Route>\n      <Route path=\"/team-salaries\">\n        {() => (\n          <ProtectedRoute>\n            <TeamSalariesPage />\n          </ProtectedRoute>\n        )}\n      </Route>\n      <Route path=\"/settings\">\n        {() => (\n          <ProtectedRoute>\n            <SettingsPage />\n          </ProtectedRoute>\n        )}\n      </Route>\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction AppLayout({ children }: { children: React.ReactNode }) {\n  const style = {\n    \"--sidebar-width\": \"16rem\",\n    \"--sidebar-width-icon\": \"3rem\",\n  };\n\n  return (\n    <SidebarProvider style={style as React.CSSProperties}>\n      <div className=\"flex h-screen w-full\">\n        <AppSidebar />\n        <div className=\"flex flex-col flex-1 overflow-hidden\">\n          <header className=\"flex items-center justify-between h-16 px-4 border-b bg-background sticky top-0 z-10\">\n            <SidebarTrigger data-testid=\"button-sidebar-toggle\" />\n          </header>\n          <main className=\"flex-1 overflow-y-auto bg-background\">\n            {children}\n          </main>\n        </div>\n      </div>\n    </SidebarProvider>\n  );\n}\n\nexport default function App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <AuthProvider>\n        <TooltipProvider>\n          <Route path=\"/login\">\n            {(params) => <Router />}\n          </Route>\n          <Route path=\"*\">\n            {(params) => (\n              <AppLayout>\n                <Router />\n              </AppLayout>\n            )}\n          </Route>\n          <Toaster />\n        </TooltipProvider>\n      </AuthProvider>\n    </QueryClientProvider>\n  );\n}\n","size_bytes":4050},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport bcrypt from \"bcrypt\";\nimport jwt from \"jsonwebtoken\";\nimport {\n  insertClientSchema,\n  insertProjectSchema,\n  insertPaymentSchema,\n  insertServiceSchema,\n  insertVendorSchema,\n  insertExpenseCategorySchema,\n  insertExpenseSchema,\n  insertTeamMemberSchema,\n  insertSalaryPaymentSchema,\n} from \"@shared/schema\";\n\nconst JWT_SECRET = process.env.SESSION_SECRET || \"development-secret-key\";\n\n// Middleware to verify JWT token\nfunction authenticateToken(req: any, res: any, next: any) {\n  const authHeader = req.headers[\"authorization\"];\n  const token = authHeader && authHeader.split(\" \")[1];\n\n  if (!token) {\n    return res.status(401).send(\"Authentication required\");\n  }\n\n  jwt.verify(token, JWT_SECRET, (err: any, user: any) => {\n    if (err) {\n      return res.status(403).send(\"Invalid token\");\n    }\n    req.user = user;\n    next();\n  });\n}\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // ============================================\n  // AUTH ROUTES\n  // ============================================\n  app.post(\"/api/auth/login\", async (req, res) => {\n    try {\n      const { email, password } = req.body;\n\n      if (!email || !password) {\n        return res.status(400).send(\"Email and password are required\");\n      }\n\n      const user = await storage.getUserByEmail(email);\n      if (!user) {\n        return res.status(401).send(\"Invalid credentials\");\n      }\n\n      const validPassword = await bcrypt.compare(password, user.passwordHash);\n      if (!validPassword) {\n        return res.status(401).send(\"Invalid credentials\");\n      }\n\n      const token = jwt.sign(\n        { id: user.id, email: user.email, role: user.role },\n        JWT_SECRET,\n        { expiresIn: \"7d\" }\n      );\n\n      res.json({\n        id: user.id,\n        name: user.name,\n        email: user.email,\n        role: user.role,\n        token,\n      });\n    } catch (error: any) {\n      res.status(500).send(error.message);\n    }\n  });\n\n  // ============================================\n  // CLIENT ROUTES\n  // ============================================\n  app.get(\"/api/clients\", authenticateToken, async (req, res) => {\n    try {\n      const { status, search } = req.query;\n      const clients = await storage.getClients({\n        status: status as string,\n        search: search as string,\n      });\n      res.json(clients);\n    } catch (error: any) {\n      res.status(500).send(error.message);\n    }\n  });\n\n  app.get(\"/api/clients/:id\", authenticateToken, async (req, res) => {\n    try {\n      const client = await storage.getClientById(req.params.id);\n      if (!client) {\n        return res.status(404).send(\"Client not found\");\n      }\n      res.json(client);\n    } catch (error: any) {\n      res.status(500).send(error.message);\n    }\n  });\n\n  app.post(\"/api/clients\", authenticateToken, async (req, res) => {\n    try {\n      const validatedData = insertClientSchema.parse(req.body);\n      const client = await storage.createClient(validatedData);\n      res.json(client);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  app.put(\"/api/clients/:id\", authenticateToken, async (req, res) => {\n    try {\n      const validatedData = insertClientSchema.partial().parse(req.body);\n      const client = await storage.updateClient(req.params.id, validatedData);\n      res.json(client);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  app.put(\"/api/clients/:id/status\", authenticateToken, async (req, res) => {\n    try {\n      const { status } = req.body;\n      if (!status) {\n        return res.status(400).send(\"Status is required\");\n      }\n      const client = await storage.updateClientStatus(req.params.id, status);\n      res.json(client);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  // ============================================\n  // PROJECT ROUTES\n  // ============================================\n  app.get(\"/api/projects\", authenticateToken, async (req, res) => {\n    try {\n      const { clientId } = req.query;\n      const projects = await storage.getProjects({\n        clientId: clientId as string,\n      });\n      res.json(projects);\n    } catch (error: any) {\n      res.status(500).send(error.message);\n    }\n  });\n\n  app.get(\"/api/projects/:id\", authenticateToken, async (req, res) => {\n    try {\n      const project = await storage.getProjectById(req.params.id);\n      if (!project) {\n        return res.status(404).send(\"Project not found\");\n      }\n      res.json(project);\n    } catch (error: any) {\n      res.status(500).send(error.message);\n    }\n  });\n\n  app.post(\"/api/projects\", authenticateToken, async (req, res) => {\n    try {\n      const validatedData = insertProjectSchema.parse(req.body);\n      const project = await storage.createProject(validatedData);\n      res.json(project);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  app.put(\"/api/projects/:id\", authenticateToken, async (req, res) => {\n    try {\n      const validatedData = insertProjectSchema.partial().parse(req.body);\n      const project = await storage.updateProject(req.params.id, validatedData);\n      res.json(project);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  // ============================================\n  // INVOICE ROUTES\n  // ============================================\n  app.get(\"/api/invoices\", authenticateToken, async (req, res) => {\n    try {\n      const { clientId, status, search } = req.query;\n      const invoices = await storage.getInvoices({\n        clientId: clientId as string,\n        status: status as string,\n        search: search as string,\n      });\n      res.json(invoices);\n    } catch (error: any) {\n      res.status(500).send(error.message);\n    }\n  });\n\n  app.get(\"/api/invoices/upcoming\", authenticateToken, async (req, res) => {\n    try {\n      const invoices = await storage.getUpcomingInvoices();\n      res.json(invoices);\n    } catch (error: any) {\n      res.status(500).send(error.message);\n    }\n  });\n\n  app.get(\"/api/invoices/:id\", authenticateToken, async (req, res) => {\n    try {\n      const invoice = await storage.getInvoiceById(req.params.id);\n      if (!invoice) {\n        return res.status(404).send(\"Invoice not found\");\n      }\n      res.json(invoice);\n    } catch (error: any) {\n      res.status(500).send(error.message);\n    }\n  });\n\n  app.post(\"/api/invoices\", authenticateToken, async (req, res) => {\n    try {\n      const invoice = await storage.createInvoice(req.body);\n      res.json(invoice);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  app.put(\"/api/invoices/:id\", authenticateToken, async (req, res) => {\n    try {\n      const invoice = await storage.updateInvoice(req.params.id, req.body);\n      res.json(invoice);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  app.post(\"/api/invoices/:id/status\", authenticateToken, async (req, res) => {\n    try {\n      const { status } = req.body;\n      if (!status) {\n        return res.status(400).send(\"Status is required\");\n      }\n      const invoice = await storage.updateInvoiceStatus(req.params.id, status);\n      res.json(invoice);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  // ============================================\n  // PAYMENT ROUTES\n  // ============================================\n  app.get(\"/api/invoices/:id/payments\", authenticateToken, async (req, res) => {\n    try {\n      const payments = await storage.getPaymentsByInvoiceId(req.params.id);\n      res.json(payments);\n    } catch (error: any) {\n      res.status(500).send(error.message);\n    }\n  });\n\n  app.post(\"/api/invoices/:id/payments\", authenticateToken, async (req, res) => {\n    try {\n      const validatedData = insertPaymentSchema.parse({\n        ...req.body,\n        invoiceId: req.params.id,\n      });\n      const payment = await storage.createPayment(validatedData);\n      res.json(payment);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  // ============================================\n  // SERVICE ROUTES\n  // ============================================\n  app.get(\"/api/services\", authenticateToken, async (req, res) => {\n    try {\n      const { status, category } = req.query;\n      const services = await storage.getServices({\n        status: status as string,\n        category: category as string,\n      });\n      res.json(services);\n    } catch (error: any) {\n      res.status(500).send(error.message);\n    }\n  });\n\n  app.get(\"/api/services/:id\", authenticateToken, async (req, res) => {\n    try {\n      const service = await storage.getServiceById(req.params.id);\n      if (!service) {\n        return res.status(404).send(\"Service not found\");\n      }\n      res.json(service);\n    } catch (error: any) {\n      res.status(500).send(error.message);\n    }\n  });\n\n  app.post(\"/api/services\", authenticateToken, async (req, res) => {\n    try {\n      const validatedData = insertServiceSchema.parse(req.body);\n      const service = await storage.createService(validatedData);\n      res.json(service);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  app.put(\"/api/services/:id\", authenticateToken, async (req, res) => {\n    try {\n      const service = await storage.updateService(req.params.id, req.body);\n      res.json(service);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  app.post(\"/api/services/:id/status\", authenticateToken, async (req, res) => {\n    try {\n      const { status } = req.body;\n      if (!status) {\n        return res.status(400).send(\"Status is required\");\n      }\n      const service = await storage.updateServiceStatus(req.params.id, status);\n      res.json(service);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  // ============================================\n  // DASHBOARD ROUTES\n  // ============================================\n  app.get(\"/api/dashboard/summary\", authenticateToken, async (req, res) => {\n    try {\n      const summary = await storage.getDashboardSummary();\n      res.json(summary);\n    } catch (error: any) {\n      res.status(500).send(error.message);\n    }\n  });\n\n  app.get(\"/api/dashboard/financial\", authenticateToken, async (req, res) => {\n    try {\n      const { fromDate, toDate } = req.query;\n      const summary = await storage.getFinancialSummary({\n        fromDate: fromDate as string,\n        toDate: toDate as string,\n      });\n      res.json(summary);\n    } catch (error: any) {\n      res.status(500).send(error.message);\n    }\n  });\n\n  // ============================================\n  // VENDOR ROUTES\n  // ============================================\n  app.get(\"/api/vendors\", authenticateToken, async (req, res) => {\n    try {\n      const { status, search, category } = req.query;\n      const vendors = await storage.getVendors({\n        status: status as string,\n        search: search as string,\n        category: category as string,\n      });\n      res.json(vendors);\n    } catch (error: any) {\n      res.status(500).send(error.message);\n    }\n  });\n\n  app.get(\"/api/vendors/:id\", authenticateToken, async (req, res) => {\n    try {\n      const vendor = await storage.getVendorById(req.params.id);\n      if (!vendor) {\n        return res.status(404).send(\"Vendor not found\");\n      }\n      res.json(vendor);\n    } catch (error: any) {\n      res.status(500).send(error.message);\n    }\n  });\n\n  app.post(\"/api/vendors\", authenticateToken, async (req, res) => {\n    try {\n      const validatedData = insertVendorSchema.parse(req.body);\n      const vendor = await storage.createVendor(validatedData);\n      res.json(vendor);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  app.put(\"/api/vendors/:id\", authenticateToken, async (req, res) => {\n    try {\n      const validatedData = insertVendorSchema.partial().parse(req.body);\n      const vendor = await storage.updateVendor(req.params.id, validatedData);\n      res.json(vendor);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  app.put(\"/api/vendors/:id/status\", authenticateToken, async (req, res) => {\n    try {\n      const { status } = req.body;\n      if (!status) {\n        return res.status(400).send(\"Status is required\");\n      }\n      const vendor = await storage.updateVendorStatus(req.params.id, status);\n      res.json(vendor);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  // ============================================\n  // EXPENSE CATEGORY ROUTES\n  // ============================================\n  app.get(\"/api/expense-categories\", authenticateToken, async (req, res) => {\n    try {\n      const categories = await storage.getExpenseCategories();\n      res.json(categories);\n    } catch (error: any) {\n      res.status(500).send(error.message);\n    }\n  });\n\n  app.get(\"/api/expense-categories/:id\", authenticateToken, async (req, res) => {\n    try {\n      const category = await storage.getExpenseCategoryById(req.params.id);\n      if (!category) {\n        return res.status(404).send(\"Expense category not found\");\n      }\n      res.json(category);\n    } catch (error: any) {\n      res.status(500).send(error.message);\n    }\n  });\n\n  app.post(\"/api/expense-categories\", authenticateToken, async (req, res) => {\n    try {\n      const validatedData = insertExpenseCategorySchema.parse(req.body);\n      const category = await storage.createExpenseCategory(validatedData);\n      res.json(category);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  app.put(\"/api/expense-categories/:id\", authenticateToken, async (req, res) => {\n    try {\n      const validatedData = insertExpenseCategorySchema.partial().parse(req.body);\n      const category = await storage.updateExpenseCategory(req.params.id, validatedData);\n      res.json(category);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  // ============================================\n  // EXPENSE ROUTES\n  // ============================================\n  app.get(\"/api/expenses\", authenticateToken, async (req, res) => {\n    try {\n      const { fromDate, toDate, vendorId, categoryId, status } = req.query;\n      const expenses = await storage.getExpenses({\n        fromDate: fromDate as string,\n        toDate: toDate as string,\n        vendorId: vendorId as string,\n        categoryId: categoryId as string,\n        status: status as string,\n      });\n      res.json(expenses);\n    } catch (error: any) {\n      res.status(500).send(error.message);\n    }\n  });\n\n  app.get(\"/api/expenses/:id\", authenticateToken, async (req, res) => {\n    try {\n      const expense = await storage.getExpenseById(req.params.id);\n      if (!expense) {\n        return res.status(404).send(\"Expense not found\");\n      }\n      res.json(expense);\n    } catch (error: any) {\n      res.status(500).send(error.message);\n    }\n  });\n\n  app.post(\"/api/expenses\", authenticateToken, async (req, res) => {\n    try {\n      const validatedData = insertExpenseSchema.parse(req.body);\n      const expense = await storage.createExpense(validatedData);\n      res.json(expense);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  app.put(\"/api/expenses/:id\", authenticateToken, async (req, res) => {\n    try {\n      const validatedData = insertExpenseSchema.partial().parse(req.body);\n      const expense = await storage.updateExpense(req.params.id, validatedData);\n      res.json(expense);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  app.post(\"/api/expenses/:id/mark-paid\", authenticateToken, async (req, res) => {\n    try {\n      const { paymentDate, paymentMethod, reference } = req.body;\n      if (!paymentDate || !paymentMethod) {\n        return res.status(400).send(\"Payment date and method are required\");\n      }\n      const expense = await storage.markExpensePaid(req.params.id, {\n        paymentDate: new Date(paymentDate),\n        paymentMethod,\n        reference: reference || \"\",\n      });\n      res.json(expense);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  // ============================================\n  // TEAM MEMBER ROUTES\n  // ============================================\n  app.get(\"/api/team-members\", authenticateToken, async (req, res) => {\n    try {\n      const { status } = req.query;\n      const members = await storage.getTeamMembers({\n        status: status as string,\n      });\n      res.json(members);\n    } catch (error: any) {\n      res.status(500).send(error.message);\n    }\n  });\n\n  app.get(\"/api/team-members/:id\", authenticateToken, async (req, res) => {\n    try {\n      const member = await storage.getTeamMemberById(req.params.id);\n      if (!member) {\n        return res.status(404).send(\"Team member not found\");\n      }\n      res.json(member);\n    } catch (error: any) {\n      res.status(500).send(error.message);\n    }\n  });\n\n  app.post(\"/api/team-members\", authenticateToken, async (req, res) => {\n    try {\n      const validatedData = insertTeamMemberSchema.parse(req.body);\n      const member = await storage.createTeamMember(validatedData);\n      res.json(member);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  app.put(\"/api/team-members/:id\", authenticateToken, async (req, res) => {\n    try {\n      const validatedData = insertTeamMemberSchema.partial().parse(req.body);\n      const member = await storage.updateTeamMember(req.params.id, validatedData);\n      res.json(member);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  app.put(\"/api/team-members/:id/status\", authenticateToken, async (req, res) => {\n    try {\n      const { status } = req.body;\n      if (!status) {\n        return res.status(400).send(\"Status is required\");\n      }\n      const member = await storage.updateTeamMemberStatus(req.params.id, status);\n      res.json(member);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  // ============================================\n  // SALARY PAYMENT ROUTES\n  // ============================================\n  app.get(\"/api/salaries\", authenticateToken, async (req, res) => {\n    try {\n      const { teamMemberId, month, status } = req.query;\n      const salaries = await storage.getSalaryPayments({\n        teamMemberId: teamMemberId as string,\n        month: month as string,\n        status: status as string,\n      });\n      res.json(salaries);\n    } catch (error: any) {\n      res.status(500).send(error.message);\n    }\n  });\n\n  app.get(\"/api/salaries/:id\", authenticateToken, async (req, res) => {\n    try {\n      const salary = await storage.getSalaryPaymentById(req.params.id);\n      if (!salary) {\n        return res.status(404).send(\"Salary payment not found\");\n      }\n      res.json(salary);\n    } catch (error: any) {\n      res.status(500).send(error.message);\n    }\n  });\n\n  app.post(\"/api/salaries\", authenticateToken, async (req, res) => {\n    try {\n      const validatedData = insertSalaryPaymentSchema.parse(req.body);\n      const salary = await storage.createSalaryPayment(validatedData);\n      res.json(salary);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  app.put(\"/api/salaries/:id\", authenticateToken, async (req, res) => {\n    try {\n      const validatedData = insertSalaryPaymentSchema.partial().parse(req.body);\n      const salary = await storage.updateSalaryPayment(req.params.id, validatedData);\n      res.json(salary);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  app.post(\"/api/salaries/:id/mark-paid\", authenticateToken, async (req, res) => {\n    try {\n      const { paymentDate, paymentMethod, reference } = req.body;\n      if (!paymentDate || !paymentMethod) {\n        return res.status(400).send(\"Payment date and method are required\");\n      }\n      const salary = await storage.markSalaryPaid(req.params.id, {\n        paymentDate: new Date(paymentDate),\n        paymentMethod,\n        reference: reference || \"\",\n      });\n      res.json(salary);\n    } catch (error: any) {\n      res.status(400).send(error.message);\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":20524},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  // Seed database on startup\n  const { seedDatabase } = await import(\"./seed\");\n  await seedDatabase();\n\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2316},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\nimport { format as dateFnsFormat } from \"date-fns\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n\nexport function formatDate(date: string | Date | null | undefined, formatStr: string = \"MMM dd, yyyy\"): string {\n  if (!date) return \"—\";\n  \n  try {\n    const dateObj = typeof date === \"string\" ? new Date(date) : date;\n    if (isNaN(dateObj.getTime())) {\n      return \"—\";\n    }\n    return dateFnsFormat(dateObj, formatStr);\n  } catch (error) {\n    return \"—\";\n  }\n}\n\nexport function formatCurrency(amount: number): string {\n  return new Intl.NumberFormat(\"en-IN\", {\n    style: \"currency\",\n    currency: \"INR\",\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0,\n  }).format(amount);\n}\n","size_bytes":819},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n  --opaque-button-border-intensity: -8;\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n  --background: 0 0% 100%;\n  --foreground: 0 0% 10%;\n  --border: 0 0% 90%;\n  --card: 0 0% 98%;\n  --card-foreground: 0 0% 10%;\n  --card-border: 0 0% 94%;\n  --sidebar: 0 0% 96%;\n  --sidebar-foreground: 0 0% 10%;\n  --sidebar-border: 0 0% 92%;\n  --sidebar-primary: 217 91% 60%;\n  --sidebar-primary-foreground: 0 0% 98%;\n  --sidebar-accent: 0 0% 92%;\n  --sidebar-accent-foreground: 0 0% 10%;\n  --sidebar-ring: 217 91% 60%;\n  --popover: 0 0% 94%;\n  --popover-foreground: 0 0% 10%;\n  --popover-border: 0 0% 90%;\n  --primary: 217 91% 60%;\n  --primary-foreground: 0 0% 98%;\n  --secondary: 0 0% 92%;\n  --secondary-foreground: 0 0% 10%;\n  --muted: 0 0% 94%;\n  --muted-foreground: 0 0% 35%;\n  --accent: 217 15% 92%;\n  --accent-foreground: 0 0% 10%;\n  --destructive: 0 84% 60%;\n  --destructive-foreground: 0 0% 98%;\n  --input: 0 0% 80%;\n  --ring: 217 91% 60%;\n  --chart-1: 217 91% 45%;\n  --chart-2: 142 76% 36%;\n  --chart-3: 280 65% 45%;\n  --chart-4: 25 95% 45%;\n  --chart-5: 340 75% 45%;\n  --font-sans: Open Sans, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: .5rem;\n  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 2px 4px -1px hsl(0 0% 0% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 4px 6px -1px hsl(0 0% 0% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 8px 10px -1px hsl(0 0% 0% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n  --opaque-button-border-intensity: 9;\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n  --background: 0 0% 8%;\n  --foreground: 0 0% 95%;\n  --border: 0 0% 18%;\n  --card: 0 0% 10%;\n  --card-foreground: 0 0% 95%;\n  --card-border: 0 0% 14%;\n  --sidebar: 0 0% 12%;\n  --sidebar-foreground: 0 0% 95%;\n  --sidebar-border: 0 0% 16%;\n  --sidebar-primary: 217 91% 60%;\n  --sidebar-primary-foreground: 0 0% 98%;\n  --sidebar-accent: 0 0% 16%;\n  --sidebar-accent-foreground: 0 0% 95%;\n  --sidebar-ring: 217 91% 60%;\n  --popover: 0 0% 14%;\n  --popover-foreground: 0 0% 95%;\n  --popover-border: 0 0% 18%;\n  --primary: 217 91% 60%;\n  --primary-foreground: 0 0% 98%;\n  --secondary: 0 0% 18%;\n  --secondary-foreground: 0 0% 95%;\n  --muted: 0 0% 16%;\n  --muted-foreground: 0 0% 65%;\n  --accent: 217 12% 16%;\n  --accent-foreground: 0 0% 95%;\n  --destructive: 0 84% 60%;\n  --destructive-foreground: 0 0% 98%;\n  --input: 0 0% 28%;\n  --ring: 217 91% 60%;\n  --chart-1: 217 91% 65%;\n  --chart-2: 142 76% 55%;\n  --chart-3: 280 65% 65%;\n  --chart-4: 25 95% 60%;\n  --chart-5: 340 75% 60%;\n  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 2px 4px -1px hsl(0 0% 0% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 4px 6px -1px hsl(0 0% 0% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 8px 10px -1px hsl(0 0% 0% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}\n","size_bytes":10539},"client/src/components/project-dialog.tsx":{"content":"import { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { insertProjectSchema, type InsertProject } from \"@shared/schema\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { format } from \"date-fns\";\n\ninterface ProjectDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  clientId: string;\n}\n\nexport function ProjectDialog({ open, onOpenChange, clientId }: ProjectDialogProps) {\n  const { toast } = useToast();\n\n  const form = useForm<InsertProject>({\n    resolver: zodResolver(insertProjectSchema),\n    defaultValues: {\n      clientId,\n      name: \"\",\n      scope: \"\",\n      startDate: format(new Date(), \"yyyy-MM-dd\"),\n      endDate: null,\n      status: \"ACTIVE\",\n      notes: \"\",\n    },\n  });\n\n  const mutation = useMutation({\n    mutationFn: async (data: InsertProject) => {\n      return apiRequest(\"POST\", \"/api/projects\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/projects\"] });\n      toast({\n        title: \"Project created\",\n        description: \"Successfully created project\",\n      });\n      onOpenChange(false);\n      form.reset();\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: InsertProject) => {\n    mutation.mutate(data);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl\">\n        <DialogHeader>\n          <DialogTitle>New Project</DialogTitle>\n          <DialogDescription>Add a new project for this client</DialogDescription>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"name\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Project Name *</FormLabel>\n                    <FormControl>\n                      <Input placeholder=\"Website Redesign\" {...field} data-testid=\"input-project-name\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"scope\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Scope *</FormLabel>\n                    <FormControl>\n                      <Input placeholder=\"Digital Marketing\" {...field} data-testid=\"input-scope\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"startDate\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Start Date *</FormLabel>\n                    <FormControl>\n                      <Input type=\"date\" {...field} value={field.value as string} data-testid=\"input-start-date\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"endDate\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>End Date</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"date\"\n                        {...field}\n                        value={field.value as string || \"\"}\n                        data-testid=\"input-end-date\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"status\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Status</FormLabel>\n                    <Select onValueChange={field.onChange} defaultValue={field.value}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-project-status\">\n                          <SelectValue placeholder=\"Select status\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"ACTIVE\">Active</SelectItem>\n                        <SelectItem value=\"ON_HOLD\">On Hold</SelectItem>\n                        <SelectItem value=\"COMPLETED\">Completed</SelectItem>\n                        <SelectItem value=\"CANCELLED\">Cancelled</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"notes\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Notes</FormLabel>\n                  <FormControl>\n                    <Textarea\n                      placeholder=\"Project details and requirements...\"\n                      className=\"min-h-24\"\n                      {...field}\n                      data-testid=\"input-project-notes\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"flex justify-end gap-2 pt-4\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => onOpenChange(false)}\n                data-testid=\"button-cancel\"\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\" disabled={mutation.isPending} data-testid=\"button-save-project\">\n                {mutation.isPending ? \"Creating...\" : \"Create Project\"}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":6915},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"client/src/pages/client-detail.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useRoute, Link } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { StatusBadge } from \"@/components/status-badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { ArrowLeft, Edit, Plus } from \"lucide-react\";\nimport { ClientDialog } from \"@/components/client-dialog\";\nimport { ProjectDialog } from \"@/components/project-dialog\";\nimport type { Client, Project, InvoiceWithRelations } from \"@shared/schema\";\nimport { formatDate, formatCurrency } from \"@/lib/utils\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\n\nexport default function ClientDetailPage() {\n  const [, params] = useRoute(\"/clients/:id\");\n  const clientId = params?.id;\n  const [isEditDialogOpen, setIsEditDialogOpen] = useState(false);\n  const [isProjectDialogOpen, setIsProjectDialogOpen] = useState(false);\n  const { toast } = useToast();\n\n  const { data: client, isLoading: clientLoading } = useQuery<Client>({\n    queryKey: [\"/api/clients\", clientId],\n    enabled: !!clientId,\n  });\n\n  const { data: projects, isLoading: projectsLoading } = useQuery<Project[]>({\n    queryKey: [\"/api/projects\", { clientId }],\n    enabled: !!clientId,\n  });\n\n  const { data: invoices, isLoading: invoicesLoading } = useQuery<InvoiceWithRelations[]>({\n    queryKey: [\"/api/invoices\", { clientId }],\n    enabled: !!clientId,\n  });\n\n  const statusMutation = useMutation({\n    mutationFn: async (status: string) => {\n      return apiRequest(\"PUT\", `/api/clients/${clientId}/status`, { status });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/clients\"] });\n      toast({\n        title: \"Status updated\",\n        description: \"Client status has been updated successfully\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n\n  if (clientLoading) {\n    return (\n      <div className=\"p-6 space-y-6\">\n        <Skeleton className=\"h-10 w-64\" />\n        <Skeleton className=\"h-64 w-full\" />\n      </div>\n    );\n  }\n\n  if (!client) {\n    return (\n      <div className=\"p-6\">\n        <p>Client not found</p>\n      </div>\n    );\n  }\n\n  const totalInvoiced =\n    invoices?.reduce((sum, inv) => sum + inv.totalAmount, 0) || 0;\n  const totalOutstanding =\n    invoices?.reduce((sum, inv) => sum + inv.balanceDue, 0) || 0;\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-4\">\n          <Link href=\"/clients\">\n            <Button variant=\"ghost\" size=\"icon\" data-testid=\"button-back\">\n              <ArrowLeft className=\"h-4 w-4\" />\n            </Button>\n          </Link>\n          <div>\n            <h1 className=\"text-2xl font-semibold text-foreground\" data-testid=\"text-client-name\">\n              {client.name}\n            </h1>\n            <p className=\"text-sm text-muted-foreground mt-1\">Client Details</p>\n          </div>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Select\n            value={client.status}\n            onValueChange={(value) => statusMutation.mutate(value)}\n          >\n            <SelectTrigger className=\"w-40\" data-testid=\"select-status\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"ACTIVE\">Active</SelectItem>\n              <SelectItem value=\"INACTIVE\">Inactive</SelectItem>\n              <SelectItem value=\"ARCHIVED\">Archived</SelectItem>\n            </SelectContent>\n          </Select>\n          <Button\n            variant=\"outline\"\n            onClick={() => setIsEditDialogOpen(true)}\n            data-testid=\"button-edit-client\"\n          >\n            <Edit className=\"h-4 w-4 mr-2\" />\n            Edit\n          </Button>\n        </div>\n      </div>\n\n      <Tabs defaultValue=\"overview\" className=\"space-y-4\">\n        <TabsList>\n          <TabsTrigger value=\"overview\" data-testid=\"tab-overview\">Overview</TabsTrigger>\n          <TabsTrigger value=\"projects\" data-testid=\"tab-projects\">Projects</TabsTrigger>\n          <TabsTrigger value=\"invoices\" data-testid=\"tab-invoices\">Invoices</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"overview\" className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-sm font-medium\">Total Invoiced</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-semibold font-mono\" data-testid=\"metric-total-invoiced\">\n                  {formatCurrency(totalInvoiced)}\n                </div>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-sm font-medium\">Outstanding</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-semibold font-mono\" data-testid=\"metric-outstanding\">\n                  {formatCurrency(totalOutstanding)}\n                </div>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-sm font-medium\">Projects</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-semibold\" data-testid=\"metric-projects\">\n                  {projects?.length || 0}\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          <Card>\n            <CardHeader>\n              <CardTitle>Contact Information</CardTitle>\n            </CardHeader>\n            <CardContent className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <p className=\"text-xs font-medium text-muted-foreground mb-1\">Contact Person</p>\n                <p className=\"text-sm\" data-testid=\"text-contact-name\">{client.contactName}</p>\n              </div>\n              <div>\n                <p className=\"text-xs font-medium text-muted-foreground mb-1\">Email</p>\n                <p className=\"text-sm\" data-testid=\"text-email\">{client.email}</p>\n              </div>\n              <div>\n                <p className=\"text-xs font-medium text-muted-foreground mb-1\">Phone</p>\n                <p className=\"text-sm\" data-testid=\"text-phone\">{client.phone}</p>\n              </div>\n              <div>\n                <p className=\"text-xs font-medium text-muted-foreground mb-1\">Website</p>\n                <p className=\"text-sm\" data-testid=\"text-website\">{client.companyWebsite || \"—\"}</p>\n              </div>\n              <div className=\"md:col-span-2\">\n                <p className=\"text-xs font-medium text-muted-foreground mb-1\">Address</p>\n                <p className=\"text-sm\" data-testid=\"text-address\">{client.address || \"—\"}</p>\n              </div>\n              {client.notes && (\n                <div className=\"md:col-span-2\">\n                  <p className=\"text-xs font-medium text-muted-foreground mb-1\">Notes</p>\n                  <p className=\"text-sm whitespace-pre-wrap\" data-testid=\"text-notes\">{client.notes}</p>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"projects\" className=\"space-y-4\">\n          <div className=\"flex justify-end\">\n            <Button onClick={() => setIsProjectDialogOpen(true)} data-testid=\"button-new-project\">\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Add Project\n            </Button>\n          </div>\n\n          <Card>\n            <CardContent className=\"p-0\">\n              {projectsLoading ? (\n                <div className=\"p-4 space-y-3\">\n                  {[1, 2, 3].map((i) => (\n                    <Skeleton key={i} className=\"h-12 w-full\" />\n                  ))}\n                </div>\n              ) : !projects || projects.length === 0 ? (\n                <div className=\"text-center py-12 text-muted-foreground\">\n                  <p>No projects yet</p>\n                </div>\n              ) : (\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>Project Name</TableHead>\n                      <TableHead>Scope</TableHead>\n                      <TableHead>Start Date</TableHead>\n                      <TableHead>End Date</TableHead>\n                      <TableHead>Status</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {projects.map((project) => (\n                      <TableRow key={project.id} data-testid={`row-project-${project.id}`}>\n                        <TableCell className=\"font-medium\" data-testid={`text-project-name-${project.id}`}>\n                          {project.name}\n                        </TableCell>\n                        <TableCell data-testid={`text-scope-${project.id}`}>{project.scope}</TableCell>\n                        <TableCell data-testid={`text-start-${project.id}`}>\n                          {formatDate(project.startDate)}\n                        </TableCell>\n                        <TableCell data-testid={`text-end-${project.id}`}>\n                          {formatDate(project.endDate)}\n                        </TableCell>\n                        <TableCell>\n                          <StatusBadge status={project.status} type=\"project\" />\n                        </TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              )}\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"invoices\" className=\"space-y-4\">\n          <div className=\"flex justify-end\">\n            <Link href={`/invoices/new?clientId=${clientId}`}>\n              <Button data-testid=\"button-create-invoice\">\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Create Invoice\n              </Button>\n            </Link>\n          </div>\n\n          <Card>\n            <CardContent className=\"p-0\">\n              {invoicesLoading ? (\n                <div className=\"p-4 space-y-3\">\n                  {[1, 2, 3].map((i) => (\n                    <Skeleton key={i} className=\"h-12 w-full\" />\n                  ))}\n                </div>\n              ) : !invoices || invoices.length === 0 ? (\n                <div className=\"text-center py-12 text-muted-foreground\">\n                  <p>No invoices yet</p>\n                </div>\n              ) : (\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>Invoice #</TableHead>\n                      <TableHead>Project</TableHead>\n                      <TableHead>Issue Date</TableHead>\n                      <TableHead>Due Date</TableHead>\n                      <TableHead className=\"text-right\">Total</TableHead>\n                      <TableHead className=\"text-right\">Paid</TableHead>\n                      <TableHead className=\"text-right\">Balance</TableHead>\n                      <TableHead>Status</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {invoices.map((invoice) => (\n                      <TableRow key={invoice.id} data-testid={`row-invoice-${invoice.id}`}>\n                        <TableCell className=\"font-mono text-sm\" data-testid={`text-invoice-number-${invoice.id}`}>\n                          {invoice.invoiceNumber}\n                        </TableCell>\n                        <TableCell data-testid={`text-project-${invoice.id}`}>\n                          {invoice.projectName || \"—\"}\n                        </TableCell>\n                        <TableCell data-testid={`text-issue-${invoice.id}`}>\n                          {formatDate(invoice.issueDate)}\n                        </TableCell>\n                        <TableCell data-testid={`text-due-${invoice.id}`}>\n                          {formatDate(invoice.dueDate)}\n                        </TableCell>\n                        <TableCell className=\"text-right font-mono\" data-testid={`text-total-${invoice.id}`}>\n                          {formatCurrency(invoice.totalAmount)}\n                        </TableCell>\n                        <TableCell className=\"text-right font-mono\" data-testid={`text-paid-${invoice.id}`}>\n                          {formatCurrency(invoice.amountPaid)}\n                        </TableCell>\n                        <TableCell className=\"text-right font-mono\" data-testid={`text-balance-${invoice.id}`}>\n                          {formatCurrency(invoice.balanceDue)}\n                        </TableCell>\n                        <TableCell>\n                          <StatusBadge status={invoice.status} type=\"invoice\" />\n                        </TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              )}\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n\n      <ClientDialog\n        open={isEditDialogOpen}\n        onOpenChange={setIsEditDialogOpen}\n        client={client}\n      />\n      <ProjectDialog\n        open={isProjectDialogOpen}\n        onOpenChange={setIsProjectDialogOpen}\n        clientId={clientId!}\n      />\n    </div>\n  );\n}\n","size_bytes":13955},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/mark-salary-paid-dialog.tsx":{"content":"import { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { z } from \"zod\";\nimport type { SalaryPayment } from \"@shared/schema\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { formatCurrency } from \"@/lib/utils\";\n\nconst markPaidSchema = z.object({\n  paymentDate: z.string().min(1, \"Payment date is required\"),\n  paymentMethod: z.string().min(1, \"Payment method is required\"),\n  reference: z.string(),\n});\n\ntype MarkPaidForm = z.infer<typeof markPaidSchema>;\n\ninterface MarkSalaryPaidDialogProps {\n  salary: SalaryPayment;\n  open: boolean;\n  onClose: () => void;\n}\n\nexport function MarkSalaryPaidDialog({ salary, open, onClose }: MarkSalaryPaidDialogProps) {\n  const { toast } = useToast();\n\n  const form = useForm<MarkPaidForm>({\n    resolver: zodResolver(markPaidSchema),\n    defaultValues: {\n      paymentDate: new Date().toISOString().split(\"T\")[0],\n      paymentMethod: \"BANK_TRANSFER\",\n      reference: \"\",\n    },\n  });\n\n  const markPaidMutation = useMutation({\n    mutationFn: async (data: MarkPaidForm) => {\n      return apiRequest(`/api/salaries/${salary.id}/mark-paid`, \"POST\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/salaries\"] });\n      toast({ title: \"Salary marked as paid\" });\n      onClose();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const onSubmit = (data: MarkPaidForm) => {\n    markPaidMutation.mutate(data);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle data-testid=\"dialog-title\">Mark Salary as Paid</DialogTitle>\n        </DialogHeader>\n\n        <div className=\"mb-4 p-4 bg-muted rounded-lg\">\n          <div className=\"text-sm text-muted-foreground\">Amount to pay</div>\n          <div className=\"text-2xl font-semibold mt-1\" data-testid=\"salary-amount\">\n            {formatCurrency(Number(salary.amount), salary.currency)}\n          </div>\n          <div className=\"text-sm text-muted-foreground mt-2\">\n            For month: {salary.month}\n          </div>\n        </div>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"paymentDate\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Payment Date</FormLabel>\n                  <FormControl>\n                    <Input {...field} type=\"date\" data-testid=\"input-payment-date\" />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"paymentMethod\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Payment Method</FormLabel>\n                  <Select onValueChange={field.onChange} value={field.value}>\n                    <FormControl>\n                      <SelectTrigger data-testid=\"select-payment-method\">\n                        <SelectValue placeholder=\"Select method\" />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      <SelectItem value=\"BANK_TRANSFER\">Bank Transfer</SelectItem>\n                      <SelectItem value=\"UPI\">UPI</SelectItem>\n                      <SelectItem value=\"CASH\">Cash</SelectItem>\n                      <SelectItem value=\"CARD\">Card</SelectItem>\n                      <SelectItem value=\"OTHER\">Other</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"reference\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Reference (Optional)</FormLabel>\n                  <FormControl>\n                    <Input {...field} placeholder=\"Transaction ID or reference\" data-testid=\"input-reference\" />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <DialogFooter>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={onClose}\n                disabled={markPaidMutation.isPending}\n                data-testid=\"button-cancel\"\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\" disabled={markPaidMutation.isPending} data-testid=\"button-submit\">\n                {markPaidMutation.isPending ? \"Marking...\" : \"Mark as Paid\"}\n              </Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":5523},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/pages/invoice-detail.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useRoute, Link } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { StatusBadge } from \"@/components/status-badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { ArrowLeft, Plus } from \"lucide-react\";\nimport { PaymentDialog } from \"@/components/payment-dialog\";\nimport type { InvoiceWithRelations, Payment } from \"@shared/schema\";\nimport { formatDate, formatCurrency } from \"@/lib/utils\";\n\nexport default function InvoiceDetailPage() {\n  const [, params] = useRoute(\"/invoices/:id\");\n  const invoiceId = params?.id;\n  const [isPaymentDialogOpen, setIsPaymentDialogOpen] = useState(false);\n\n  const { data: invoice, isLoading } = useQuery<InvoiceWithRelations>({\n    queryKey: [\"/api/invoices\", invoiceId],\n    enabled: !!invoiceId,\n  });\n\n  const { data: payments } = useQuery<Payment[]>({\n    queryKey: [\"/api/invoices\", invoiceId, \"payments\"],\n    enabled: !!invoiceId,\n  });\n\n\n  if (isLoading) {\n    return (\n      <div className=\"p-6 space-y-6\">\n        <Skeleton className=\"h-10 w-64\" />\n        <Skeleton className=\"h-64 w-full\" />\n      </div>\n    );\n  }\n\n  if (!invoice) {\n    return (\n      <div className=\"p-6\">\n        <p>Invoice not found</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-4\">\n          <Link href=\"/invoices\">\n            <Button variant=\"ghost\" size=\"icon\" data-testid=\"button-back\">\n              <ArrowLeft className=\"h-4 w-4\" />\n            </Button>\n          </Link>\n          <div>\n            <h1 className=\"text-2xl font-semibold text-foreground font-mono\" data-testid=\"text-invoice-number\">\n              {invoice.invoiceNumber}\n            </h1>\n            <p className=\"text-sm text-muted-foreground mt-1\">Invoice Details</p>\n          </div>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <StatusBadge status={invoice.status} type=\"invoice\" />\n          {invoice.status !== \"PAID\" && (\n            <Button onClick={() => setIsPaymentDialogOpen(true)} data-testid=\"button-record-payment\">\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Record Payment\n            </Button>\n          )}\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        <div className=\"lg:col-span-2 space-y-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Invoice Information</CardTitle>\n            </CardHeader>\n            <CardContent className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <p className=\"text-xs font-medium text-muted-foreground mb-1\">Client</p>\n                <p className=\"text-sm font-medium\" data-testid=\"text-client\">{invoice.clientName}</p>\n              </div>\n              <div>\n                <p className=\"text-xs font-medium text-muted-foreground mb-1\">Project</p>\n                <p className=\"text-sm\" data-testid=\"text-project\">{invoice.projectName || \"—\"}</p>\n              </div>\n              <div>\n                <p className=\"text-xs font-medium text-muted-foreground mb-1\">Issue Date</p>\n                <p className=\"text-sm\" data-testid=\"text-issue-date\">\n                  {formatDate(invoice.issueDate, \"MMMM dd, yyyy\")}\n                </p>\n              </div>\n              <div>\n                <p className=\"text-xs font-medium text-muted-foreground mb-1\">Due Date</p>\n                <p className=\"text-sm\" data-testid=\"text-due-date\">\n                  {formatDate(invoice.dueDate, \"MMMM dd, yyyy\")}\n                </p>\n              </div>\n              {invoice.notes && (\n                <div className=\"col-span-2\">\n                  <p className=\"text-xs font-medium text-muted-foreground mb-1\">Notes</p>\n                  <p className=\"text-sm whitespace-pre-wrap\" data-testid=\"text-notes\">{invoice.notes}</p>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle>Line Items</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Description</TableHead>\n                    <TableHead className=\"text-right\">Quantity</TableHead>\n                    <TableHead className=\"text-right\">Unit Price</TableHead>\n                    <TableHead className=\"text-right\">Total</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {invoice.lineItems?.map((item, index) => (\n                    <TableRow key={item.id} data-testid={`row-line-item-${index}`}>\n                      <TableCell data-testid={`text-description-${index}`}>{item.description}</TableCell>\n                      <TableCell className=\"text-right\" data-testid={`text-quantity-${index}`}>{item.quantity}</TableCell>\n                      <TableCell className=\"text-right font-mono\" data-testid={`text-unit-price-${index}`}>\n                        {formatCurrency(item.unitPrice)}\n                      </TableCell>\n                      <TableCell className=\"text-right font-mono\" data-testid={`text-line-total-${index}`}>\n                        {formatCurrency(item.lineTotal)}\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n\n              <Separator className=\"my-4\" />\n\n              <div className=\"flex justify-end\">\n                <div className=\"w-80 space-y-2\">\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-muted-foreground\">Subtotal:</span>\n                    <span className=\"font-mono\" data-testid=\"text-subtotal\">{formatCurrency(invoice.subtotal)}</span>\n                  </div>\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-muted-foreground\">Tax:</span>\n                    <span className=\"font-mono\" data-testid=\"text-tax\">{formatCurrency(invoice.taxAmount)}</span>\n                  </div>\n                  <Separator />\n                  <div className=\"flex justify-between text-lg font-semibold\">\n                    <span>Total Amount:</span>\n                    <span className=\"font-mono\" data-testid=\"text-total\">{formatCurrency(invoice.totalAmount)}</span>\n                  </div>\n                  <div className=\"flex justify-between text-sm text-green-600\">\n                    <span>Paid:</span>\n                    <span className=\"font-mono\" data-testid=\"text-paid\">{formatCurrency(invoice.amountPaid)}</span>\n                  </div>\n                  <div className=\"flex justify-between text-lg font-semibold\">\n                    <span>Balance Due:</span>\n                    <span className=\"font-mono\" data-testid=\"text-balance\">{formatCurrency(invoice.balanceDue)}</span>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        <div className=\"space-y-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Summary</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div>\n                <p className=\"text-xs font-medium text-muted-foreground mb-1\">Total Amount</p>\n                <p className=\"text-2xl font-semibold font-mono\" data-testid=\"metric-total\">\n                  {formatCurrency(invoice.totalAmount)}\n                </p>\n              </div>\n              <div>\n                <p className=\"text-xs font-medium text-muted-foreground mb-1\">Amount Paid</p>\n                <p className=\"text-2xl font-semibold font-mono text-green-600\" data-testid=\"metric-paid\">\n                  {formatCurrency(invoice.amountPaid)}\n                </p>\n              </div>\n              <div>\n                <p className=\"text-xs font-medium text-muted-foreground mb-1\">Balance Due</p>\n                <p className=\"text-2xl font-semibold font-mono text-orange-600\" data-testid=\"metric-balance\">\n                  {formatCurrency(invoice.balanceDue)}\n                </p>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle>Payment History</CardTitle>\n            </CardHeader>\n            <CardContent>\n              {!payments || payments.length === 0 ? (\n                <p className=\"text-sm text-muted-foreground text-center py-4\">No payments yet</p>\n              ) : (\n                <div className=\"space-y-3\">\n                  {payments.map((payment) => (\n                    <div\n                      key={payment.id}\n                      className=\"flex justify-between items-start border-b pb-3 last:border-0\"\n                      data-testid={`payment-${payment.id}`}\n                    >\n                      <div>\n                        <p className=\"text-sm font-medium\" data-testid={`payment-amount-${payment.id}`}>\n                          {formatCurrency(payment.amount)}\n                        </p>\n                        <p className=\"text-xs text-muted-foreground\" data-testid={`payment-date-${payment.id}`}>\n                          {formatDate(payment.paymentDate)}\n                        </p>\n                        <p className=\"text-xs text-muted-foreground\" data-testid={`payment-method-${payment.id}`}>\n                          {payment.method ? payment.method.replace(/_/g, \" \") : \"—\"}\n                        </p>\n                        {payment.reference && (\n                          <p className=\"text-xs text-muted-foreground\" data-testid={`payment-reference-${payment.id}`}>\n                            Ref: {payment.reference}\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n\n      <PaymentDialog\n        open={isPaymentDialogOpen}\n        onOpenChange={setIsPaymentDialogOpen}\n        invoiceId={invoiceId!}\n        maxAmount={invoice.balanceDue}\n      />\n    </div>\n  );\n}\n","size_bytes":10587},"client/src/components/protected-route.tsx":{"content":"import { useAuth } from \"@/lib/auth\";\nimport { Redirect } from \"wouter\";\nimport type { ReactNode } from \"react\";\n\ninterface ProtectedRouteProps {\n  children: ReactNode;\n}\n\nexport function ProtectedRoute({ children }: ProtectedRouteProps) {\n  const { isAuthenticated } = useAuth();\n\n  if (!isAuthenticated) {\n    return <Redirect to=\"/login\" />;\n  }\n\n  return <>{children}</>;\n}\n","size_bytes":378},"client/src/components/status-badge.tsx":{"content":"import { Badge } from \"@/components/ui/badge\";\nimport type { \n  clientStatuses, \n  projectStatuses, \n  invoiceStatuses \n} from \"@shared/schema\";\n\ntype ClientStatus = typeof clientStatuses[number];\ntype ProjectStatus = typeof projectStatuses[number];\ntype InvoiceStatus = typeof invoiceStatuses[number];\n\ninterface StatusBadgeProps {\n  status?: ClientStatus | ProjectStatus | InvoiceStatus | null;\n  type: \"client\" | \"project\" | \"invoice\";\n}\n\nexport function StatusBadge({ status, type }: StatusBadgeProps) {\n  if (!status) {\n    return (\n      <Badge\n        variant=\"outline\"\n        className=\"bg-gray-100 text-gray-800 border-gray-200 text-xs font-medium px-2 py-0.5 rounded-full border\"\n        data-testid=\"badge-status-unknown\"\n      >\n        Unknown\n      </Badge>\n    );\n  }\n\n  const getVariantAndColor = () => {\n    if (type === \"client\") {\n      switch (status as ClientStatus) {\n        case \"ACTIVE\":\n          return \"bg-green-100 text-green-800 border-green-200\";\n        case \"INACTIVE\":\n          return \"bg-gray-100 text-gray-800 border-gray-200\";\n        case \"ARCHIVED\":\n          return \"bg-slate-100 text-slate-800 border-slate-200\";\n        default:\n          return \"bg-gray-100 text-gray-800 border-gray-200\";\n      }\n    }\n\n    if (type === \"project\") {\n      switch (status as ProjectStatus) {\n        case \"ACTIVE\":\n          return \"bg-blue-100 text-blue-800 border-blue-200\";\n        case \"ON_HOLD\":\n          return \"bg-yellow-100 text-yellow-800 border-yellow-200\";\n        case \"COMPLETED\":\n          return \"bg-green-100 text-green-800 border-green-200\";\n        case \"CANCELLED\":\n          return \"bg-red-100 text-red-800 border-red-200\";\n        default:\n          return \"bg-gray-100 text-gray-800 border-gray-200\";\n      }\n    }\n\n    // Invoice statuses\n    switch (status as InvoiceStatus) {\n      case \"PAID\":\n        return \"bg-green-100 text-green-800 border-green-200\";\n      case \"SENT\":\n        return \"bg-blue-100 text-blue-800 border-blue-200\";\n      case \"OVERDUE\":\n        return \"bg-red-100 text-red-800 border-red-200\";\n      case \"DRAFT\":\n        return \"bg-gray-100 text-gray-800 border-gray-200\";\n      case \"PARTIALLY_PAID\":\n        return \"bg-orange-100 text-orange-800 border-orange-200\";\n      default:\n        return \"bg-gray-100 text-gray-800 border-gray-200\";\n    }\n  };\n\n  const formatStatus = (s: string) => {\n    return s.replace(/_/g, \" \").toLowerCase().replace(/\\b\\w/g, (l) => l.toUpperCase());\n  };\n\n  return (\n    <Badge\n      variant=\"outline\"\n      className={`${getVariantAndColor()} text-xs font-medium px-2 py-0.5 rounded-full border`}\n      data-testid={`badge-status-${status.toLowerCase()}`}\n    >\n      {formatStatus(status)}\n    </Badge>\n  );\n}\n","size_bytes":2723},"client/src/components/salary-payment-dialog.tsx":{"content":"import { useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { insertSalaryPaymentSchema, type InsertSalaryPayment, type SalaryPayment, type TeamMember } from \"@shared/schema\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\n\ninterface SalaryPaymentDialogProps {\n  salary?: SalaryPayment | null;\n  open: boolean;\n  onClose: () => void;\n}\n\nexport function SalaryPaymentDialog({ salary, open, onClose }: SalaryPaymentDialogProps) {\n  const { toast } = useToast();\n\n  const { data: teamMembers = [] } = useQuery<TeamMember[]>({\n    queryKey: [\"/api/team-members\"],\n  });\n\n  const form = useForm<InsertSalaryPayment>({\n    resolver: zodResolver(insertSalaryPaymentSchema),\n    defaultValues: {\n      teamMemberId: \"\",\n      month: \"\",\n      paymentDate: null,\n      amount: 0,\n      currency: \"INR\",\n      status: \"PENDING\",\n      paymentMethod: null,\n      reference: \"\",\n      notes: \"\",\n    },\n  });\n\n  useEffect(() => {\n    if (salary) {\n      form.reset({\n        teamMemberId: salary.teamMemberId,\n        month: salary.month,\n        paymentDate: salary.paymentDate ? new Date(salary.paymentDate).toISOString().split(\"T\")[0] : null,\n        amount: Number(salary.amount),\n        currency: salary.currency,\n        status: salary.status,\n        paymentMethod: salary.paymentMethod,\n        reference: salary.reference || \"\",\n        notes: salary.notes || \"\",\n      });\n    } else {\n      const now = new Date();\n      const currentMonth = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, \"0\")}`;\n      form.reset({\n        teamMemberId: \"\",\n        month: currentMonth,\n        paymentDate: null,\n        amount: 0,\n        currency: \"INR\",\n        status: \"PENDING\",\n        paymentMethod: null,\n        reference: \"\",\n        notes: \"\",\n      });\n    }\n  }, [salary, form]);\n\n  const createMutation = useMutation({\n    mutationFn: async (data: InsertSalaryPayment) => {\n      return apiRequest(\"/api/salaries\", \"POST\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/salaries\"] });\n      toast({ title: \"Salary payment created successfully\" });\n      onClose();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async (data: InsertSalaryPayment) => {\n      return apiRequest(`/api/salaries/${salary?.id}`, \"PUT\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/salaries\"] });\n      toast({ title: \"Salary payment updated successfully\" });\n      onClose();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  const onSubmit = (data: InsertSalaryPayment) => {\n    if (salary) {\n      updateMutation.mutate(data);\n    } else {\n      createMutation.mutate(data);\n    }\n  };\n\n  const isPending = createMutation.isPending || updateMutation.isPending;\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle data-testid=\"dialog-title\">\n            {salary ? \"Edit Salary Payment\" : \"Record Salary Payment\"}\n          </DialogTitle>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"teamMemberId\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Team Member</FormLabel>\n                  <Select onValueChange={field.onChange} value={field.value}>\n                    <FormControl>\n                      <SelectTrigger data-testid=\"select-team-member\">\n                        <SelectValue placeholder=\"Select team member\" />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      {teamMembers.map((member) => (\n                        <SelectItem key={member.id} value={member.id}>\n                          {member.name} - {member.roleTitle}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"month\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Month (YYYY-MM)</FormLabel>\n                    <FormControl>\n                      <Input {...field} type=\"month\" data-testid=\"input-month\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"amount\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Amount</FormLabel>\n                    <FormControl>\n                      <Input\n                        {...field}\n                        type=\"number\"\n                        step=\"0.01\"\n                        onChange={(e) => field.onChange(parseFloat(e.target.value))}\n                        data-testid=\"input-amount\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"currency\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Currency</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-currency\">\n                          <SelectValue placeholder=\"Select currency\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"INR\">INR</SelectItem>\n                        <SelectItem value=\"USD\">USD</SelectItem>\n                        <SelectItem value=\"EUR\">EUR</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"status\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Status</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-status\">\n                          <SelectValue placeholder=\"Select status\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"PENDING\">Pending</SelectItem>\n                        <SelectItem value=\"PAID\">Paid</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"notes\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Notes</FormLabel>\n                  <FormControl>\n                    <Textarea {...field} rows={3} data-testid=\"input-notes\" />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <DialogFooter>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={onClose}\n                disabled={isPending}\n                data-testid=\"button-cancel\"\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\" disabled={isPending} data-testid=\"button-submit\">\n                {isPending ? \"Saving...\" : salary ? \"Update Payment\" : \"Record Payment\"}\n              </Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":9298},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/pages/expenses.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Plus, Search, Calendar } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ExpenseDialog } from \"@/components/expense-dialog\";\nimport { MarkExpensePaidDialog } from \"@/components/mark-expense-paid-dialog\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { formatCurrency, formatDate } from \"@/lib/utils\";\nimport type { Expense, Vendor, ExpenseCategory } from \"@shared/schema\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\n\nexport default function ExpensesPage() {\n  const [showDialog, setShowDialog] = useState(false);\n  const [editingExpense, setEditingExpense] = useState<Expense | null>(null);\n  const [markingPaidExpense, setMarkingPaidExpense] = useState<Expense | null>(null);\n  const [statusFilter, setStatusFilter] = useState(\"\");\n  const [vendorFilter, setVendorFilter] = useState(\"\");\n  const [categoryFilter, setCategoryFilter] = useState(\"\");\n\n  const { data: expenses = [], isLoading } = useQuery<Expense[]>({\n    queryKey: [\"/api/expenses\", { status: statusFilter, vendorId: vendorFilter, categoryId: categoryFilter }],\n  });\n\n  const { data: vendors = [] } = useQuery<Vendor[]>({\n    queryKey: [\"/api/vendors\"],\n  });\n\n  const { data: categories = [] } = useQuery<ExpenseCategory[]>({\n    queryKey: [\"/api/expense-categories\"],\n  });\n\n  const handleEdit = (expense: Expense) => {\n    setEditingExpense(expense);\n    setShowDialog(true);\n  };\n\n  const handleCloseDialog = () => {\n    setShowDialog(false);\n    setEditingExpense(null);\n  };\n\n  const handleMarkPaid = (expense: Expense) => {\n    setMarkingPaidExpense(expense);\n  };\n\n  const getStatusBadgeVariant = (status: string) => {\n    switch (status) {\n      case \"PAID\":\n        return \"default\";\n      case \"DUE\":\n        return \"secondary\";\n      case \"OVERDUE\":\n        return \"destructive\";\n      default:\n        return \"outline\";\n    }\n  };\n\n  const getVendorName = (vendorId: string | null) => {\n    if (!vendorId) return \"—\";\n    const vendor = vendors.find((v) => v.id === vendorId);\n    return vendor?.name || \"Unknown\";\n  };\n\n  const getCategoryName = (categoryId: string | null) => {\n    if (!categoryId) return \"—\";\n    const category = categories.find((c) => c.id === categoryId);\n    return category?.name || \"Unknown\";\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-muted-foreground\">Loading expenses...</div>\n      </div>\n    );\n  }\n\n  const totalExpenses = expenses.reduce((sum, exp) => sum + Number(exp.amount), 0);\n  const paidExpenses = expenses\n    .filter((exp) => exp.status === \"PAID\")\n    .reduce((sum, exp) => sum + Number(exp.amount), 0);\n  const dueExpenses = expenses\n    .filter((exp) => exp.status === \"DUE\" || exp.status === \"OVERDUE\")\n    .reduce((sum, exp) => sum + Number(exp.amount), 0);\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-semibold\" data-testid=\"page-title\">Expenses</h1>\n          <p className=\"text-sm text-muted-foreground mt-1\">\n            Track and manage business expenses\n          </p>\n        </div>\n        <Button onClick={() => setShowDialog(true)} data-testid=\"button-add-expense\">\n          <Plus className=\"h-4 w-4 mr-2\" />\n          Add Expense\n        </Button>\n      </div>\n\n      <div className=\"grid grid-cols-3 gap-4\">\n        <div className=\"border rounded-lg p-4\">\n          <div className=\"text-sm text-muted-foreground\">Total Expenses</div>\n          <div className=\"text-2xl font-semibold mt-1\" data-testid=\"total-expenses\">\n            {formatCurrency(totalExpenses)}\n          </div>\n        </div>\n        <div className=\"border rounded-lg p-4\">\n          <div className=\"text-sm text-muted-foreground\">Paid</div>\n          <div className=\"text-2xl font-semibold mt-1 text-green-600\" data-testid=\"paid-expenses\">\n            {formatCurrency(paidExpenses)}\n          </div>\n        </div>\n        <div className=\"border rounded-lg p-4\">\n          <div className=\"text-sm text-muted-foreground\">Due</div>\n          <div className=\"text-2xl font-semibold mt-1 text-orange-600\" data-testid=\"due-expenses\">\n            {formatCurrency(dueExpenses)}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex gap-4 items-center\">\n        <Select value={statusFilter} onValueChange={setStatusFilter}>\n          <SelectTrigger className=\"w-[180px]\" data-testid=\"select-status-filter\">\n            <SelectValue placeholder=\"All Status\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">All Status</SelectItem>\n            <SelectItem value=\"PAID\">Paid</SelectItem>\n            <SelectItem value=\"DUE\">Due</SelectItem>\n            <SelectItem value=\"OVERDUE\">Overdue</SelectItem>\n          </SelectContent>\n        </Select>\n\n        <Select value={vendorFilter} onValueChange={setVendorFilter}>\n          <SelectTrigger className=\"w-[200px]\" data-testid=\"select-vendor-filter\">\n            <SelectValue placeholder=\"All Vendors\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">All Vendors</SelectItem>\n            {vendors.map((vendor) => (\n              <SelectItem key={vendor.id} value={vendor.id}>\n                {vendor.name}\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n\n        <Select value={categoryFilter} onValueChange={setCategoryFilter}>\n          <SelectTrigger className=\"w-[200px]\" data-testid=\"select-category-filter\">\n            <SelectValue placeholder=\"All Categories\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">All Categories</SelectItem>\n            {categories.map((category) => (\n              <SelectItem key={category.id} value={category.id}>\n                {category.name}\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n      </div>\n\n      <div className=\"border rounded-lg overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className=\"bg-muted/50 sticky top-0 z-10\">\n              <tr>\n                <th className=\"text-left px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                  Date\n                </th>\n                <th className=\"text-left px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                  Description\n                </th>\n                <th className=\"text-left px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                  Vendor\n                </th>\n                <th className=\"text-left px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                  Category\n                </th>\n                <th className=\"text-right px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                  Amount\n                </th>\n                <th className=\"text-left px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                  Status\n                </th>\n                <th className=\"text-right px-4 py-3 text-sm font-medium uppercase tracking-wide\">\n                  Actions\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {expenses.length === 0 ? (\n                <tr>\n                  <td colSpan={7} className=\"px-4 py-12 text-center text-muted-foreground\">\n                    No expenses found. Click \"Add Expense\" to create one.\n                  </td>\n                </tr>\n              ) : (\n                expenses.map((expense) => (\n                  <tr\n                    key={expense.id}\n                    className=\"border-b hover-elevate active-elevate-2 cursor-pointer\"\n                    onClick={() => handleEdit(expense)}\n                    data-testid={`expense-row-${expense.id}`}\n                  >\n                    <td className=\"px-4 py-3\">\n                      <div className=\"text-sm\" data-testid={`expense-date-${expense.id}`}>\n                        {formatDate(expense.expenseDate)}\n                      </div>\n                    </td>\n                    <td className=\"px-4 py-3\">\n                      <div className=\"text-sm font-medium\" data-testid={`expense-description-${expense.id}`}>\n                        {expense.description}\n                      </div>\n                    </td>\n                    <td className=\"px-4 py-3\">\n                      <div className=\"text-sm\" data-testid={`expense-vendor-${expense.id}`}>\n                        {getVendorName(expense.vendorId)}\n                      </div>\n                    </td>\n                    <td className=\"px-4 py-3\">\n                      <div className=\"text-sm\" data-testid={`expense-category-${expense.id}`}>\n                        {getCategoryName(expense.categoryId)}\n                      </div>\n                    </td>\n                    <td className=\"px-4 py-3 text-right\">\n                      <div className=\"text-sm font-medium tabular-nums\" data-testid={`expense-amount-${expense.id}`}>\n                        {formatCurrency(Number(expense.amount), expense.currency)}\n                      </div>\n                    </td>\n                    <td className=\"px-4 py-3\">\n                      <Badge\n                        variant={getStatusBadgeVariant(expense.status)}\n                        data-testid={`expense-status-${expense.id}`}\n                      >\n                        {expense.status}\n                      </Badge>\n                    </td>\n                    <td className=\"px-4 py-3 text-right\">\n                      <div className=\"flex justify-end gap-2\" onClick={(e) => e.stopPropagation()}>\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          onClick={() => handleEdit(expense)}\n                          data-testid={`button-edit-${expense.id}`}\n                        >\n                          Edit\n                        </Button>\n                        {expense.status !== \"PAID\" && (\n                          <Button\n                            size=\"sm\"\n                            onClick={() => handleMarkPaid(expense)}\n                            data-testid={`button-mark-paid-${expense.id}`}\n                          >\n                            Mark Paid\n                          </Button>\n                        )}\n                      </div>\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {showDialog && (\n        <ExpenseDialog\n          expense={editingExpense}\n          open={showDialog}\n          onClose={handleCloseDialog}\n        />\n      )}\n\n      {markingPaidExpense && (\n        <MarkExpensePaidDialog\n          expense={markingPaidExpense}\n          open={!!markingPaidExpense}\n          onClose={() => setMarkingPaidExpense(null)}\n        />\n      )}\n    </div>\n  );\n}\n","size_bytes":11329},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"design_guidelines.md":{"content":"# Agency Control Center - Design Guidelines\n\n## Design Approach\n\n**Reference-Based Approach**: Internal productivity tool inspired by Google Sheets, Airtable, and Linear for clean, data-focused interfaces.\n\n**Core Principle**: Spreadsheet-like functionality with modern SaaS aesthetics - prioritizing data density, scanability, and efficient workflows over visual flair.\n\n---\n\n## Layout System\n\n**Spacing Units**: Tailwind units of 2, 4, 6, and 8 (p-2, p-4, p-6, p-8, gap-4, space-y-6, etc.)\n\n**Page Structure**:\n- Top navigation bar (fixed, h-16) with app name and user menu\n- Left sidebar (fixed, w-64) with navigation sections\n- Main content area with consistent padding (p-6 to p-8)\n\n---\n\n## Typography\n\n**Font Family**: \n- Primary: Inter or System UI stack via Google Fonts\n- Monospace: For invoice numbers, amounts (JetBrains Mono or SF Mono)\n\n**Hierarchy**:\n- Page titles: text-2xl font-semibold\n- Section headers: text-lg font-medium\n- Table headers: text-sm font-medium uppercase tracking-wide\n- Body text: text-sm\n- Labels: text-xs font-medium text-gray-600\n- Numbers/amounts: text-sm tabular-nums (for alignment)\n\n---\n\n## Component Library\n\n### Navigation\n- **Sidebar**: List-based navigation with icons (Heroicons), active state with background and border-left accent\n- **Top Bar**: Minimal with logo/app name (left), user dropdown (right)\n\n### Tables\n- **Structure**: Full-width tables with sticky headers (sticky top-0 z-10)\n- **Cells**: Compact padding (px-4 py-3), clear borders (border-b)\n- **Features**: Sortable column headers (with sort icons), hover row state, alternating row backgrounds (optional for better scanning)\n- **Controls**: Search input, filter dropdowns, action buttons above table\n\n### Status Badges\n- **Shape**: Rounded-full px-3 py-1 text-xs font-medium\n- **Types**:\n  - Paid: green background\n  - Due/Sent: blue background\n  - Overdue: red background\n  - Draft: gray background\n  - Partially Paid: yellow/orange background\n  - Active: green outline or filled\n  - Inactive: gray outline\n  - Archived: dark gray\n\n### Forms\n- **Modals/Overlays**: Clean overlay with max-width container, close button, header/body/footer sections\n- **Inputs**: Standard text inputs with labels, helper text, error states\n- **Line Items Repeater**: Table-like structure with add/remove row buttons\n- **Buttons**: Primary (filled), Secondary (outlined), Danger (red), sizes sm/md/lg\n\n### Cards\n- **Dashboard Cards**: Bordered cards with title, large metric number, subtitle/trend indicator\n- **Client Detail Sections**: Card-based layout with tabs or distinct sections\n\n### Data Display\n- **Summary Cards**: Grid layout (grid-cols-2 md:grid-cols-4) for dashboard metrics\n- **Detail Views**: Two-column layout for info display (label: value pairs)\n- **Empty States**: Centered content with icon, message, and action button\n\n---\n\n## Key Interactions\n\n- **Table Sorting**: Click column header to sort ascending/descending (icon indicator)\n- **Filters**: Dropdown menus that update table content\n- **Search**: Debounced live search in table views\n- **Status Changes**: Dropdown or button group for quick status updates\n- **Payment Recording**: Modal form with amount, date, method fields\n\n---\n\n## Images\n\n**No hero images** - This is an internal productivity tool. Focus on clean, functional layouts with occasional empty state illustrations or icons.\n\n---\n\n## Animations\n\n**Minimal and functional only**:\n- Modal fade-in/out\n- Dropdown slide animations\n- Loading spinners for async operations\n- Success/error toast notifications (slide-in from top-right)","size_bytes":3566},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"server/storage.ts":{"content":"// Using Drizzle ORM for database operations - blueprint:javascript_database\nimport { db } from \"./db\";\nimport {\n  users,\n  clients,\n  projects,\n  invoices,\n  invoiceLineItems,\n  payments,\n  services,\n  vendors,\n  expenseCategories,\n  expenses,\n  teamMembers,\n  salaryPayments,\n  type User,\n  type Client,\n  type Project,\n  type Invoice,\n  type InvoiceLineItem,\n  type Payment,\n  type Service,\n  type Vendor,\n  type ExpenseCategory,\n  type Expense,\n  type TeamMember,\n  type SalaryPayment,\n  type InsertClient,\n  type InsertProject,\n  type InsertPayment,\n  type InsertService,\n  type InsertVendor,\n  type InsertExpenseCategory,\n  type InsertExpense,\n  type InsertTeamMember,\n  type InsertSalaryPayment,\n  type ClientWithStats,\n  type InvoiceWithRelations,\n  type VendorWithStats,\n  type ExpenseWithRelations,\n  type DashboardSummary,\n  type FinancialSummary,\n} from \"@shared/schema\";\nimport { eq, and, gte, lte, sql, desc, ilike, or, isNull} from \"drizzle-orm\";\nimport { nanoid } from \"nanoid\";\n\n// Helper to convert Drizzle decimal strings to numbers\nconst toNumber = (value: string | null | undefined): number => {\n  if (!value) return 0;\n  return parseFloat(value);\n};\n\nexport interface IStorage {\n  // User methods\n  getUserByEmail(email: string): Promise<User | undefined>;\n  createUser(user: { name: string; email: string; passwordHash: string; role: string }): Promise<User>;\n  \n  // Client methods\n  getClients(filters?: { status?: string; search?: string }): Promise<ClientWithStats[]>;\n  getClientById(id: string): Promise<Client | undefined>;\n  createClient(client: InsertClient): Promise<Client>;\n  updateClient(id: string, client: Partial<InsertClient>): Promise<Client>;\n  updateClientStatus(id: string, status: string): Promise<Client>;\n  \n  // Project methods\n  getProjects(filters?: { clientId?: string }): Promise<Project[]>;\n  getProjectById(id: string): Promise<Project | undefined>;\n  createProject(project: InsertProject): Promise<Project>;\n  updateProject(id: string, project: Partial<InsertProject>): Promise<Project>;\n  \n  // Invoice methods\n  getInvoices(filters?: { clientId?: string; status?: string; search?: string }): Promise<InvoiceWithRelations[]>;\n  getInvoiceById(id: string): Promise<InvoiceWithRelations | undefined>;\n  createInvoice(invoice: {\n    clientId: string;\n    projectId: string | null;\n    invoiceNumber?: string;\n    issueDate: string | Date;\n    dueDate: string | Date;\n    currency: string;\n    subtotal: number;\n    taxAmount: number;\n    totalAmount: number;\n    status: string;\n    notes: string;\n    lineItems: Array<{\n      description: string;\n      quantity: number;\n      unitPrice: number;\n      lineTotal: number;\n    }>;\n  }): Promise<Invoice>;\n  updateInvoice(id: string, invoice: Partial<Invoice>): Promise<Invoice>;\n  updateInvoiceStatus(id: string, status: string): Promise<Invoice>;\n  \n  // Invoice Line Item methods\n  getLineItemsByInvoiceId(invoiceId: string): Promise<InvoiceLineItem[]>;\n  \n  // Payment methods\n  getPaymentsByInvoiceId(invoiceId: string): Promise<Payment[]>;\n  createPayment(payment: InsertPayment): Promise<Payment>;\n  \n  // Service methods\n  getServices(filters?: { status?: string; category?: string }): Promise<Service[]>;\n  getServiceById(id: string): Promise<Service | undefined>;\n  createService(service: InsertService): Promise<Service>;\n  updateService(id: string, service: Partial<InsertService>): Promise<Service>;\n  updateServiceStatus(id: string, status: string): Promise<Service>;\n  \n  // Dashboard methods\n  getDashboardSummary(): Promise<DashboardSummary>;\n  getUpcomingInvoices(): Promise<InvoiceWithRelations[]>;\n  \n  // Vendor methods\n  getVendors(filters?: { status?: string; search?: string; category?: string }): Promise<VendorWithStats[]>;\n  getVendorById(id: string): Promise<Vendor | undefined>;\n  createVendor(vendor: InsertVendor): Promise<Vendor>;\n  updateVendor(id: string, vendor: Partial<InsertVendor>): Promise<Vendor>;\n  updateVendorStatus(id: string, status: string): Promise<Vendor>;\n  \n  // Expense Category methods\n  getExpenseCategories(): Promise<ExpenseCategory[]>;\n  getExpenseCategoryById(id: string): Promise<ExpenseCategory | undefined>;\n  createExpenseCategory(category: InsertExpenseCategory): Promise<ExpenseCategory>;\n  updateExpenseCategory(id: string, category: Partial<InsertExpenseCategory>): Promise<ExpenseCategory>;\n  \n  // Expense methods\n  getExpenses(filters?: { \n    fromDate?: string;\n    toDate?: string;\n    vendorId?: string;\n    categoryId?: string;\n    status?: string;\n  }): Promise<ExpenseWithRelations[]>;\n  getExpenseById(id: string): Promise<ExpenseWithRelations | undefined>;\n  createExpense(expense: InsertExpense): Promise<Expense>;\n  updateExpense(id: string, expense: Partial<InsertExpense>): Promise<Expense>;\n  markExpensePaid(id: string, data: { paymentDate: Date; paymentMethod: string; reference: string }): Promise<Expense>;\n  \n  // Team Member methods\n  getTeamMembers(filters?: { status?: string }): Promise<TeamMember[]>;\n  getTeamMemberById(id: string): Promise<TeamMember | undefined>;\n  createTeamMember(member: InsertTeamMember): Promise<TeamMember>;\n  updateTeamMember(id: string, member: Partial<InsertTeamMember>): Promise<TeamMember>;\n  updateTeamMemberStatus(id: string, status: string): Promise<TeamMember>;\n  \n  // Salary Payment methods\n  getSalaryPayments(filters?: { teamMemberId?: string; month?: string; status?: string }): Promise<SalaryPayment[]>;\n  getSalaryPaymentById(id: string): Promise<SalaryPayment | undefined>;\n  createSalaryPayment(salary: InsertSalaryPayment): Promise<SalaryPayment>;\n  updateSalaryPayment(id: string, salary: Partial<InsertSalaryPayment>): Promise<SalaryPayment>;\n  markSalaryPaid(id: string, data: { paymentDate: Date; paymentMethod: string; reference: string }): Promise<SalaryPayment>;\n  \n  // Financial Dashboard\n  getFinancialSummary(filters?: { fromDate?: string; toDate?: string }): Promise<FinancialSummary>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  private invoiceCounter: number = 1;\n  \n  // User methods\n  async getUserByEmail(email: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.email, email));\n    return user || undefined;\n  }\n\n  async createUser(user: { name: string; email: string; passwordHash: string; role: string }): Promise<User> {\n    const [newUser] = await db\n      .insert(users)\n      .values({\n        id: nanoid(),\n        name: user.name,\n        email: user.email,\n        passwordHash: user.passwordHash,\n        role: user.role as any,\n      })\n      .returning();\n    return newUser;\n  }\n\n  // Client methods\n  async getClients(filters?: { status?: string; search?: string }): Promise<ClientWithStats[]> {\n    const conditions = [];\n    \n    if (filters?.status) {\n      conditions.push(eq(clients.status, filters.status as any));\n    }\n    \n    if (filters?.search) {\n      const searchPattern = `%${filters.search}%`;\n      conditions.push(\n        or(\n          ilike(clients.name, searchPattern),\n          ilike(clients.email, searchPattern),\n          ilike(clients.contactName, searchPattern)\n        )!\n      );\n    }\n\n    const clientList = await db\n      .select()\n      .from(clients)\n      .where(conditions.length > 0 ? and(...conditions) : undefined);\n\n    // Add stats for each client\n    const clientsWithStats: ClientWithStats[] = await Promise.all(\n      clientList.map(async (client) => {\n        const clientInvoices = await db\n          .select()\n          .from(invoices)\n          .where(eq(invoices.clientId, client.id));\n\n        const totalInvoiced = clientInvoices.reduce(\n          (sum, inv) => sum + toNumber(inv.totalAmount),\n          0\n        );\n        const outstandingAmount = clientInvoices.reduce(\n          (sum, inv) => sum + toNumber(inv.balanceDue),\n          0\n        );\n\n        const clientProjects = await db\n          .select()\n          .from(projects)\n          .where(eq(projects.clientId, client.id));\n\n        return {\n          ...client,\n          totalInvoiced,\n          outstandingAmount,\n          projectCount: clientProjects.length,\n        };\n      })\n    );\n\n    return clientsWithStats;\n  }\n\n  async getClientById(id: string): Promise<Client | undefined> {\n    const [client] = await db.select().from(clients).where(eq(clients.id, id));\n    return client || undefined;\n  }\n\n  async createClient(client: InsertClient): Promise<Client> {\n    const [newClient] = await db\n      .insert(clients)\n      .values({\n        id: nanoid(),\n        ...client,\n      })\n      .returning();\n    return newClient;\n  }\n\n  async updateClient(id: string, client: Partial<InsertClient>): Promise<Client> {\n    const [updated] = await db\n      .update(clients)\n      .set({ ...client, updatedAt: new Date() })\n      .where(eq(clients.id, id))\n      .returning();\n    if (!updated) throw new Error(\"Client not found\");\n    return updated;\n  }\n\n  async updateClientStatus(id: string, status: string): Promise<Client> {\n    const [updated] = await db\n      .update(clients)\n      .set({ status: status as any, updatedAt: new Date() })\n      .where(eq(clients.id, id))\n      .returning();\n    if (!updated) throw new Error(\"Client not found\");\n    return updated;\n  }\n\n  // Project methods\n  async getProjects(filters?: { clientId?: string }): Promise<Project[]> {\n    if (filters?.clientId) {\n      return await db\n        .select()\n        .from(projects)\n        .where(eq(projects.clientId, filters.clientId));\n    }\n    return await db.select().from(projects);\n  }\n\n  async getProjectById(id: string): Promise<Project | undefined> {\n    const [project] = await db.select().from(projects).where(eq(projects.id, id));\n    return project || undefined;\n  }\n\n  async createProject(project: InsertProject): Promise<Project> {\n    const [newProject] = await db\n      .insert(projects)\n      .values({\n        id: nanoid(),\n        ...project,\n        startDate: new Date(project.startDate),\n        endDate: project.endDate ? new Date(project.endDate) : null,\n      })\n      .returning();\n    return newProject;\n  }\n\n  async updateProject(id: string, project: Partial<InsertProject>): Promise<Project> {\n    const updateData: any = { ...project, updatedAt: new Date() };\n    if (project.startDate) {\n      updateData.startDate = new Date(project.startDate);\n    }\n    if (project.endDate) {\n      updateData.endDate = new Date(project.endDate);\n    }\n    \n    const [updated] = await db\n      .update(projects)\n      .set(updateData)\n      .where(eq(projects.id, id))\n      .returning();\n    if (!updated) throw new Error(\"Project not found\");\n    return updated;\n  }\n\n  // Invoice methods\n  async getInvoices(filters?: { \n    clientId?: string; \n    status?: string; \n    search?: string \n  }): Promise<InvoiceWithRelations[]> {\n    const conditions = [];\n    \n    if (filters?.clientId) {\n      conditions.push(eq(invoices.clientId, filters.clientId));\n    }\n    \n    if (filters?.status) {\n      conditions.push(eq(invoices.status, filters.status as any));\n    }\n    \n    if (filters?.search) {\n      const searchPattern = `%${filters.search}%`;\n      conditions.push(ilike(invoices.invoiceNumber, searchPattern));\n    }\n\n    const invoiceList = await db\n      .select()\n      .from(invoices)\n      .where(conditions.length > 0 ? and(...conditions) : undefined)\n      .orderBy(desc(invoices.createdAt));\n\n    // Add relations\n    const invoicesWithRelations: InvoiceWithRelations[] = await Promise.all(\n      invoiceList.map(async (invoice) => {\n        const [client] = await db\n          .select()\n          .from(clients)\n          .where(eq(clients.id, invoice.clientId));\n\n        let project = null;\n        if (invoice.projectId) {\n          [project] = await db\n            .select()\n            .from(projects)\n            .where(eq(projects.id, invoice.projectId));\n        }\n\n        const lineItemsList = await db\n          .select()\n          .from(invoiceLineItems)\n          .where(eq(invoiceLineItems.invoiceId, invoice.id));\n\n        const paymentsList = await db\n          .select()\n          .from(payments)\n          .where(eq(payments.invoiceId, invoice.id));\n\n        return {\n          ...invoice,\n          subtotal: toNumber(invoice.subtotal),\n          taxAmount: toNumber(invoice.taxAmount),\n          totalAmount: toNumber(invoice.totalAmount),\n          amountPaid: toNumber(invoice.amountPaid),\n          balanceDue: toNumber(invoice.balanceDue),\n          clientName: client?.name || \"\",\n          projectName: project?.name || null,\n          projectScope: project?.scope || null,\n          lineItems: lineItemsList.map((item) => ({\n            ...item,\n            quantity: toNumber(item.quantity),\n            unitPrice: toNumber(item.unitPrice),\n            lineTotal: toNumber(item.lineTotal),\n          })),\n          payments: paymentsList.map((payment) => ({\n            ...payment,\n            amount: toNumber(payment.amount),\n          })),\n        };\n      })\n    );\n\n    return invoicesWithRelations;\n  }\n\n  async getInvoiceById(id: string): Promise<InvoiceWithRelations | undefined> {\n    const [invoice] = await db.select().from(invoices).where(eq(invoices.id, id));\n    if (!invoice) return undefined;\n\n    const [client] = await db\n      .select()\n      .from(clients)\n      .where(eq(clients.id, invoice.clientId));\n\n    let project = null;\n    if (invoice.projectId) {\n      [project] = await db\n        .select()\n        .from(projects)\n        .where(eq(projects.id, invoice.projectId));\n    }\n\n    const lineItemsList = await db\n      .select()\n      .from(invoiceLineItems)\n      .where(eq(invoiceLineItems.invoiceId, invoice.id));\n\n    const paymentsList = await db\n      .select()\n      .from(payments)\n      .where(eq(payments.invoiceId, invoice.id));\n\n    return {\n      ...invoice,\n      subtotal: toNumber(invoice.subtotal),\n      taxAmount: toNumber(invoice.taxAmount),\n      totalAmount: toNumber(invoice.totalAmount),\n      amountPaid: toNumber(invoice.amountPaid),\n      balanceDue: toNumber(invoice.balanceDue),\n      clientName: client?.name || \"\",\n      projectName: project?.name || null,\n      projectScope: project?.scope || null,\n      lineItems: lineItemsList.map((item) => ({\n        ...item,\n        quantity: toNumber(item.quantity),\n        unitPrice: toNumber(item.unitPrice),\n        lineTotal: toNumber(item.lineTotal),\n      })),\n      payments: paymentsList.map((payment) => ({\n        ...payment,\n        amount: toNumber(payment.amount),\n      })),\n    };\n  }\n\n  async createInvoice(invoice: {\n    clientId: string;\n    projectId: string | null;\n    invoiceNumber?: string;\n    issueDate: string | Date;\n    dueDate: string | Date;\n    currency: string;\n    subtotal: number;\n    taxAmount: number;\n    totalAmount: number;\n    status: string;\n    notes: string;\n    lineItems: Array<{\n      description: string;\n      quantity: number;\n      unitPrice: number;\n      lineTotal: number;\n    }>;\n  }): Promise<Invoice> {\n    const invoiceNumber = invoice.invoiceNumber || `INV-${String(this.invoiceCounter++).padStart(4, \"0\")}`;\n    const balanceDue = invoice.totalAmount;\n\n    const [newInvoice] = await db\n      .insert(invoices)\n      .values({\n        id: nanoid(),\n        clientId: invoice.clientId,\n        projectId: invoice.projectId,\n        invoiceNumber,\n        issueDate: new Date(invoice.issueDate),\n        dueDate: new Date(invoice.dueDate),\n        currency: invoice.currency,\n        subtotal: invoice.subtotal.toString(),\n        taxAmount: invoice.taxAmount.toString(),\n        totalAmount: invoice.totalAmount.toString(),\n        amountPaid: \"0\",\n        balanceDue: balanceDue.toString(),\n        status: invoice.status as any,\n        notes: invoice.notes,\n      })\n      .returning();\n\n    // Insert line items\n    if (invoice.lineItems.length > 0) {\n      await db.insert(invoiceLineItems).values(\n        invoice.lineItems.map((item) => ({\n          id: nanoid(),\n          invoiceId: newInvoice.id,\n          description: item.description,\n          quantity: item.quantity.toString(),\n          unitPrice: item.unitPrice.toString(),\n          lineTotal: item.lineTotal.toString(),\n        }))\n      );\n    }\n\n    return {\n      ...newInvoice,\n      subtotal: toNumber(newInvoice.subtotal),\n      taxAmount: toNumber(newInvoice.taxAmount),\n      totalAmount: toNumber(newInvoice.totalAmount),\n      amountPaid: toNumber(newInvoice.amountPaid),\n      balanceDue: toNumber(newInvoice.balanceDue),\n    };\n  }\n\n  async updateInvoice(id: string, invoice: Partial<Invoice>): Promise<Invoice> {\n    const updateData: any = { ...invoice, updatedAt: new Date() };\n    \n    // Convert numbers to strings for decimal fields\n    if (invoice.subtotal !== undefined) updateData.subtotal = invoice.subtotal.toString();\n    if (invoice.taxAmount !== undefined) updateData.taxAmount = invoice.taxAmount.toString();\n    if (invoice.totalAmount !== undefined) updateData.totalAmount = invoice.totalAmount.toString();\n    if (invoice.amountPaid !== undefined) updateData.amountPaid = invoice.amountPaid.toString();\n    if (invoice.balanceDue !== undefined) updateData.balanceDue = invoice.balanceDue.toString();\n    if (invoice.issueDate) updateData.issueDate = new Date(invoice.issueDate);\n    if (invoice.dueDate) updateData.dueDate = new Date(invoice.dueDate);\n\n    const [updated] = await db\n      .update(invoices)\n      .set(updateData)\n      .where(eq(invoices.id, id))\n      .returning();\n    \n    if (!updated) throw new Error(\"Invoice not found\");\n    \n    return {\n      ...updated,\n      subtotal: toNumber(updated.subtotal),\n      taxAmount: toNumber(updated.taxAmount),\n      totalAmount: toNumber(updated.totalAmount),\n      amountPaid: toNumber(updated.amountPaid),\n      balanceDue: toNumber(updated.balanceDue),\n    };\n  }\n\n  async updateInvoiceStatus(id: string, status: string): Promise<Invoice> {\n    const [updated] = await db\n      .update(invoices)\n      .set({ status: status as any, updatedAt: new Date() })\n      .where(eq(invoices.id, id))\n      .returning();\n    \n    if (!updated) throw new Error(\"Invoice not found\");\n    \n    return {\n      ...updated,\n      subtotal: toNumber(updated.subtotal),\n      taxAmount: toNumber(updated.taxAmount),\n      totalAmount: toNumber(updated.totalAmount),\n      amountPaid: toNumber(updated.amountPaid),\n      balanceDue: toNumber(updated.balanceDue),\n    };\n  }\n\n  // Invoice Line Item methods\n  async getLineItemsByInvoiceId(invoiceId: string): Promise<InvoiceLineItem[]> {\n    const items = await db\n      .select()\n      .from(invoiceLineItems)\n      .where(eq(invoiceLineItems.invoiceId, invoiceId));\n    \n    return items.map((item) => ({\n      ...item,\n      quantity: toNumber(item.quantity),\n      unitPrice: toNumber(item.unitPrice),\n      lineTotal: toNumber(item.lineTotal),\n    }));\n  }\n\n  // Payment methods\n  async getPaymentsByInvoiceId(invoiceId: string): Promise<Payment[]> {\n    const paymentsList = await db\n      .select()\n      .from(payments)\n      .where(eq(payments.invoiceId, invoiceId));\n    \n    return paymentsList.map((payment) => ({\n      ...payment,\n      amount: toNumber(payment.amount),\n    }));\n  }\n\n  async createPayment(payment: InsertPayment): Promise<Payment> {\n    const [newPayment] = await db\n      .insert(payments)\n      .values({\n        id: nanoid(),\n        invoiceId: payment.invoiceId,\n        paymentDate: new Date(payment.paymentDate),\n        amount: payment.amount.toString(),\n        method: payment.method,\n        reference: payment.reference || \"\",\n        notes: payment.notes || \"\",\n      })\n      .returning();\n\n    // Update invoice amount paid and balance\n    const [invoice] = await db\n      .select()\n      .from(invoices)\n      .where(eq(invoices.id, payment.invoiceId));\n\n    if (invoice) {\n      const newAmountPaid = toNumber(invoice.amountPaid) + payment.amount;\n      const totalAmount = toNumber(invoice.totalAmount);\n      const newBalanceDue = totalAmount - newAmountPaid;\n\n      let newStatus = invoice.status;\n      if (newBalanceDue <= 0) {\n        newStatus = \"PAID\";\n      } else if (newAmountPaid > 0) {\n        const dueDate = new Date(invoice.dueDate);\n        const now = new Date();\n        if (now > dueDate) {\n          newStatus = \"OVERDUE\";\n        } else {\n          newStatus = \"PARTIALLY_PAID\";\n        }\n      }\n\n      await db\n        .update(invoices)\n        .set({\n          amountPaid: newAmountPaid.toString(),\n          balanceDue: newBalanceDue.toString(),\n          status: newStatus as any,\n          updatedAt: new Date(),\n        })\n        .where(eq(invoices.id, payment.invoiceId));\n    }\n\n    return {\n      ...newPayment,\n      amount: toNumber(newPayment.amount),\n    };\n  }\n\n  // Service methods\n  async getServices(filters?: { status?: string; category?: string }): Promise<Service[]> {\n    const conditions = [];\n    \n    if (filters?.status) {\n      conditions.push(eq(services.status, filters.status as any));\n    }\n    \n    if (filters?.category) {\n      conditions.push(eq(services.category, filters.category as any));\n    }\n    \n    const serviceList = await db\n      .select()\n      .from(services)\n      .where(conditions.length > 0 ? and(...conditions) : undefined)\n      .orderBy(desc(services.createdAt));\n    \n    return serviceList.map(service => ({\n      ...service,\n      defaultPrice: toNumber(service.defaultPrice),\n    }));\n  }\n\n  async getServiceById(id: string): Promise<Service | undefined> {\n    const [service] = await db\n      .select()\n      .from(services)\n      .where(eq(services.id, id));\n    \n    if (!service) return undefined;\n    \n    return {\n      ...service,\n      defaultPrice: toNumber(service.defaultPrice),\n    };\n  }\n\n  async createService(service: InsertService): Promise<Service> {\n    const [newService] = await db\n      .insert(services)\n      .values({\n        id: nanoid(),\n        name: service.name,\n        description: service.description || \"\",\n        category: service.category,\n        defaultPrice: service.defaultPrice.toString(),\n        currency: service.currency || \"INR\",\n        unit: service.unit || \"Hour\",\n        status: service.status || \"ACTIVE\",\n      })\n      .returning();\n    \n    return {\n      ...newService,\n      defaultPrice: toNumber(newService.defaultPrice),\n    };\n  }\n\n  async updateService(id: string, service: Partial<InsertService>): Promise<Service> {\n    const updateData: any = {\n      updatedAt: new Date(),\n    };\n    \n    if (service.name !== undefined) updateData.name = service.name;\n    if (service.description !== undefined) updateData.description = service.description;\n    if (service.category !== undefined) updateData.category = service.category;\n    if (service.defaultPrice !== undefined) updateData.defaultPrice = service.defaultPrice.toString();\n    if (service.currency !== undefined) updateData.currency = service.currency;\n    if (service.unit !== undefined) updateData.unit = service.unit;\n    if (service.status !== undefined) updateData.status = service.status;\n    \n    const [updatedService] = await db\n      .update(services)\n      .set(updateData)\n      .where(eq(services.id, id))\n      .returning();\n    \n    return {\n      ...updatedService,\n      defaultPrice: toNumber(updatedService.defaultPrice),\n    };\n  }\n\n  async updateServiceStatus(id: string, status: string): Promise<Service> {\n    const [updatedService] = await db\n      .update(services)\n      .set({ status: status as any, updatedAt: new Date() })\n      .where(eq(services.id, id))\n      .returning();\n    \n    return {\n      ...updatedService,\n      defaultPrice: toNumber(updatedService.defaultPrice),\n    };\n  }\n\n  // Dashboard methods\n  async getDashboardSummary(): Promise<DashboardSummary> {\n    const allInvoices = await db.select().from(invoices);\n    \n    const totalInvoiced = allInvoices.reduce(\n      (sum, inv) => sum + toNumber(inv.totalAmount),\n      0\n    );\n    const totalPaid = allInvoices.reduce(\n      (sum, inv) => sum + toNumber(inv.amountPaid),\n      0\n    );\n    const totalOutstanding = allInvoices.reduce(\n      (sum, inv) => sum + toNumber(inv.balanceDue),\n      0\n    );\n\n    const now = new Date();\n    const startOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);\n    const endOfMonth = new Date(now.getFullYear(), now.getMonth() + 1, 0);\n\n    const thisMonthInvoices = allInvoices.filter(\n      (inv) => new Date(inv.createdAt) >= startOfMonth && new Date(inv.createdAt) <= endOfMonth\n    );\n\n    const thisMonthInvoiced = thisMonthInvoices.reduce(\n      (sum, inv) => sum + toNumber(inv.totalAmount),\n      0\n    );\n\n    const thisMonthPayments = await db\n      .select()\n      .from(payments)\n      .where(\n        and(\n          gte(payments.paymentDate, startOfMonth),\n          lte(payments.paymentDate, endOfMonth)\n        )\n      );\n\n    const thisMonthCollected = thisMonthPayments.reduce(\n      (sum, payment) => sum + toNumber(payment.amount),\n      0\n    );\n\n    const activeClients = await db\n      .select()\n      .from(clients)\n      .where(eq(clients.status, \"ACTIVE\"));\n\n    const countOverdueInvoices = allInvoices.filter(\n      (inv) => inv.status === \"OVERDUE\"\n    ).length;\n\n    return {\n      totalInvoiced,\n      totalPaid,\n      totalOutstanding,\n      thisMonthInvoiced,\n      thisMonthCollected,\n      countActiveClients: activeClients.length,\n      countOverdueInvoices,\n    };\n  }\n\n  async getUpcomingInvoices(): Promise<InvoiceWithRelations[]> {\n    const now = new Date();\n    const thirtyDaysFromNow = new Date(now.getTime() + 30 * 24 * 60 * 60 * 1000);\n\n    const upcomingInvoices = await db\n      .select()\n      .from(invoices)\n      .where(\n        and(\n          gte(invoices.dueDate, now),\n          lte(invoices.dueDate, thirtyDaysFromNow)\n        )\n      )\n      .orderBy(invoices.dueDate);\n\n    const invoicesWithRelations: InvoiceWithRelations[] = await Promise.all(\n      upcomingInvoices.map(async (invoice) => {\n        const [client] = await db\n          .select()\n          .from(clients)\n          .where(eq(clients.id, invoice.clientId));\n\n        let project = null;\n        if (invoice.projectId) {\n          [project] = await db\n            .select()\n            .from(projects)\n            .where(eq(projects.id, invoice.projectId));\n        }\n\n        return {\n          ...invoice,\n          subtotal: toNumber(invoice.subtotal),\n          taxAmount: toNumber(invoice.taxAmount),\n          totalAmount: toNumber(invoice.totalAmount),\n          amountPaid: toNumber(invoice.amountPaid),\n          balanceDue: toNumber(invoice.balanceDue),\n          clientName: client?.name || \"\",\n          projectName: project?.name || null,\n          projectScope: project?.scope || null,\n        };\n      })\n    );\n\n    return invoicesWithRelations;\n  }\n\n  // Vendor methods\n  async getVendors(filters?: { \n    status?: string; \n    search?: string; \n    category?: string \n  }): Promise<VendorWithStats[]> {\n    const conditions = [];\n    \n    if (filters?.status) {\n      conditions.push(eq(vendors.status, filters.status as any));\n    }\n    \n    if (filters?.category) {\n      conditions.push(eq(vendors.category, filters.category as any));\n    }\n    \n    if (filters?.search) {\n      const searchPattern = `%${filters.search}%`;\n      conditions.push(\n        or(\n          ilike(vendors.name, searchPattern),\n          ilike(vendors.email, searchPattern),\n          ilike(vendors.contactName, searchPattern)\n        )!\n      );\n    }\n\n    const vendorList = await db\n      .select()\n      .from(vendors)\n      .where(conditions.length > 0 ? and(...conditions) : undefined);\n\n    // Add stats\n    const vendorsWithStats: VendorWithStats[] = await Promise.all(\n      vendorList.map(async (vendor) => {\n        const vendorExpenses = await db\n          .select()\n          .from(expenses)\n          .where(eq(expenses.vendorId, vendor.id));\n\n        const totalSpend = vendorExpenses\n          .filter((exp) => exp.status === \"PAID\")\n          .reduce((sum, exp) => sum + toNumber(exp.amount), 0);\n\n        return {\n          ...vendor,\n          totalSpend,\n        };\n      })\n    );\n\n    return vendorsWithStats;\n  }\n\n  async getVendorById(id: string): Promise<Vendor | undefined> {\n    const [vendor] = await db.select().from(vendors).where(eq(vendors.id, id));\n    return vendor || undefined;\n  }\n\n  async createVendor(vendor: InsertVendor): Promise<Vendor> {\n    const [newVendor] = await db\n      .insert(vendors)\n      .values({\n        id: nanoid(),\n        ...vendor,\n      })\n      .returning();\n    return newVendor;\n  }\n\n  async updateVendor(id: string, vendor: Partial<InsertVendor>): Promise<Vendor> {\n    const [updated] = await db\n      .update(vendors)\n      .set({ ...vendor, updatedAt: new Date() })\n      .where(eq(vendors.id, id))\n      .returning();\n    if (!updated) throw new Error(\"Vendor not found\");\n    return updated;\n  }\n\n  async updateVendorStatus(id: string, status: string): Promise<Vendor> {\n    const [updated] = await db\n      .update(vendors)\n      .set({ status: status as any, updatedAt: new Date() })\n      .where(eq(vendors.id, id))\n      .returning();\n    if (!updated) throw new Error(\"Vendor not found\");\n    return updated;\n  }\n\n  // Expense Category methods\n  async getExpenseCategories(): Promise<ExpenseCategory[]> {\n    return await db.select().from(expenseCategories);\n  }\n\n  async getExpenseCategoryById(id: string): Promise<ExpenseCategory | undefined> {\n    const [category] = await db.select().from(expenseCategories).where(eq(expenseCategories.id, id));\n    return category || undefined;\n  }\n\n  async createExpenseCategory(category: InsertExpenseCategory): Promise<ExpenseCategory> {\n    const [newCategory] = await db\n      .insert(expenseCategories)\n      .values({\n        id: nanoid(),\n        ...category,\n      })\n      .returning();\n    return newCategory;\n  }\n\n  async updateExpenseCategory(id: string, category: Partial<InsertExpenseCategory>): Promise<ExpenseCategory> {\n    const [updated] = await db\n      .update(expenseCategories)\n      .set({ ...category, updatedAt: new Date() })\n      .where(eq(expenseCategories.id, id))\n      .returning();\n    if (!updated) throw new Error(\"Expense category not found\");\n    return updated;\n  }\n\n  // Expense methods\n  async getExpenses(filters?: { \n    fromDate?: string;\n    toDate?: string;\n    vendorId?: string;\n    categoryId?: string;\n    status?: string;\n  }): Promise<ExpenseWithRelations[]> {\n    const conditions = [];\n    \n    if (filters?.fromDate) {\n      conditions.push(gte(expenses.expenseDate, new Date(filters.fromDate)));\n    }\n    \n    if (filters?.toDate) {\n      conditions.push(lte(expenses.expenseDate, new Date(filters.toDate)));\n    }\n    \n    if (filters?.vendorId) {\n      conditions.push(eq(expenses.vendorId, filters.vendorId));\n    }\n    \n    if (filters?.categoryId) {\n      conditions.push(eq(expenses.categoryId, filters.categoryId));\n    }\n    \n    if (filters?.status) {\n      conditions.push(eq(expenses.status, filters.status as any));\n    }\n\n    const expenseList = await db\n      .select()\n      .from(expenses)\n      .where(conditions.length > 0 ? and(...conditions) : undefined)\n      .orderBy(desc(expenses.expenseDate));\n\n    // Add relations\n    const expensesWithRelations: ExpenseWithRelations[] = await Promise.all(\n      expenseList.map(async (expense) => {\n        let vendor = null;\n        if (expense.vendorId) {\n          [vendor] = await db\n            .select()\n            .from(vendors)\n            .where(eq(vendors.id, expense.vendorId));\n        }\n\n        const [category] = await db\n          .select()\n          .from(expenseCategories)\n          .where(eq(expenseCategories.id, expense.categoryId));\n\n        return {\n          ...expense,\n          amount: toNumber(expense.amount),\n          vendorName: vendor?.name || null,\n          categoryName: category?.name || \"\",\n        };\n      })\n    );\n\n    return expensesWithRelations;\n  }\n\n  async getExpenseById(id: string): Promise<ExpenseWithRelations | undefined> {\n    const [expense] = await db.select().from(expenses).where(eq(expenses.id, id));\n    if (!expense) return undefined;\n\n    let vendor = null;\n    if (expense.vendorId) {\n      [vendor] = await db\n        .select()\n        .from(vendors)\n        .where(eq(vendors.id, expense.vendorId));\n    }\n\n    const [category] = await db\n      .select()\n      .from(expenseCategories)\n      .where(eq(expenseCategories.id, expense.categoryId));\n\n    return {\n      ...expense,\n      amount: toNumber(expense.amount),\n      vendorName: vendor?.name || null,\n      categoryName: category?.name || \"\",\n    };\n  }\n\n  async createExpense(expense: InsertExpense): Promise<Expense> {\n    const [newExpense] = await db\n      .insert(expenses)\n      .values({\n        id: nanoid(),\n        ...expense,\n        amount: expense.amount.toString(),\n        expenseDate: new Date(expense.expenseDate),\n        dueDate: expense.dueDate ? new Date(expense.dueDate) : null,\n        paidDate: expense.paidDate ? new Date(expense.paidDate) : null,\n      })\n      .returning();\n    \n    return {\n      ...newExpense,\n      amount: toNumber(newExpense.amount),\n    };\n  }\n\n  async updateExpense(id: string, expense: Partial<InsertExpense>): Promise<Expense> {\n    const updateData: any = { ...expense, updatedAt: new Date() };\n    \n    if (expense.amount !== undefined) updateData.amount = expense.amount.toString();\n    if (expense.expenseDate) updateData.expenseDate = new Date(expense.expenseDate);\n    if (expense.dueDate) updateData.dueDate = new Date(expense.dueDate);\n    if (expense.paidDate) updateData.paidDate = new Date(expense.paidDate);\n\n    const [updated] = await db\n      .update(expenses)\n      .set(updateData)\n      .where(eq(expenses.id, id))\n      .returning();\n    \n    if (!updated) throw new Error(\"Expense not found\");\n    \n    return {\n      ...updated,\n      amount: toNumber(updated.amount),\n    };\n  }\n\n  async markExpensePaid(id: string, data: { \n    paymentDate: Date; \n    paymentMethod: string; \n    reference: string \n  }): Promise<Expense> {\n    const [updated] = await db\n      .update(expenses)\n      .set({\n        paidDate: data.paymentDate,\n        paymentMethod: data.paymentMethod as any,\n        reference: data.reference,\n        status: \"PAID\",\n        updatedAt: new Date(),\n      })\n      .where(eq(expenses.id, id))\n      .returning();\n    \n    if (!updated) throw new Error(\"Expense not found\");\n    \n    return {\n      ...updated,\n      amount: toNumber(updated.amount),\n    };\n  }\n\n  // Team Member methods\n  async getTeamMembers(filters?: { status?: string }): Promise<TeamMember[]> {\n    if (filters?.status) {\n      const members = await db\n        .select()\n        .from(teamMembers)\n        .where(eq(teamMembers.status, filters.status as any));\n      \n      return members.map((member) => ({\n        ...member,\n        baseSalary: toNumber(member.baseSalary),\n      }));\n    }\n    \n    const members = await db.select().from(teamMembers);\n    return members.map((member) => ({\n      ...member,\n      baseSalary: toNumber(member.baseSalary),\n    }));\n  }\n\n  async getTeamMemberById(id: string): Promise<TeamMember | undefined> {\n    const [member] = await db.select().from(teamMembers).where(eq(teamMembers.id, id));\n    if (!member) return undefined;\n    \n    return {\n      ...member,\n      baseSalary: toNumber(member.baseSalary),\n    };\n  }\n\n  async createTeamMember(member: InsertTeamMember): Promise<TeamMember> {\n    const [newMember] = await db\n      .insert(teamMembers)\n      .values({\n        id: nanoid(),\n        ...member,\n        baseSalary: member.baseSalary.toString(),\n        joinedDate: new Date(member.joinedDate),\n        exitDate: member.exitDate ? new Date(member.exitDate) : null,\n      })\n      .returning();\n    \n    return {\n      ...newMember,\n      baseSalary: toNumber(newMember.baseSalary),\n    };\n  }\n\n  async updateTeamMember(id: string, member: Partial<InsertTeamMember>): Promise<TeamMember> {\n    const updateData: any = { ...member, updatedAt: new Date() };\n    \n    if (member.baseSalary !== undefined) updateData.baseSalary = member.baseSalary.toString();\n    if (member.joinedDate) updateData.joinedDate = new Date(member.joinedDate);\n    if (member.exitDate) updateData.exitDate = new Date(member.exitDate);\n\n    const [updated] = await db\n      .update(teamMembers)\n      .set(updateData)\n      .where(eq(teamMembers.id, id))\n      .returning();\n    \n    if (!updated) throw new Error(\"Team member not found\");\n    \n    return {\n      ...updated,\n      baseSalary: toNumber(updated.baseSalary),\n    };\n  }\n\n  async updateTeamMemberStatus(id: string, status: string): Promise<TeamMember> {\n    const [updated] = await db\n      .update(teamMembers)\n      .set({ status: status as any, updatedAt: new Date() })\n      .where(eq(teamMembers.id, id))\n      .returning();\n    \n    if (!updated) throw new Error(\"Team member not found\");\n    \n    return {\n      ...updated,\n      baseSalary: toNumber(updated.baseSalary),\n    };\n  }\n\n  // Salary Payment methods\n  async getSalaryPayments(filters?: { \n    teamMemberId?: string; \n    month?: string; \n    status?: string \n  }): Promise<SalaryPayment[]> {\n    const conditions = [];\n    \n    if (filters?.teamMemberId) {\n      conditions.push(eq(salaryPayments.teamMemberId, filters.teamMemberId));\n    }\n    \n    if (filters?.month) {\n      conditions.push(eq(salaryPayments.month, filters.month));\n    }\n    \n    if (filters?.status) {\n      conditions.push(eq(salaryPayments.status, filters.status as any));\n    }\n\n    const payments = await db\n      .select()\n      .from(salaryPayments)\n      .where(conditions.length > 0 ? and(...conditions) : undefined)\n      .orderBy(desc(salaryPayments.month));\n\n    return payments.map((payment) => ({\n      ...payment,\n      amount: toNumber(payment.amount),\n    }));\n  }\n\n  async getSalaryPaymentById(id: string): Promise<SalaryPayment | undefined> {\n    const [payment] = await db.select().from(salaryPayments).where(eq(salaryPayments.id, id));\n    if (!payment) return undefined;\n    \n    return {\n      ...payment,\n      amount: toNumber(payment.amount),\n    };\n  }\n\n  async createSalaryPayment(salary: InsertSalaryPayment): Promise<SalaryPayment> {\n    const [newSalary] = await db\n      .insert(salaryPayments)\n      .values({\n        id: nanoid(),\n        ...salary,\n        amount: salary.amount.toString(),\n        paymentDate: salary.paymentDate ? new Date(salary.paymentDate) : null,\n      })\n      .returning();\n    \n    return {\n      ...newSalary,\n      amount: toNumber(newSalary.amount),\n    };\n  }\n\n  async updateSalaryPayment(id: string, salary: Partial<InsertSalaryPayment>): Promise<SalaryPayment> {\n    const updateData: any = { ...salary, updatedAt: new Date() };\n    \n    if (salary.amount !== undefined) updateData.amount = salary.amount.toString();\n    if (salary.paymentDate) updateData.paymentDate = new Date(salary.paymentDate);\n\n    const [updated] = await db\n      .update(salaryPayments)\n      .set(updateData)\n      .where(eq(salaryPayments.id, id))\n      .returning();\n    \n    if (!updated) throw new Error(\"Salary payment not found\");\n    \n    return {\n      ...updated,\n      amount: toNumber(updated.amount),\n    };\n  }\n\n  async markSalaryPaid(id: string, data: { \n    paymentDate: Date; \n    paymentMethod: string; \n    reference: string \n  }): Promise<SalaryPayment> {\n    const [updated] = await db\n      .update(salaryPayments)\n      .set({\n        paymentDate: data.paymentDate,\n        paymentMethod: data.paymentMethod as any,\n        reference: data.reference,\n        status: \"PAID\",\n        updatedAt: new Date(),\n      })\n      .where(eq(salaryPayments.id, id))\n      .returning();\n    \n    if (!updated) throw new Error(\"Salary payment not found\");\n    \n    return {\n      ...updated,\n      amount: toNumber(updated.amount),\n    };\n  }\n\n  // Financial Dashboard\n  async getFinancialSummary(filters?: { \n    fromDate?: string; \n    toDate?: string \n  }): Promise<FinancialSummary> {\n    const now = new Date();\n    const fromDate = filters?.fromDate ? new Date(filters.fromDate) : new Date(now.getFullYear(), now.getMonth(), 1);\n    const toDate = filters?.toDate ? new Date(filters.toDate) : new Date(now.getFullYear(), now.getMonth() + 1, 0);\n\n    // Total Invoiced\n    const invoicesInRange = await db\n      .select()\n      .from(invoices)\n      .where(\n        and(\n          gte(invoices.issueDate, fromDate),\n          lte(invoices.issueDate, toDate)\n        )\n      );\n\n    const totalInvoiced = invoicesInRange.reduce(\n      (sum, inv) => sum + toNumber(inv.totalAmount),\n      0\n    );\n\n    // Total Collected\n    const paymentsInRange = await db\n      .select()\n      .from(payments)\n      .where(\n        and(\n          gte(payments.paymentDate, fromDate),\n          lte(payments.paymentDate, toDate)\n        )\n      );\n\n    const totalCollected = paymentsInRange.reduce(\n      (sum, payment) => sum + toNumber(payment.amount),\n      0\n    );\n\n    // Total Expenses\n    const expensesInRange = await db\n      .select()\n      .from(expenses)\n      .where(\n        and(\n          eq(expenses.status, \"PAID\"),\n          gte(expenses.expenseDate, fromDate),\n          lte(expenses.expenseDate, toDate)\n        )\n      );\n\n    const totalExpenses = expensesInRange.reduce(\n      (sum, exp) => sum + toNumber(exp.amount),\n      0\n    );\n\n    // Total Salaries\n    const salariesInRange = await db\n      .select()\n      .from(salaryPayments)\n      .where(\n        and(\n          eq(salaryPayments.status, \"PAID\"),\n          sql`${salaryPayments.month} >= ${fromDate.toISOString().slice(0, 7)}`,\n          sql`${salaryPayments.month} <= ${toDate.toISOString().slice(0, 7)}`\n        )\n      );\n\n    const totalSalaries = salariesInRange.reduce(\n      (sum, salary) => sum + toNumber(salary.amount),\n      0\n    );\n\n    // Net Profit\n    const netProfit = totalCollected - (totalExpenses + totalSalaries);\n\n    // Breakdown by Category\n    const categories = await db.select().from(expenseCategories);\n    const breakdownByCategory = await Promise.all(\n      categories.map(async (category) => {\n        const categoryExpenses = expensesInRange.filter(\n          (exp) => exp.categoryId === category.id\n        );\n        const totalAmount = categoryExpenses.reduce(\n          (sum, exp) => sum + toNumber(exp.amount),\n          0\n        );\n        return {\n          categoryName: category.name,\n          totalAmount,\n        };\n      })\n    );\n\n    // Top Vendors\n    const vendorSpend = new Map<string, { name: string; total: number }>();\n    \n    for (const expense of expensesInRange) {\n      if (expense.vendorId) {\n        const current = vendorSpend.get(expense.vendorId);\n        if (current) {\n          current.total += toNumber(expense.amount);\n        } else {\n          const [vendor] = await db\n            .select()\n            .from(vendors)\n            .where(eq(vendors.id, expense.vendorId));\n          if (vendor) {\n            vendorSpend.set(expense.vendorId, {\n              name: vendor.name,\n              total: toNumber(expense.amount),\n            });\n          }\n        }\n      }\n    }\n\n    const topVendors = Array.from(vendorSpend.entries())\n      .map(([vendorId, data]) => ({\n        vendorId,\n        vendorName: data.name,\n        totalAmount: data.total,\n      }))\n      .sort((a, b) => b.totalAmount - a.totalAmount)\n      .slice(0, 5);\n\n    return {\n      totalIncome: totalCollected,  // Use totalCollected as income (actual money received)\n      totalExpenses: totalExpenses + totalSalaries,  // Combine expenses and salaries\n      netProfit,\n      totalInvoiced,  // Keep for reference\n      totalSalaries,  // Keep for reference\n      breakdownByCategory: breakdownByCategory.filter((cat) => cat.totalAmount > 0),\n      topVendors,\n    };\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":43832},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/pages/invoice-create.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useForm, useFieldArray } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { useLocation } from \"wouter\";\nimport { z } from \"zod\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { ArrowLeft, Plus, Trash2, Package } from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport { format } from \"date-fns\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\nimport { Badge } from \"@/components/ui/badge\";\nimport type { Client, Project, Service } from \"@shared/schema\";\n\nconst invoiceFormSchema = z.object({\n  clientId: z.string().min(1, \"Client is required\"),\n  projectId: z.string().optional(),\n  invoiceNumber: z.string().optional(),\n  issueDate: z.string(),\n  dueDate: z.string(),\n  taxRate: z.number().min(0).max(100),\n  notes: z.string().optional(),\n  lineItems: z.array(\n    z.object({\n      description: z.string().min(1, \"Description is required\"),\n      quantity: z.number().min(0.01),\n      unitPrice: z.number().min(0),\n    })\n  ).min(1, \"At least one line item is required\"),\n  status: z.enum([\"DRAFT\", \"SENT\"]),\n});\n\ntype InvoiceFormData = z.infer<typeof invoiceFormSchema>;\n\nexport default function InvoiceCreatePage() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [servicePopoverOpen, setServicePopoverOpen] = useState(false);\n  const urlParams = new URLSearchParams(window.location.search);\n  const preSelectedClientId = urlParams.get(\"clientId\");\n\n  const form = useForm<InvoiceFormData>({\n    resolver: zodResolver(invoiceFormSchema),\n    defaultValues: {\n      clientId: preSelectedClientId || \"\",\n      projectId: \"\",\n      invoiceNumber: \"\",\n      issueDate: format(new Date(), \"yyyy-MM-dd\"),\n      dueDate: format(new Date(Date.now() + 30 * 24 * 60 * 60 * 1000), \"yyyy-MM-dd\"),\n      taxRate: 18,\n      notes: \"\",\n      lineItems: [{ description: \"\", quantity: 1, unitPrice: 0 }],\n      status: \"DRAFT\",\n    },\n  });\n\n  const { fields, append, remove } = useFieldArray({\n    control: form.control,\n    name: \"lineItems\",\n  });\n\n  const { data: clients } = useQuery<Client[]>({\n    queryKey: [\"/api/clients\", { status: \"ACTIVE\" }],\n  });\n\n  const selectedClientId = form.watch(\"clientId\");\n  const { data: projects } = useQuery<Project[]>({\n    queryKey: [\"/api/projects\", { clientId: selectedClientId }],\n    enabled: !!selectedClientId,\n  });\n\n  const { data: services } = useQuery<Service[]>({\n    queryKey: [\"/api/services\"],\n  });\n\n  const activeServices = services?.filter((s) => \n    s.status === \"ACTIVE\" && \n    s.defaultPrice != null && \n    s.defaultPrice > 0\n  ) || [];\n\n  const lineItems = form.watch(\"lineItems\");\n  const taxRate = form.watch(\"taxRate\");\n\n  const subtotal = lineItems.reduce(\n    (sum, item) => sum + (item.quantity || 0) * (item.unitPrice || 0),\n    0\n  );\n  const taxAmount = (subtotal * (taxRate || 0)) / 100;\n  const total = subtotal + taxAmount;\n\n  const handleAddService = (service: Service) => {\n    if (!service.defaultPrice || service.defaultPrice <= 0) {\n      toast({\n        title: \"Invalid service\",\n        description: \"This service does not have a valid default price\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    append({\n      description: `${service.name}${service.description ? ' - ' + service.description : ''}`,\n      quantity: 1,\n      unitPrice: service.defaultPrice,\n    });\n    setServicePopoverOpen(false);\n    toast({\n      title: \"Service added\",\n      description: `${service.name} has been added to the invoice`,\n    });\n  };\n\n  const mutation = useMutation({\n    mutationFn: async (data: InvoiceFormData) => {\n      const payload = {\n        clientId: data.clientId,\n        projectId: data.projectId || null,\n        invoiceNumber: data.invoiceNumber || undefined,\n        issueDate: data.issueDate,\n        dueDate: data.dueDate,\n        currency: \"INR\",\n        subtotal,\n        taxAmount,\n        totalAmount: total,\n        status: data.status,\n        notes: data.notes || \"\",\n        lineItems: data.lineItems.map((item) => ({\n          description: item.description,\n          quantity: item.quantity,\n          unitPrice: item.unitPrice,\n          lineTotal: item.quantity * item.unitPrice,\n        })),\n      };\n      return apiRequest(\"POST\", \"/api/invoices\", payload);\n    },\n    onSuccess: (data) => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/invoices\"] });\n      toast({\n        title: \"Invoice created\",\n        description: \"Successfully created invoice\",\n      });\n      setLocation(`/invoices/${data.id}`);\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const formatCurrency = (amount: number) => {\n    return new Intl.NumberFormat(\"en-IN\", {\n      style: \"currency\",\n      currency: \"INR\",\n      minimumFractionDigits: 2,\n    }).format(amount);\n  };\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex items-center gap-4\">\n        <Link href=\"/invoices\">\n          <Button variant=\"ghost\" size=\"icon\" data-testid=\"button-back\">\n            <ArrowLeft className=\"h-4 w-4\" />\n          </Button>\n        </Link>\n        <div>\n          <h1 className=\"text-2xl font-semibold text-foreground\">Create Invoice</h1>\n          <p className=\"text-sm text-muted-foreground mt-1\">\n            Generate a new invoice for your client\n          </p>\n        </div>\n      </div>\n\n      <Form {...form}>\n        <form onSubmit={form.handleSubmit((data) => mutation.mutate(data))} className=\"space-y-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Invoice Details</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"clientId\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Client *</FormLabel>\n                      <Select onValueChange={field.onChange} value={field.value}>\n                        <FormControl>\n                          <SelectTrigger data-testid=\"select-client\">\n                            <SelectValue placeholder=\"Select client\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          {clients?.map((client) => (\n                            <SelectItem key={client.id} value={client.id}>\n                              {client.name}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"projectId\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Project (Optional)</FormLabel>\n                      <Select\n                        onValueChange={field.onChange}\n                        value={field.value}\n                        disabled={!selectedClientId}\n                      >\n                        <FormControl>\n                          <SelectTrigger data-testid=\"select-project\">\n                            <SelectValue placeholder=\"No project\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          {projects?.map((project) => (\n                            <SelectItem key={project.id} value={project.id}>\n                              {project.name}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"invoiceNumber\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Invoice Number (Auto-generated if empty)</FormLabel>\n                      <FormControl>\n                        <Input placeholder=\"INV-0001\" {...field} data-testid=\"input-invoice-number\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"taxRate\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Tax Rate (%)</FormLabel>\n                      <FormControl>\n                        <Input\n                          type=\"number\"\n                          step=\"0.01\"\n                          {...field}\n                          onChange={(e) => field.onChange(parseFloat(e.target.value) || 0)}\n                          data-testid=\"input-tax-rate\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"issueDate\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Issue Date *</FormLabel>\n                      <FormControl>\n                        <Input type=\"date\" {...field} data-testid=\"input-issue-date\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"dueDate\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Due Date *</FormLabel>\n                      <FormControl>\n                        <Input type=\"date\" {...field} data-testid=\"input-due-date\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <FormField\n                control={form.control}\n                name=\"notes\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Notes</FormLabel>\n                    <FormControl>\n                      <Textarea\n                        placeholder=\"Additional notes or payment terms...\"\n                        className=\"min-h-20\"\n                        {...field}\n                        data-testid=\"input-notes\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <div className=\"flex items-center justify-between gap-2 flex-wrap\">\n                <CardTitle>Line Items</CardTitle>\n                <div className=\"flex gap-2\">\n                  <Popover open={servicePopoverOpen} onOpenChange={setServicePopoverOpen}>\n                    <PopoverTrigger asChild>\n                      <Button\n                        type=\"button\"\n                        variant=\"outline\"\n                        size=\"sm\"\n                        data-testid=\"button-add-from-service\"\n                      >\n                        <Package className=\"h-4 w-4 mr-2\" />\n                        Add from Service\n                      </Button>\n                    </PopoverTrigger>\n                    <PopoverContent className=\"w-80 p-0\" align=\"end\">\n                      <div className=\"p-3 border-b\">\n                        <h4 className=\"font-medium text-sm\">Select a Service</h4>\n                        <p className=\"text-xs text-muted-foreground mt-1\">\n                          Quick add from service catalog\n                        </p>\n                      </div>\n                      <div className=\"max-h-80 overflow-y-auto\">\n                        {activeServices.length > 0 ? (\n                          <div className=\"p-2\">\n                            {activeServices.map((service) => (\n                              <button\n                                key={service.id}\n                                type=\"button\"\n                                onClick={() => handleAddService(service)}\n                                className=\"w-full text-left p-3 rounded-md hover-elevate active-elevate-2 flex flex-col gap-2\"\n                                data-testid={`button-service-${service.id}`}\n                              >\n                                <div className=\"flex items-start justify-between gap-2\">\n                                  <div className=\"flex-1 min-w-0\">\n                                    <div className=\"font-medium text-sm\">{service.name}</div>\n                                    <div className=\"flex items-center gap-2 mt-1\">\n                                      <Badge variant=\"outline\" className=\"text-xs\">\n                                        {service.category.replace(/_/g, ' ')}\n                                      </Badge>\n                                    </div>\n                                  </div>\n                                  <div className=\"text-right flex flex-col items-end gap-0.5\">\n                                    <span className=\"font-mono font-medium text-sm\">\n                                      {service.currency} {service.defaultPrice.toLocaleString()}\n                                    </span>\n                                    <span className=\"text-xs text-muted-foreground\">\n                                      per {service.unit}\n                                    </span>\n                                  </div>\n                                </div>\n                                {service.description && (\n                                  <p className=\"text-xs text-muted-foreground line-clamp-2\">\n                                    {service.description}\n                                  </p>\n                                )}\n                              </button>\n                            ))}\n                          </div>\n                        ) : (\n                          <div className=\"p-8 text-center\">\n                            <p className=\"text-sm text-muted-foreground\">No services available</p>\n                            <p className=\"text-xs text-muted-foreground mt-1\">\n                              Add services in Settings\n                            </p>\n                          </div>\n                        )}\n                      </div>\n                    </PopoverContent>\n                  </Popover>\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => append({ description: \"\", quantity: 1, unitPrice: 0 })}\n                    data-testid=\"button-add-line-item\"\n                  >\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Add Item\n                  </Button>\n                </div>\n              </div>\n            </CardHeader>\n            <CardContent>\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Description</TableHead>\n                    <TableHead className=\"w-32\">Quantity</TableHead>\n                    <TableHead className=\"w-40\">Unit Price</TableHead>\n                    <TableHead className=\"w-40 text-right\">Line Total</TableHead>\n                    <TableHead className=\"w-20\"></TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {fields.map((field, index) => (\n                    <TableRow key={field.id}>\n                      <TableCell>\n                        <FormField\n                          control={form.control}\n                          name={`lineItems.${index}.description`}\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormControl>\n                                <Input\n                                  placeholder=\"Service or product description\"\n                                  {...field}\n                                  data-testid={`input-description-${index}`}\n                                />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                      </TableCell>\n                      <TableCell>\n                        <FormField\n                          control={form.control}\n                          name={`lineItems.${index}.quantity`}\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormControl>\n                                <Input\n                                  type=\"number\"\n                                  step=\"0.01\"\n                                  {...field}\n                                  onChange={(e) => field.onChange(parseFloat(e.target.value) || 0)}\n                                  data-testid={`input-quantity-${index}`}\n                                />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                      </TableCell>\n                      <TableCell>\n                        <FormField\n                          control={form.control}\n                          name={`lineItems.${index}.unitPrice`}\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormControl>\n                                <Input\n                                  type=\"number\"\n                                  step=\"0.01\"\n                                  {...field}\n                                  onChange={(e) => field.onChange(parseFloat(e.target.value) || 0)}\n                                  data-testid={`input-unit-price-${index}`}\n                                />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                      </TableCell>\n                      <TableCell className=\"text-right font-mono\" data-testid={`text-line-total-${index}`}>\n                        {formatCurrency(\n                          (lineItems[index]?.quantity || 0) * (lineItems[index]?.unitPrice || 0)\n                        )}\n                      </TableCell>\n                      <TableCell>\n                        {fields.length > 1 && (\n                          <Button\n                            type=\"button\"\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            onClick={() => remove(index)}\n                            data-testid={`button-remove-${index}`}\n                          >\n                            <Trash2 className=\"h-4 w-4 text-destructive\" />\n                          </Button>\n                        )}\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n\n              <div className=\"mt-6 flex justify-end\">\n                <div className=\"w-80 space-y-2\">\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-muted-foreground\">Subtotal:</span>\n                    <span className=\"font-mono\" data-testid=\"text-subtotal\">{formatCurrency(subtotal)}</span>\n                  </div>\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-muted-foreground\">Tax ({taxRate}%):</span>\n                    <span className=\"font-mono\" data-testid=\"text-tax\">{formatCurrency(taxAmount)}</span>\n                  </div>\n                  <div className=\"flex justify-between text-lg font-semibold border-t pt-2\">\n                    <span>Total:</span>\n                    <span className=\"font-mono\" data-testid=\"text-total\">{formatCurrency(total)}</span>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <div className=\"flex justify-end gap-2\">\n            <Link href=\"/invoices\">\n              <Button type=\"button\" variant=\"outline\" data-testid=\"button-cancel\">\n                Cancel\n              </Button>\n            </Link>\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={() => {\n                form.setValue(\"status\", \"DRAFT\");\n                form.handleSubmit((data) => mutation.mutate(data))();\n              }}\n              disabled={mutation.isPending}\n              data-testid=\"button-save-draft\"\n            >\n              Save as Draft\n            </Button>\n            <Button\n              type=\"submit\"\n              onClick={() => form.setValue(\"status\", \"SENT\")}\n              disabled={mutation.isPending}\n              data-testid=\"button-mark-sent\"\n            >\n              {mutation.isPending ? \"Creating...\" : \"Mark as Sent\"}\n            </Button>\n          </div>\n        </form>\n      </Form>\n    </div>\n  );\n}\n","size_bytes":22532},"client/src/pages/invoices.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Link } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { StatusBadge } from \"@/components/status-badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Plus, Search } from \"lucide-react\";\nimport type { InvoiceWithRelations } from \"@shared/schema\";\nimport { formatDate, formatCurrency } from \"@/lib/utils\";\n\nexport default function InvoicesPage() {\n  const [search, setSearch] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\n\n  const { data: invoices, isLoading } = useQuery<InvoiceWithRelations[]>({\n    queryKey: [\"/api/invoices\", { status: statusFilter === \"all\" ? undefined : statusFilter, search }],\n  });\n\n  const filteredInvoices = invoices || [];\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-semibold text-foreground\">Invoices</h1>\n          <p className=\"text-sm text-muted-foreground mt-1\">\n            Manage invoices and track payments\n          </p>\n        </div>\n        <Link href=\"/invoices/new\">\n          <Button data-testid=\"button-new-invoice\">\n            <Plus className=\"h-4 w-4 mr-2\" />\n            New Invoice\n          </Button>\n        </Link>\n      </div>\n\n      {/* Filters */}\n      <div className=\"flex flex-col sm:flex-row gap-4\">\n        <div className=\"relative flex-1\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n          <Input\n            placeholder=\"Search by invoice number or client...\"\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n            className=\"pl-9\"\n            data-testid=\"input-search-invoices\"\n          />\n        </div>\n        <Select value={statusFilter} onValueChange={setStatusFilter}>\n          <SelectTrigger className=\"w-full sm:w-48\" data-testid=\"select-status-filter\">\n            <SelectValue placeholder=\"Filter by status\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">All Status</SelectItem>\n            <SelectItem value=\"DRAFT\">Draft</SelectItem>\n            <SelectItem value=\"SENT\">Sent</SelectItem>\n            <SelectItem value=\"PARTIALLY_PAID\">Partially Paid</SelectItem>\n            <SelectItem value=\"PAID\">Paid</SelectItem>\n            <SelectItem value=\"OVERDUE\">Overdue</SelectItem>\n          </SelectContent>\n        </Select>\n      </div>\n\n      {/* Table */}\n      <div className=\"border rounded-md\">\n        {isLoading ? (\n          <div className=\"p-4 space-y-3\">\n            {[1, 2, 3, 4, 5].map((i) => (\n              <Skeleton key={i} className=\"h-12 w-full\" />\n            ))}\n          </div>\n        ) : filteredInvoices.length === 0 ? (\n          <div className=\"text-center py-12 text-muted-foreground\">\n            <p>No invoices found</p>\n            <Link href=\"/invoices/new\">\n              <Button\n                variant=\"link\"\n                className=\"mt-2\"\n                data-testid=\"button-create-first-invoice\"\n              >\n                Create your first invoice\n              </Button>\n            </Link>\n          </div>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Invoice #</TableHead>\n                  <TableHead>Client</TableHead>\n                  <TableHead>Project</TableHead>\n                  <TableHead>Scope</TableHead>\n                  <TableHead className=\"text-right\">Invoice Value</TableHead>\n                  <TableHead>Due Date</TableHead>\n                  <TableHead className=\"text-right\">Paid</TableHead>\n                  <TableHead className=\"text-right\">Balance</TableHead>\n                  <TableHead>Status</TableHead>\n                  <TableHead className=\"text-right\">Actions</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {filteredInvoices.map((invoice) => (\n                  <TableRow key={invoice.id} data-testid={`row-invoice-${invoice.id}`}>\n                    <TableCell className=\"font-mono text-sm font-medium\" data-testid={`text-invoice-number-${invoice.id}`}>\n                      {invoice.invoiceNumber}\n                    </TableCell>\n                    <TableCell data-testid={`text-client-${invoice.id}`}>{invoice.clientName}</TableCell>\n                    <TableCell data-testid={`text-project-${invoice.id}`}>{invoice.projectName || \"—\"}</TableCell>\n                    <TableCell className=\"text-muted-foreground\" data-testid={`text-scope-${invoice.id}`}>\n                      {invoice.projectScope || \"—\"}\n                    </TableCell>\n                    <TableCell className=\"text-right font-mono\" data-testid={`text-total-${invoice.id}`}>\n                      {formatCurrency(invoice.totalAmount)}\n                    </TableCell>\n                    <TableCell data-testid={`text-due-date-${invoice.id}`}>\n                      {formatDate(invoice.dueDate)}\n                    </TableCell>\n                    <TableCell className=\"text-right font-mono\" data-testid={`text-paid-${invoice.id}`}>\n                      {formatCurrency(invoice.amountPaid)}\n                    </TableCell>\n                    <TableCell className=\"text-right font-mono\" data-testid={`text-balance-${invoice.id}`}>\n                      {formatCurrency(invoice.balanceDue)}\n                    </TableCell>\n                    <TableCell>\n                      <StatusBadge status={invoice.status} type=\"invoice\" />\n                    </TableCell>\n                    <TableCell className=\"text-right\">\n                      <Link href={`/invoices/${invoice.id}`}>\n                        <Button variant=\"ghost\" size=\"sm\" data-testid={`button-view-${invoice.id}`}>\n                          View\n                        </Button>\n                      </Link>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":6506},"client/src/components/client-dialog.tsx":{"content":"import { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { insertClientSchema, type InsertClient, type Client } from \"@shared/schema\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\n\ninterface ClientDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  client?: Client;\n}\n\nexport function ClientDialog({ open, onOpenChange, client }: ClientDialogProps) {\n  const { toast } = useToast();\n  const isEdit = !!client;\n\n  const form = useForm<InsertClient>({\n    resolver: zodResolver(insertClientSchema),\n    defaultValues: client || {\n      name: \"\",\n      contactName: \"\",\n      email: \"\",\n      phone: \"\",\n      companyWebsite: \"\",\n      address: \"\",\n      status: \"ACTIVE\",\n      notes: \"\",\n    },\n  });\n\n  const mutation = useMutation({\n    mutationFn: async (data: InsertClient) => {\n      if (isEdit) {\n        return apiRequest(\"PUT\", `/api/clients/${client.id}`, data);\n      } else {\n        return apiRequest(\"POST\", \"/api/clients\", data);\n      }\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/clients\"] });\n      toast({\n        title: isEdit ? \"Client updated\" : \"Client created\",\n        description: `Successfully ${isEdit ? \"updated\" : \"created\"} client`,\n      });\n      onOpenChange(false);\n      form.reset();\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: InsertClient) => {\n    mutation.mutate(data);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>{isEdit ? \"Edit Client\" : \"New Client\"}</DialogTitle>\n          <DialogDescription>\n            {isEdit ? \"Update client information\" : \"Add a new client to your agency\"}\n          </DialogDescription>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"name\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Client Name *</FormLabel>\n                    <FormControl>\n                      <Input placeholder=\"Acme Corp\" {...field} data-testid=\"input-client-name\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"contactName\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Contact Person *</FormLabel>\n                    <FormControl>\n                      <Input placeholder=\"John Doe\" {...field} data-testid=\"input-contact-name\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"email\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Email *</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"email\"\n                        placeholder=\"john@acme.com\"\n                        {...field}\n                        data-testid=\"input-email\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"phone\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Phone *</FormLabel>\n                    <FormControl>\n                      <Input placeholder=\"+91 98765 43210\" {...field} data-testid=\"input-phone\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"companyWebsite\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Website</FormLabel>\n                    <FormControl>\n                      <Input\n                        placeholder=\"https://acme.com\"\n                        {...field}\n                        data-testid=\"input-website\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"status\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Status</FormLabel>\n                    <Select onValueChange={field.onChange} defaultValue={field.value}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-status\">\n                          <SelectValue placeholder=\"Select status\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"ACTIVE\">Active</SelectItem>\n                        <SelectItem value=\"INACTIVE\">Inactive</SelectItem>\n                        <SelectItem value=\"ARCHIVED\">Archived</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"address\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Address</FormLabel>\n                  <FormControl>\n                    <Input\n                      placeholder=\"123 Main St, City, State\"\n                      {...field}\n                      data-testid=\"input-address\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"notes\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Notes</FormLabel>\n                  <FormControl>\n                    <Textarea\n                      placeholder=\"Additional notes about the client...\"\n                      className=\"min-h-24\"\n                      {...field}\n                      data-testid=\"input-notes\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"flex justify-end gap-2 pt-4\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => onOpenChange(false)}\n                data-testid=\"button-cancel\"\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\" disabled={mutation.isPending} data-testid=\"button-save-client\">\n                {mutation.isPending ? \"Saving...\" : isEdit ? \"Update Client\" : \"Create Client\"}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":8246},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/pages/settings.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n} from \"@/components/ui/tabs\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Plus, Pencil } from \"lucide-react\";\nimport { ServiceDialog } from \"@/components/service-dialog\";\nimport { Badge } from \"@/components/ui/badge\";\nimport type { Service } from \"@shared/schema\";\nimport { formatCurrency, formatDate } from \"@/lib/utils\";\n\nexport default function SettingsPage() {\n  const [selectedService, setSelectedService] = useState<Service | null>(null);\n  const [isServiceDialogOpen, setIsServiceDialogOpen] = useState(false);\n\n  const { data: services, isLoading } = useQuery<Service[]>({\n    queryKey: [\"/api/services\"],\n  });\n\n  const handleNewService = () => {\n    setSelectedService(null);\n    setIsServiceDialogOpen(true);\n  };\n\n  const handleEditService = (service: Service) => {\n    setSelectedService(service);\n    setIsServiceDialogOpen(true);\n  };\n\n  const handleCloseDialog = () => {\n    setIsServiceDialogOpen(false);\n    setSelectedService(null);\n  };\n\n  const getCategoryLabel = (category: string) => {\n    const labels: Record<string, string> = {\n      SEO: \"SEO\",\n      SOCIAL_MEDIA: \"Social Media\",\n      CONTENT: \"Content\",\n      ADVERTISING: \"Advertising\",\n      DESIGN: \"Design\",\n      DEVELOPMENT: \"Development\",\n      CONSULTING: \"Consulting\",\n      OTHER: \"Other\",\n    };\n    return labels[category] || category;\n  };\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div>\n        <h1 className=\"text-2xl font-semibold text-foreground\">Settings</h1>\n        <p className=\"text-sm text-muted-foreground mt-1\">\n          Manage your application settings and preferences\n        </p>\n      </div>\n\n      <Tabs defaultValue=\"services\" className=\"w-full\">\n        <TabsList>\n          <TabsTrigger value=\"services\" data-testid=\"tab-services\">Services</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"services\" className=\"space-y-4 mt-6\">\n          <Card>\n            <CardHeader>\n              <div className=\"flex items-center justify-between\">\n                <CardTitle>Service Catalog</CardTitle>\n                <Button onClick={handleNewService} data-testid=\"button-new-service\">\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Add Service\n                </Button>\n              </div>\n            </CardHeader>\n            <CardContent>\n              {isLoading ? (\n                <div className=\"space-y-2\">\n                  <Skeleton className=\"h-12 w-full\" />\n                  <Skeleton className=\"h-12 w-full\" />\n                  <Skeleton className=\"h-12 w-full\" />\n                </div>\n              ) : services && services.length > 0 ? (\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>Name</TableHead>\n                      <TableHead>Category</TableHead>\n                      <TableHead>Status</TableHead>\n                      <TableHead className=\"text-right\">Default Price</TableHead>\n                      <TableHead>Currency</TableHead>\n                      <TableHead>Unit</TableHead>\n                      <TableHead>Updated</TableHead>\n                      <TableHead className=\"w-20\"></TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {services.map((service) => (\n                      <TableRow key={service.id} data-testid={`row-service-${service.id}`}>\n                        <TableCell className=\"font-medium\" data-testid={`text-name-${service.id}`}>\n                          {service.name}\n                        </TableCell>\n                        <TableCell data-testid={`text-category-${service.id}`}>\n                          {getCategoryLabel(service.category)}\n                        </TableCell>\n                        <TableCell>\n                          <Badge\n                            variant=\"outline\"\n                            className={service.status === \"ACTIVE\" ? \"bg-green-100 text-green-800 border-green-200\" : \"bg-gray-100 text-gray-800 border-gray-200\"}\n                            data-testid={`badge-status-${service.id}`}\n                          >\n                            {service.status === \"ACTIVE\" ? \"Active\" : \"Inactive\"}\n                          </Badge>\n                        </TableCell>\n                        <TableCell className=\"text-right font-mono\" data-testid={`text-price-${service.id}`}>\n                          {service.currency} {formatCurrency(service.defaultPrice)}\n                        </TableCell>\n                        <TableCell data-testid={`text-currency-${service.id}`}>\n                          {service.currency}\n                        </TableCell>\n                        <TableCell data-testid={`text-unit-${service.id}`}>\n                          {service.unit}\n                        </TableCell>\n                        <TableCell className=\"text-muted-foreground\" data-testid={`text-updated-${service.id}`}>\n                          {formatDate(service.updatedAt)}\n                        </TableCell>\n                        <TableCell>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            onClick={() => handleEditService(service)}\n                            data-testid={`button-edit-${service.id}`}\n                          >\n                            <Pencil className=\"h-4 w-4\" />\n                          </Button>\n                        </TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              ) : (\n                <div className=\"text-center py-12\" data-testid=\"empty-state-services\">\n                  <p className=\"text-muted-foreground\">No services found</p>\n                  <p className=\"text-sm text-muted-foreground mt-1\">\n                    Create your first service to get started\n                  </p>\n                  <Button onClick={handleNewService} className=\"mt-4\" data-testid=\"button-create-first-service\">\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Add Service\n                  </Button>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n\n      <ServiceDialog\n        service={selectedService}\n        open={isServiceDialogOpen}\n        onClose={handleCloseDialog}\n      />\n    </div>\n  );\n}\n","size_bytes":6853},"client/src/components/service-dialog.tsx":{"content":"import { useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { insertServiceSchema, type InsertService, type Service } from \"@shared/schema\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\n\ninterface ServiceDialogProps {\n  service?: Service | null;\n  open: boolean;\n  onClose: () => void;\n}\n\nexport function ServiceDialog({ service, open, onClose }: ServiceDialogProps) {\n  const { toast } = useToast();\n  const isEditing = !!service;\n\n  const form = useForm<InsertService>({\n    resolver: zodResolver(insertServiceSchema),\n    defaultValues: {\n      name: \"\",\n      description: \"\",\n      category: \"OTHER\",\n      defaultPrice: 0,\n      currency: \"INR\",\n      unit: \"Hour\",\n      status: \"ACTIVE\",\n    },\n  });\n\n  useEffect(() => {\n    if (service && open) {\n      form.reset({\n        name: service.name,\n        description: service.description || \"\",\n        category: service.category,\n        defaultPrice: service.defaultPrice,\n        currency: service.currency,\n        unit: service.unit,\n        status: service.status,\n      });\n    } else if (!open) {\n      form.reset({\n        name: \"\",\n        description: \"\",\n        category: \"OTHER\",\n        defaultPrice: 0,\n        currency: \"INR\",\n        unit: \"Hour\",\n        status: \"ACTIVE\",\n      });\n    }\n  }, [service, open, form]);\n\n  const mutation = useMutation({\n    mutationFn: async (data: InsertService) => {\n      if (isEditing && service) {\n        return apiRequest(\"PUT\", `/api/services/${service.id}`, data);\n      } else {\n        return apiRequest(\"POST\", \"/api/services\", data);\n      }\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/services\"] });\n      toast({\n        title: isEditing ? \"Service updated\" : \"Service created\",\n        description: `Successfully ${isEditing ? \"updated\" : \"created\"} service`,\n      });\n      onClose();\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: InsertService) => {\n    mutation.mutate(data);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-2xl\" data-testid=\"dialog-service\">\n        <DialogHeader>\n          <DialogTitle data-testid=\"text-dialog-title\">\n            {isEditing ? \"Edit Service\" : \"New Service\"}\n          </DialogTitle>\n        </DialogHeader>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"name\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Service Name *</FormLabel>\n                    <FormControl>\n                      <Input {...field} data-testid=\"input-name\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"category\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Category</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-category\">\n                          <SelectValue placeholder=\"Select category\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"SEO\">SEO</SelectItem>\n                        <SelectItem value=\"SOCIAL_MEDIA\">Social Media</SelectItem>\n                        <SelectItem value=\"CONTENT\">Content</SelectItem>\n                        <SelectItem value=\"ADVERTISING\">Advertising</SelectItem>\n                        <SelectItem value=\"DESIGN\">Design</SelectItem>\n                        <SelectItem value=\"DEVELOPMENT\">Development</SelectItem>\n                        <SelectItem value=\"CONSULTING\">Consulting</SelectItem>\n                        <SelectItem value=\"OTHER\">Other</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"defaultPrice\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Default Price *</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"number\"\n                        step=\"0.01\"\n                        {...field}\n                        onChange={(e) => field.onChange(parseFloat(e.target.value) || 0)}\n                        data-testid=\"input-price\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"currency\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Currency</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-currency\">\n                          <SelectValue placeholder=\"Select currency\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"INR\">INR</SelectItem>\n                        <SelectItem value=\"USD\">USD</SelectItem>\n                        <SelectItem value=\"EUR\">EUR</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"unit\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Unit</FormLabel>\n                    <FormControl>\n                      <Input {...field} placeholder=\"e.g., Hour, Month, Project\" data-testid=\"input-unit\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"status\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Status</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-status\">\n                          <SelectValue placeholder=\"Select status\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"ACTIVE\">Active</SelectItem>\n                        <SelectItem value=\"INACTIVE\">Inactive</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"description\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Description</FormLabel>\n                  <FormControl>\n                    <Textarea\n                      {...field}\n                      placeholder=\"Describe the service...\"\n                      className=\"min-h-20\"\n                      data-testid=\"input-description\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"flex justify-end gap-2 pt-4\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={onClose}\n                data-testid=\"button-cancel\"\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\" disabled={mutation.isPending} data-testid=\"button-save\">\n                {mutation.isPending ? \"Saving...\" : isEditing ? \"Update Service\" : \"Create Service\"}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":9380}},"version":2}